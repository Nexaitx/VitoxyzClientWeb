import{A as E,b as w,f as I,j as A,r as B,s as T,t as $}from"./chunk-QPED7LSZ.js";import{c as v}from"./chunk-LYOH3LZA.js";import{h as x,o as k,v as S}from"./chunk-KSK4UUXF.js";import{Lb as g,Mb as a,Nb as c,Ob as h,Yb as d,Z as s,ba as _,cb as l,ga as C,hb as M,l as f,mc as p,nc as O,ob as P,qc as m,rc as u,sc as b,tb as y}from"./chunk-6LJ32Q7N.js";function H(i,t){if(i&1&&(a(0,"option",13),p(1),c()),i&2){let e=t.$implicit;g("value",e),l(),O(e)}}var Q=class i{constructor(t){this.router=t}searchQuery="";selectedLocation="Delhi";locations=["East Godavari","Chennai","Delhi","Ludhiana","Chandigarh"];onSearch(){if(!this.searchQuery.trim()){alert("Please enter a search query");return}this.router.navigate(["/search"],{queryParams:{q:this.searchQuery,loc:this.selectedLocation}})}onQuickOrder(){alert("Quick order feature coming soon!")}useCurrentLocation(){navigator.geolocation?navigator.geolocation.getCurrentPosition(t=>{console.log("Current location:",t.coords),this.selectedLocation="Current Location",alert("Location updated using GPS!")},t=>{console.error("Error fetching location:",t),alert("Unable to fetch current location")}):alert("Geolocation not supported in your browser")}static \u0275fac=function(e){return new(e||i)(M(v))};static \u0275cmp=P({type:i,selectors:[["app-header"]],decls:15,vars:3,consts:[[1,"search-bar","container","d-flex","align-items-center","justify-content-between","py-2"],[1,"location","d-flex","align-items-center"],[1,"bi","bi-geo-alt-fill","text-primary"],["aria-label","Select your delivery location",1,"form-select","border-0","bg-transparent","fw-semibold",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["title","Use current location",1,"bi","bi-crosshair","text-muted",2,"cursor","pointer",3,"click"],[1,"search-box","flex-grow-1","position-relative"],["type","text","placeholder","Search for Medicines and Health Products","aria-label","Search field",1,"form-control",3,"ngModelChange","keyup.enter","ngModel"],[1,"bi","bi-search","position-absolute","end-0","top-50","translate-middle-y","me-3",2,"cursor","pointer",3,"click"],[1,"d-flex","align-items-center"],[1,"text-muted","small","d-none","d-md-inline","me-3"],[1,"bi","bi-lightning-charge","text-danger","me-1"],[1,"btn","btn-danger","rounded-pill","px-4","fw-semibold",3,"click"],[3,"value"]],template:function(e,r){e&1&&(a(0,"div",0)(1,"div",1),h(2,"i",2),a(3,"select",3),b("ngModelChange",function(o){return u(r.selectedLocation,o)||(r.selectedLocation=o),o}),y(4,H,2,2,"option",4),c(),a(5,"i",5),d("click",function(){return r.useCurrentLocation()}),c()(),a(6,"div",6)(7,"input",7),b("ngModelChange",function(o){return u(r.searchQuery,o)||(r.searchQuery=o),o}),d("keyup.enter",function(){return r.onSearch()}),c(),a(8,"i",8),d("click",function(){return r.onSearch()}),c()(),a(9,"div",9)(10,"span",10),h(11,"i",11),p(12," QUICK BUY! Get 15% off on medicines* "),c(),a(13,"button",12),d("click",function(){return r.onQuickOrder()}),p(14," Quick order "),c()()()),e&2&&(l(3),m("ngModel",r.selectedLocation),l(),g("ngForOf",r.locations),l(3),m("ngModel",r.searchQuery))},dependencies:[k,x,E,T,$,w,B,I,A],styles:['@charset "UTF-8";.search-bar[_ngcontent-%COMP%]{background-color:#fff;box-shadow:0 4px 12px #00000014;border-radius:50px;margin-top:12px;padding:5px 15px;transition:all .3s ease;margin-bottom:50px}.search-bar[_ngcontent-%COMP%]   .location[_ngcontent-%COMP%]{flex-shrink:0;padding:0 10px}.search-bar[_ngcontent-%COMP%]   .location[_ngcontent-%COMP%]   i.bi[_ngcontent-%COMP%]{font-size:1.2rem;color:#0bbbc1}.search-bar[_ngcontent-%COMP%]   .location[_ngcontent-%COMP%]   i.bi.bi-crosshair[_ngcontent-%COMP%]{color:#999;transition:color .2s}.search-bar[_ngcontent-%COMP%]   .location[_ngcontent-%COMP%]   i.bi.bi-crosshair[_ngcontent-%COMP%]:hover{color:#0bbbc1}.search-bar[_ngcontent-%COMP%]   .form-select[_ngcontent-%COMP%]{font-size:.95rem;font-weight:600;width:auto;cursor:pointer}.search-bar[_ngcontent-%COMP%]   .form-select[_ngcontent-%COMP%]:focus-visible{outline:2px solid #0BBBC1;outline-offset:1px}.search-bar[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{height:48px;border-radius:50px;border:1px solid #e5e5e5;background-color:#f0f0f0;font-size:1rem;transition:all .3s;padding-left:1.5rem;padding-right:3rem}.search-bar[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{background-color:#fff;border-color:#0bbbc1;box-shadow:0 0 0 .2rem #03a9f433}.search-bar[_ngcontent-%COMP%]   i.bi-search[_ngcontent-%COMP%]{font-size:1.2rem;color:#666;transition:color .2s}.search-bar[_ngcontent-%COMP%]   i.bi-search[_ngcontent-%COMP%]:hover{color:#0bbbc1}.search-bar[_ngcontent-%COMP%]   .btn-danger[_ngcontent-%COMP%]{background-color:#0bbbc1;border:none;font-weight:600;transition:all .2s ease}.search-bar[_ngcontent-%COMP%]   .btn-danger[_ngcontent-%COMP%]:hover{background-color:#088c91;transform:translateY(-1px);box-shadow:0 4px 8px #0000001a}.search-bar[_ngcontent-%COMP%]   .small[_ngcontent-%COMP%]{color:#444!important}.search-bar[_ngcontent-%COMP%]   .small[_ngcontent-%COMP%]   i.bi-lightning-charge[_ngcontent-%COMP%]{color:#f44336!important}@media (max-width: 992px){.search-bar[_ngcontent-%COMP%]{border-radius:12px;padding:10px}.search-bar[_ngcontent-%COMP%]   .search-box[_ngcontent-%COMP%]{margin:0 5px}.d-md-inline[_ngcontent-%COMP%]{display:none!important}}@media (max-width: 768px){.search-bar[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch!important;gap:10px;padding:15px}.location[_ngcontent-%COMP%]{order:1;width:100%;justify-content:space-between;padding:0}.location[_ngcontent-%COMP%]   .form-select[_ngcontent-%COMP%]{flex-grow:1}.search-box[_ngcontent-%COMP%]{order:2;width:100%;margin:0}.d-flex.align-items-center[_ngcontent-%COMP%]:last-child{order:3;width:100%;justify-content:center!important}.d-flex.align-items-center[_ngcontent-%COMP%]:last-child   .btn-danger[_ngcontent-%COMP%]{width:100%;padding:12px 0;height:auto}}']})};var L=class i{http=C(S);API_BASE="https://vitoxyzbackend-az2e.onrender.com/api/cart";_cart$=new f([]);cart$=this._cart$.asObservable();constructor(){}fetchCart(){let t=localStorage.getItem("authToken");return this.http.get(`${this.API_BASE}/my`,{headers:{Authorization:`Bearer ${t}`}}).pipe(s(e=>{if(e&&e.data){let r=e.data.map(n=>{let o="assets/no-image.png";return n.imageUrl&&(o=n.imageUrl.split("|")[0].trim()),{id:n.medicineId,name:n.productName,image:o,qty:n?.quantity?.toString()||"1",price:n.price,mrp:n.mrp||n.price,count:n.quantity||1,productType:n.productType}});this._cart$.next(r)}else this._cart$.next([])}))}removeItem(t){let e=localStorage.getItem("authToken");return this.http.delete(`${this.API_BASE}/remove/${t}`,{headers:{Authorization:`Bearer ${e}`}}).pipe(s(()=>this.fetchCart()))}addItem(t){let e=localStorage.getItem("authToken");return console.log("tokensdsasd",e),this.http.post(`${this.API_BASE}/add`,t,{headers:{Authorization:`Bearer ${e}`}}).pipe(s(()=>this.fetchCart()))}incrementQty(t){let e=localStorage.getItem("authToken");return this.http.put(`${this.API_BASE}/increment/${t}`,{headers:{Authorization:`Bearer ${e}`}}).pipe(s(()=>this.fetchCart().subscribe()))}decrementQty(t){let e=localStorage.getItem("authToken");return this.http.put(`${this.API_BASE}/decrement/${t}`,{headers:{Authorization:`Bearer ${e}`}}).pipe(s(()=>this.fetchCart().subscribe()))}updateQty(t,e,r){let n=localStorage.getItem("authToken");return this.http.post(`${this.API_BASE}/update`,{medicineId:t,quantity:e,productType:r},{headers:{Authorization:`Bearer ${n}`}}).pipe(s(()=>this.fetchCart().subscribe()))}static \u0275fac=function(e){return new(e||i)};static \u0275prov=_({token:i,factory:i.\u0275fac,providedIn:"root"})};export{Q as a,L as b};
