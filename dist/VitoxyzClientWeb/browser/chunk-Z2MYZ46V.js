import{a as q,b as H,c as Y,d as J}from"./chunk-7HWRAZ7K.js";import{a as O}from"./chunk-OSFJNUHD.js";import{a as U}from"./chunk-QOF4RPCA.js";import{d as W}from"./chunk-JLG2IVQ3.js";import"./chunk-NRD3KBLP.js";import"./chunk-WYUYQIV5.js";import{g as Q}from"./chunk-ZJALN7ZM.js";import{f as j}from"./chunk-DZLOBADE.js";import"./chunk-TCBDXEG3.js";import"./chunk-VJ4JAR2A.js";import{b as F}from"./chunk-DDM6S2K4.js";import{c as w,d as k}from"./chunk-TIMTJE23.js";import"./chunk-SP7GYIMR.js";import{a as V}from"./chunk-CLG2LXF4.js";import{f as E}from"./chunk-TMNAOABQ.js";import{F as z,G as d,J as I,K as N,O as D,R,U as T,V as A,W as L,X as B,ba as G,ca as K,da as $}from"./chunk-MFYBXPGH.js";import{c as _,g as S}from"./chunk-DHDG4QUY.js";import{h as P,p as C}from"./chunk-QI76QBAE.js";import{Lb as c,Mb as t,Nb as e,Ob as m,_b as M,cb as a,e as y,ga as b,hb as h,ob as x,oc as n,pc as s,qc as u,tb as v}from"./chunk-VVX2ZSCF.js";function ee(p,o){if(p&1&&(t(0,"option",29),n(1),e()),p&2){let r=o.$implicit;c("value",r),a(),s(r)}}var X=class p{constructor(o){this.fb=o;this.form=this.fb.group({name:["",[d.required,d.minLength(3)]],email:["",[d.required,d.email]],country:["",d.required]})}router=b(_);razorpayKeyId="rzp_test_RARA6BGk8D2Y2o";isPaymentLoading=!1;form;countries=["India","United States","United Kingdom","Canada","Australia"];plan="Premium Health";price=499;tax=5;duration="1 Month";get total(){return this.price+this.tax}goToDietDashboard(){this.router.navigate(["/diet-charts"])}pay(){return y(this,null,function*(){if(this.form.markAllAsTouched(),!this.form.invalid){if(!this.razorpayKeyId){alert("Razorpay Key ID is missing. Please set it in the component.");return}try{this.isPaymentLoading=!0,yield this.loadRazorpaySdk();let o=this.getPayableAmount(),{name:r,email:i,country:l}=this.form.value,Z={key:this.razorpayKeyId,amount:Math.round(o*100),currency:"INR",name:"Your Company Name",description:`${this.plan} - ${this.duration}`,prefill:{name:r||"",email:i||"",contact:""},notes:{plan:this.plan,duration:this.duration,price:String(this.price),tax:String(this.tax),country:l||""},theme:{color:"#0d6efd"},modal:{ondismiss:()=>console.log("Razorpay Checkout closed.")},handler:f=>this.onPaymentSuccess(f)},g=new Razorpay(Z);g.on("payment.failed",f=>this.onPaymentFailed(f)),g.open()}catch(o){console.error("Payment init error:",o),alert("Unable to start payment. Please try again.")}finally{this.isPaymentLoading=!1}}})}onPaymentSuccess(o){console.log("Payment success:",o),alert(`\u2705 Payment successful! Payment ID: ${o?.razorpay_payment_id||"N/A"}`),this.goToDietDashboard()}onPaymentFailed(o){console.error("Payment failed:",o);let r=o?.error?.description||"Payment failed. Please try again.";alert(r)}loadRazorpaySdk(){return new Promise((o,r)=>{if(typeof Razorpay<"u")return o();let i=document.getElementById("razorpay-checkout-js");if(i){i.addEventListener("load",()=>o()),i.addEventListener("error",()=>r(new Error("Failed to load Razorpay SDK.")));return}let l=document.createElement("script");l.id="razorpay-checkout-js",l.src="https://checkout.razorpay.com/v1/checkout.js",l.async=!0,l.onload=()=>o(),l.onerror=()=>r(new Error("Failed to load Razorpay SDK.")),document.body.appendChild(l)})}getPayableAmount(){return this.total}static \u0275fac=function(r){return new(r||p)(h(G))};static \u0275cmp=x({type:p,selectors:[["app-payment-screen"]],decls:64,vars:8,consts:[[1,"page-wrap",2,"margin-top","-30px"],[1,"container","py-5"],["novalidate","",3,"formGroup"],[1,"row","g-4","justify-content-between",2,"margin-top","-86px"],[1,"col-12"],[1,"title","mb-4"],[1,"col-lg-7"],[1,"section-heading","mb-3"],[1,"form-group","mb-3","position-relative"],[1,"form-label"],[1,"bi","bi-person","input-icon"],["type","text","placeholder","Enter your Name","formControlName","name",1,"form-control","input-with-icon"],[1,"form-group","flex-fill","mb-3","position-relative"],[1,"bi","bi-envelope","input-icon"],["type","email","placeholder","Enter your Email","formControlName","email",1,"form-control","input-with-icon"],[1,"custom-select-wrapper"],[1,"bi","bi-geo-alt","input-icon"],["formControlName","country",1,"form-control","custom-select","input-with-icon"],["value","","disabled","","selected",""],[3,"value",4,"ngFor","ngForOf"],[1,"col-lg-5"],[1,"card","p-4","shadow-sm","rounded-4","border-0"],[1,"summary-box","rounded-4","p-3"],[1,"d-flex","justify-content-between","py-1"],[1,"muted"],[1,"fw-semibold"],[1,"my-2"],[1,"fw-bold"],["mat-raised-button","","color","primary",1,"pay-btn","w-90","mt-3","makepaymt","rounded-pill",3,"click","disabled"],[3,"value"]],template:function(r,i){r&1&&(t(0,"div",0)(1,"div",1)(2,"form",2)(3,"div",3)(4,"div",4)(5,"h5",5),n(6,"Enter your payment details."),e()(),t(7,"div",6)(8,"h6",7),n(9,"Payment details"),e(),t(10,"div",8)(11,"label",9),n(12,"Name"),e(),m(13,"i",10)(14,"input",11),e(),t(15,"div",12)(16,"label",9),n(17,"Email"),e(),m(18,"i",13)(19,"input",14),e(),t(20,"div",12)(21,"label",9),n(22,"Country"),e(),t(23,"div",15),m(24,"i",16),t(25,"select",17)(26,"option",18),n(27,"Select Country"),e(),v(28,ee,2,2,"option",19),e()()()(),t(29,"div",20)(30,"div",21)(31,"h6",7),n(32,"Order Summary"),e(),t(33,"div",22)(34,"div",23)(35,"span",24),n(36,"Plan"),e(),t(37,"span",25),n(38),e()(),t(39,"div",23)(40,"span",24),n(41,"Plan Price"),e(),t(42,"span",25),n(43),e()(),t(44,"div",23)(45,"span",24),n(46,"Duration"),e(),t(47,"span",25),n(48),e()(),t(49,"div",23)(50,"span",24),n(51,"Income Tax"),e(),t(52,"span",25),n(53),e()(),m(54,"mat-divider",26),t(55,"div",23)(56,"span",25),n(57,"Total Due"),e(),t(58,"span",27),n(59),e()()(),t(60,"button",28),M("click",function(){return i.pay()}),n(61," Make a Payment "),e()()()()()()(),t(62,"div"),m(63,"app-footer"),e()),r&2&&(a(2),c("formGroup",i.form),a(26),c("ngForOf",i.countries),a(10),s(i.plan),a(5),u("$",i.price,"/month"),a(5),s(i.duration),a(5),u("$",i.tax.toFixed(2)),a(6),u("$",i.total.toFixed(2)),a(),c("disabled",i.form.invalid))},dependencies:[C,P,S,E,O,k,w,q,F,J,H,Q,j,W,K,D,L,B,z,A,I,N,$,R,T,U,Y,V],styles:['@charset "UTF-8";.heading-text[_ngcontent-%COMP%]{color:#21534e;font-size:22px;font-weight:700}.form-control.input-with-icon[_ngcontent-%COMP%]{border-radius:50px!important;height:48px;padding-left:40px;background-color:#fff;border:1px solid rgba(11,187,193,.1019607843);color:#0bbbc1}.form-control.input-without-icon[_ngcontent-%COMP%]{background-color:#fff;border:1px solid rgba(11,187,193,.1019607843);border-radius:12px;min-height:120px;padding:12px}.custom-select-wrapper[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center}.custom-select-wrapper[_ngcontent-%COMP%]   .input-icon[_ngcontent-%COMP%]{position:absolute;left:14px;top:10px;font-size:18px;color:#0bbbc1;pointer-events:none}.custom-select[_ngcontent-%COMP%]{appearance:none;width:100%;padding:10px 40px;border:1px solid #e0e6ed;border-radius:25px;background-color:#fafbfd;font-size:16px;font-weight:500;color:#1a1a1a;outline:none;cursor:pointer}.makepaymt[_ngcontent-%COMP%]{color:#fff!important}.custom-select[_ngcontent-%COMP%]   option[value=""][_ngcontent-%COMP%]{color:#9ca3af}.custom-select-wrapper[_ngcontent-%COMP%]:after{content:"\\25bc";position:absolute;right:14px;font-size:12px;color:#333;pointer-events:none}.input-icon[_ngcontent-%COMP%]{position:absolute;top:50%;left:12px;color:#0bbbc1!important;font-size:18px;pointer-events:none}.row-input-icon[_ngcontent-%COMP%]{left:24px;background-color:red}.form-label[_ngcontent-%COMP%]{font-weight:500;margin-bottom:6px;color:#495057}.page-wrap[_ngcontent-%COMP%]{min-height:100vh;background:linear-gradient(180deg,#fff,#f6fbff)}.title[_ngcontent-%COMP%]{color:#303642;font-weight:600}.section-heading[_ngcontent-%COMP%]{color:#101828;font-weight:500}.card[_ngcontent-%COMP%]{background:#fff;border-radius:20px!important}.summary-box[_ngcontent-%COMP%]{background:#f0fbf9;border:1px solid #E9F6F3}.muted[_ngcontent-%COMP%]{color:var(--muted)}.mat-field.mat-mdc-form-field[_ngcontent-%COMP%]{margin-bottom:16px}.mat-mdc-form-field[_ngcontent-%COMP%]   .mdc-text-field--outlined[_ngcontent-%COMP%], .mat-mdc-form-field[_ngcontent-%COMP%]   .mdc-text-field--no-label[_ngcontent-%COMP%]{border-radius:14px!important;background:#f0fbf9}.mat-mdc-form-field[_ngcontent-%COMP%]   .mdc-text-field__input[_ngcontent-%COMP%]{padding-left:6px!important}.mat-mdc-form-field[_ngcontent-%COMP%]   .mat-mdc-form-field-icon-prefix[_ngcontent-%COMP%]{margin-right:6px;color:#14c1b5}.mat-mdc-select-min-line[_ngcontent-%COMP%]{padding-left:0!important}.pay-btn.mdc-button--raised[_ngcontent-%COMP%]{height:52px;font-weight:500;letter-spacing:.2px;background-color:#0bbbc1!important}.pay-btn[_ngcontent-%COMP%]:hover{background-color:#10a99e!important}@media (max-width: 991.98px){.title[_ngcontent-%COMP%]{margin-bottom:.75rem}}']})};export{X as PaymentScreen};
