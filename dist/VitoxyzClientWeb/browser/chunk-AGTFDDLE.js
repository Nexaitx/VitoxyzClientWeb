import{f as D}from"./chunk-2FIYSNYS.js";import{a as z,b as B}from"./chunk-TNRG4YRG.js";import{c as y,g as N}from"./chunk-UF26DDQM.js";import{h as P,i as k,q as S,y as O}from"./chunk-HSQUREWB.js";import{Ab as g,Pb as s,Qb as r,Rb as a,Sb as v,Wb as _,Xb as M,Zb as x,cc as l,db as h,eb as i,ec as c,na as f,oa as u,pb as m,qc as p,rc as C,sc as w,tc as I,vb as b}from"./chunk-36LOJXOE.js";function T(o,t){if(o&1){let e=x();_(0),r(1,"a",4),l("click",function(){let d=f(e).$implicit,F=c(2);return u(F.navigate(d))}),r(2,"div",5),v(3,"i",6),a(),r(4,"span",7),w(5),a()(),M()}if(o&2){let e=t.$implicit,n=c(2);i(),p("special-item",e.isSpecial)("active",n.isActive(e.link)),i(),p("special-icon-wrapper",e.isSpecial),i(),C(e.icon),i(),p("d-none",e.isSpecial),i(),I(e.label)}}function A(o,t){if(o&1&&(r(0,"footer",2),g(1,T,6,11,"ng-container",3),a()),o&2){let e=c();i(),s("ngForOf",e.navItems)}}var E=class o{constructor(t,e){this.router=t;this.http=e}mobileBreakpoint=768;isMobile=!1;navItems=[{label:"Pharmacy",icon:"fi-rr-medicine",link:"/medicines"},{label:"Book Staff",icon:"fi-rr-together-people",link:"/book-staff"},{label:"Diet Plans",icon:"fi-rr-salad",link:"/diet/user-onboarding"},{label:"Profile",icon:"fi-rr-user-pen",link:"/user-profile"}];authMode="login";ngOnInit(){this.checkMobileView()}onResize(){this.checkMobileView()}checkMobileView(){this.isMobile=window.innerWidth<=this.mobileBreakpoint}get isLoggedIn(){return!!localStorage.getItem("authToken")}navigate(t){if(t.label==="Diet Plans"){if(!this.isLoggedIn){this.authMode="login",localStorage.setItem("redirectAfterLogin","diet-check");let e=document.getElementById("authModal");e&&new window.bootstrap.Modal(e).show();return}this.navigateToDiet();return}if(t.label==="Book Staff"&&!this.isLoggedIn){this.authMode="login",localStorage.setItem("redirectAfterLogin",t.link);let e=document.getElementById("authModal");e&&new window.bootstrap.Modal(e).show()}else t.link&&this.router.navigate([t.link])}navigateToDiet(){let t=localStorage.getItem("authToken");if(!t){new window.bootstrap.Modal(document.getElementById("loginModal")).show();return}this.http.get(`${z}${B.DIET_DASHBOARD}?id=1073741824&username=string&password=string&authorities=%5B%7B%22authority%22%3A%22string%22%7D%5D&userType=string&enabled=true&accountNonExpired=true&accountNonLocked=true&credentialsNonExpired=true`,{headers:{Authorization:`Bearer ${t}`}}).subscribe({next:e=>{e?.userSubscriptionType!==null?this.router.navigate(["diet-charts"]):this.router.navigate(["diet/user-onboarding"])},error:()=>{this.router.navigate(["diet/user-onboarding"])}})}isActive(t){return this.router.url===t}onLoginSuccess(){let t=localStorage.getItem("redirectAfterLogin");if(localStorage.removeItem("redirectAfterLogin"),t==="diet-check"){this.navigateToDiet();return}t?this.router.navigate([t]):this.router.navigate(["/dashboard"])}static \u0275fac=function(e){return new(e||o)(m(y),m(O))};static \u0275cmp=b({type:o,selectors:[["app-mobile-footer-nav"]],hostBindings:function(e,n){e&1&&l("resize",function(){return n.onResize()},h)},decls:2,vars:2,consts:[["class","footer-nav-container fixed-bottom d-flex justify-content-around align-items-center bg-white border-top",4,"ngIf"],[3,"loginSuccess","authMode"],[1,"footer-nav-container","fixed-bottom","d-flex","justify-content-around","align-items-center","bg-white","border-top"],[4,"ngFor","ngForOf"],[1,"nav-item","d-flex","flex-column","align-items-center","justify-content-center","text-decoration-none",3,"click"],[1,"icon-wrapper","d-flex","align-items-center","justify-content-center"],[1,"fi"],[1,"nav-label"]],template:function(e,n){e&1&&(g(0,A,2,1,"footer",0),r(1,"app-authorization",1),l("loginSuccess",function(){return n.onLoginSuccess()}),a()),e&2&&(s("ngIf",n.isMobile),i(),s("authMode",n.authMode))},dependencies:[S,P,k,N,D],styles:['@import"https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css";.footer-nav-container[_ngcontent-%COMP%]{height:65px;padding:5px 0;z-index:1000}@media (min-width: 769px){.footer-nav-container[_ngcontent-%COMP%]{display:none!important}}.nav-label[_ngcontent-%COMP%]{font-size:12px;line-height:1;font-weight:500}.special-item[_ngcontent-%COMP%]{flex:0 0 20%;max-width:20%;position:relative;top:-15px}.special-item[_ngcontent-%COMP%]   .special-content[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);text-align:center;line-height:1;color:#3d3d3d;font-size:.65rem;font-weight:600}.special-item[_ngcontent-%COMP%]   .special-content[_ngcontent-%COMP%]   .special-text[_ngcontent-%COMP%]{margin:0;color:#7b4f3f;font-weight:500;font-size:.7rem}.special-item[_ngcontent-%COMP%]   .special-content[_ngcontent-%COMP%]   .special-subtext[_ngcontent-%COMP%]{margin:0;color:#7b4f3f;font-weight:700;font-size:.8rem}.nav-item[_ngcontent-%COMP%]{flex:1;max-width:20%;color:#343a40;transition:color .3s ease}.nav-item.active[_ngcontent-%COMP%]   .icon-wrapper[_ngcontent-%COMP%]   .fi[_ngcontent-%COMP%]{color:#db9280;font-weight:600;background:#fbf8eb;border-radius:2px;padding:2px 10px 0}.fi[_ngcontent-%COMP%]{font-size:24px}']})};export{E as a};
