import{a as N}from"./chunk-AGTFDDLE.js";import"./chunk-2FIYSNYS.js";import"./chunk-RXPDFXEY.js";import{a as B}from"./chunk-5TBLFU7I.js";import"./chunk-GA6KQOR5.js";import"./chunk-OHQSNZA5.js";import{a as A,b as F}from"./chunk-TNRG4YRG.js";import"./chunk-UF26DDQM.js";import{h as k,i as S,n as E,o as T,w as z,y as U}from"./chunk-HSQUREWB.js";import{Ab as P,Hc as D,Ic as w,Jc as I,Pb as o,Qb as i,Rb as t,Sb as x,Zb as b,bb as u,cc as y,eb as a,ec as s,na as h,oa as v,pb as O,qc as C,sc as l,tc as p,uc as c,vb as M}from"./chunk-36LOJXOE.js";function $(d,r){if(d&1){let e=b();i(0,"div",19),y("click",function(){let m=h(e).$implicit,g=s();return v(g.selectDay(m))}),i(1,"div",20),l(2),t(),i(3,"span"),l(4),t()()}if(d&2){let e=r.$implicit;C("active",e==null?null:e.isToday),a(2),p(e==null?null:e.date),a(2),p(e==null?null:e.name)}}function H(d,r){d&1&&(i(0,"div",21),l(1,"Loading diet plans..."),t())}function L(d,r){if(d&1&&(i(0,"div",22),l(1),t()),d&2){let e=s();a(),p(e.error)}}function R(d,r){if(d&1){let e=b();i(0,"button",25),y("click",function(){let m=h(e).$implicit,g=s(2);return v(g.selectPlan(m))}),l(1),t()}if(d&2){let e=r.$implicit,n=s(2);C("active",(n.selectedPlan==null?null:n.selectedPlan.dietPlanId)===(e==null?null:e.dietPlanId)),a(),c(" ",e==null?null:e.title," ")}}function V(d,r){if(d&1&&(i(0,"div",23),P(1,R,2,3,"button",24),t()),d&2){let e=s();a(),o("ngForOf",e.dietPlans)}}function W(d,r){if(d&1&&(i(0,"div",26)(1,"div",27)(2,"div",28)(3,"div",29)(4,"span",30),l(5,"Daily Calories"),t(),i(6,"span"),l(7),t()(),i(8,"div",31),l(9),t()()(),i(10,"div",32)(11,"div",33)(12,"div",34),l(13),D(14,"titlecase"),t(),i(15,"div",35),l(16,"Meal Type"),t()()(),i(17,"div",32)(18,"div",33)(19,"div",34),l(20),t(),i(21,"div",35),l(22,"Difficulty"),t()()()()),d&2){let e=s();a(7),c("",e.selectedPlan==null?null:e.selectedPlan.caloriesPerDay," kcal"),a(2),c(" Duration: ",e.selectedPlan==null?null:e.selectedPlan.durationDays," days "),a(4),p(w(14,4,e.selectedPlan==null?null:e.selectedPlan.mealType)),a(7),p(e.selectedPlan==null?null:e.selectedPlan.difficultyLevel)}}function Y(d,r){if(d&1&&(i(0,"div",36)(1,"span"),l(2,"Total: "),t(),i(3,"span"),l(4),t()()),d&2){let e=s();a(4),c("",e.selectedPlan==null?null:e.selectedPlan.caloriesPerDay," kcal")}}function q(d,r){if(d&1&&(i(0,"div",38),x(1,"img",39),i(2,"div")(3,"div",30),l(4,"Snacks"),t(),i(5,"p",40),l(6),t()()()),d&2){let e=s(2);a(),o("src",(e.selectedPlan==null?null:e.selectedPlan.primaryImageUrl)||(e.selectedPlan==null||e.selectedPlan.imageUrls==null?null:e.selectedPlan.imageUrls[0])||"assets/diet/snack.avif",u),a(5),p(e.selectedPlan==null?null:e.selectedPlan.snacksDetails)}}function G(d,r){if(d&1&&(i(0,"div",38),x(1,"img",39),i(2,"div")(3,"div",30),l(4,"Dinner"),t(),i(5,"p",40),l(6),t()()()),d&2){let e=s(2);a(),o("src",(e.selectedPlan==null?null:e.selectedPlan.primaryImageUrl)||(e.selectedPlan==null||e.selectedPlan.imageUrls==null?null:e.selectedPlan.imageUrls[0])||"assets/diet/snack.avif",u),a(5),p(e.selectedPlan==null?null:e.selectedPlan.dinnerDetails)}}function J(d,r){if(d&1&&(i(0,"div",37)(1,"div",38),x(2,"img",39),i(3,"div")(4,"div",30),l(5,"Breakfast"),t(),i(6,"p",40),l(7),t()()(),i(8,"div",38),x(9,"img",39),i(10,"div")(11,"div",30),l(12,"Lunch"),t(),i(13,"p",40),l(14),t()()(),P(15,q,7,2,"div",41)(16,G,7,2,"div",41),t()),d&2){let e=s();a(2),o("src",(e.selectedPlan==null?null:e.selectedPlan.primaryImageUrl)||(e.selectedPlan==null||e.selectedPlan.imageUrls==null?null:e.selectedPlan.imageUrls[0])||"assets/diet/breakfast.avif",u),a(5),p(e.selectedPlan==null?null:e.selectedPlan.breakfastDetails),a(2),o("src",(e.selectedPlan==null?null:e.selectedPlan.primaryImageUrl)||(e.selectedPlan==null||e.selectedPlan.imageUrls==null?null:e.selectedPlan.imageUrls[0])||"assets/diet/lunch.avif",u),a(5),p(e.selectedPlan==null?null:e.selectedPlan.lunchDetails),a(),o("ngIf",e.selectedPlan==null?null:e.selectedPlan.snacksDetails),a(),o("ngIf",e.selectedPlan==null?null:e.selectedPlan.dinnerDetails)}}function K(d,r){if(d&1&&(i(0,"div",35),l(1),D(2,"date"),t()),d&2){let e=s();a(),c(" Added: ",I(2,1,e.selectedPlan==null?null:e.selectedPlan.addedDate,"mediumDate")," ")}}var j=class d{constructor(r){this.http=r}weekDays=[];dietPlans=[];selectedPlan;loading=!1;error=null;API_URLs=`${A}${F.DIET_DASHBOARD}?id=1073741824&username=string&password=string&authorities=%5B%7B%22authority%22%3A%22string%22%7D%5D&userType=string&enabled=true&accountNonExpired=true&accountNonLocked=true&credentialsNonExpired=true`;ngOnInit(){this.generateWeek(),this.fetchDietPlans()}generateWeek(){let r=new Date,e=r.getDay(),n=new Date(r),m=e===0?-6:1-e;n.setDate(r.getDate()+m);let g=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];this.weekDays=[];for(let _=0;_<7;_++){let f=new Date(n);f.setDate(n.getDate()+_),this.weekDays.push({date:f.getDate(),name:g[f.getDay()],isToday:f.toDateString()===new Date().toDateString()})}}fetchDietPlans(){this.loading=!0,this.error=null;let r=localStorage.getItem("authToken")||sessionStorage.getItem("authToken")||null,e={};r&&(e={headers:new z({Authorization:`Bearer ${r}`,Accept:"application/json"})}),this.http.get(this.API_URLs,e).subscribe({next:n=>{this.dietPlans=Array.isArray(n?.dietPlans)?n.dietPlans:[];let m=this.dietPlans.find(g=>g.active===!0);this.selectedPlan=m??(this.dietPlans.length?this.dietPlans[0]:void 0),this.loading=!1},error:n=>{console.error("Failed to load diet plans",n),this.error="Failed to load diet plans. Please try again later.",this.loading=!1}})}selectDay(r){this.weekDays.forEach(e=>e.isToday=!1),r.isToday=!0}selectPlan(r){this.selectedPlan=r}trackByDay(r,e){return`${e.name}-${e.date}`}static \u0275fac=function(e){return new(e||d)(O(U))};static \u0275cmp=M({type:d,selectors:[["app-diet-dashboard"]],decls:42,vars:15,consts:[[1,"plancls"],[1,"diet-plan-container"],[1,"row"],[1,"col-md-8","col-12"],[1,"calendar-container","d-flex","gap-3","p-3","rounded","shadow-sm"],["class","calendar-day text-center px-3 py-2 rounded","style","cursor:pointer;",3,"active","click",4,"ngFor","ngForOf","ngForTrackBy"],["class","mt-3",4,"ngIf"],["class","mt-3 text-danger",4,"ngIf"],["class","mt-3 d-flex gap-2 flex-wrap",4,"ngIf"],["class","row mt-3 g-3",4,"ngIf"],["class","total-kcal mt-3",4,"ngIf"],["class","meals mt-3",4,"ngIf"],[1,"col-md-4","col-12"],[1,"profile-card","shadow-sm"],[1,"text-center","p-3"],[1,"profile-img",2,"width","120px","height","120px","border-radius","50%","object-fit","cover",3,"src"],[1,"profile-info","p-3"],[1,"text-muted"],["class","small text-muted",4,"ngIf"],[1,"calendar-day","text-center","px-3","py-2","rounded",2,"cursor","pointer",3,"click"],[1,"date"],[1,"mt-3"],[1,"mt-3","text-danger"],[1,"mt-3","d-flex","gap-2","flex-wrap"],["class","btn btn-outline-secondary",3,"active","click",4,"ngFor","ngForOf"],[1,"btn","btn-outline-secondary",3,"click"],[1,"row","mt-3","g-3"],[1,"col-12","col-md-4"],[1,"stat-card","p-3"],[1,"d-flex","justify-content-between"],[1,"fw-semibold"],[1,"mt-2","small","text-muted"],[1,"col-6","col-md-4"],[1,"stat-card","text-center","p-3"],[1,"fw-semibold","mt-2"],[1,"small","text-muted"],[1,"total-kcal","mt-3"],[1,"meals","mt-3"],[1,"meal-card","d-flex","gap-3","mb-3"],[2,"width","96px","height","96px","border-radius","8px","object-fit","cover",3,"src"],[1,"mb-0"],["class","meal-card d-flex gap-3 mb-3",4,"ngIf"]],template:function(e,n){e&1&&(i(0,"div",0)(1,"h5"),l(2,"Diet Plan"),t()(),i(3,"div",1)(4,"div",2)(5,"div",3)(6,"div",4),P(7,$,5,4,"div",5),t(),P(8,H,2,0,"div",6)(9,L,2,1,"div",7)(10,V,2,1,"div",8)(11,W,23,6,"div",9)(12,Y,5,1,"div",10)(13,J,17,6,"div",11),t(),i(14,"div",12)(15,"div",13)(16,"div",14),x(17,"img",15),t(),i(18,"div",16)(19,"div")(20,"span",17),l(21,"Title:"),t(),l(22),t(),i(23,"div")(24,"span",17),l(25,"Category:"),t(),l(26),t(),i(27,"div")(28,"span",17),l(29,"Duration:"),t(),l(30),t(),i(31,"div")(32,"span",17),l(33,"Calories/day:"),t(),l(34),t(),i(35,"div")(36,"span",17),l(37,"Added By:"),t(),l(38),t(),P(39,K,3,4,"div",18),t()()()()(),x(40,"app-footer")(41,"app-mobile-footer-nav")),e&2&&(a(7),o("ngForOf",n.weekDays)("ngForTrackBy",n.trackByDay),a(),o("ngIf",n.loading),a(),o("ngIf",n.error),a(),o("ngIf",n.dietPlans.length>1),a(),o("ngIf",n.selectedPlan),a(),o("ngIf",n.selectedPlan),a(),o("ngIf",n.selectedPlan),a(4),o("src",(n.selectedPlan==null?null:n.selectedPlan.primaryImageUrl)||(n.selectedPlan==null||n.selectedPlan.imageUrls==null?null:n.selectedPlan.imageUrls[0])||"assets/diet/profileImage.avif",u),a(5),c(" ",n.selectedPlan==null?null:n.selectedPlan.title),a(4),c(" ",n.selectedPlan==null?null:n.selectedPlan.category),a(4),c(" ",n.selectedPlan==null?null:n.selectedPlan.durationDays," days"),a(4),c(" ",n.selectedPlan==null?null:n.selectedPlan.caloriesPerDay," kcal"),a(4),c(" ",n.selectedPlan==null?null:n.selectedPlan.addedByAdminName),a(),o("ngIf",n.selectedPlan==null?null:n.selectedPlan.addedDate))},dependencies:[S,k,B,N,E,T],styles:["[_ngcontent-%COMP%]:root{--container-padding: 1.3rem;--card-bg: #fff;--card-border: 1px solid #eee;--accent: #db9280;--text-muted: #666;--max-width-desktop: 1100px}.diet-plan-container[_ngcontent-%COMP%]{padding:var(--container-padding);margin:0 auto;box-sizing:border-box;width:100%;max-width:var(--max-width-desktop)}.plancls[_ngcontent-%COMP%]{width:100%;max-width:735px;margin:-36px auto 1rem;text-align:center;font-size:20px;font-weight:600;line-height:1;box-sizing:border-box;padding:0 .5rem}.calendar-container[_ngcontent-%COMP%]{background:var(--card-bg);border-radius:12px;border:var(--card-border);overflow-x:auto;padding:.5rem;display:flex;align-items:center}.calendar-container[_ngcontent-%COMP%] > .calendar-day[_ngcontent-%COMP%], .calendar-day[_ngcontent-%COMP%]{cursor:pointer;min-width:72px;display:inline-flex;flex-direction:column;align-items:center;justify-content:center;padding:.5rem;margin-right:.5rem;color:#444;font-size:14px;border-radius:8px;transition:background .18s,color .18s,transform .12s;box-sizing:border-box}.calendar-day[_ngcontent-%COMP%]:hover{transform:translateY(-2px);background:#f5f5f5}.calendar-day[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]{font-weight:600;font-size:16px}.calendar-day.active[_ngcontent-%COMP%]{background:var(--accent);color:#fff}.stat-card[_ngcontent-%COMP%]{background:var(--card-bg);border-radius:12px;padding:8px;border:var(--card-border);box-shadow:0 2px 6px #0000000a;box-sizing:border-box}.total-kcal[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;font-weight:600;font-size:14px;margin-top:8px;color:#333}.meals[_ngcontent-%COMP%]   .meal-card[_ngcontent-%COMP%]{display:flex;gap:12px;align-items:center;background:var(--card-bg);border-radius:12px;padding:10px;margin-bottom:12px;border:var(--card-border);box-shadow:0 2px 6px #0000000a;box-sizing:border-box}.meals[_ngcontent-%COMP%]   .meal-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:96px;height:96px;border-radius:8px;object-fit:cover;flex:0 0 96px}@media (max-width: 420px){.meals[_ngcontent-%COMP%]   .meal-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:72px;height:72px;flex:0 0 72px}.calendar-day[_ngcontent-%COMP%]{min-width:64px;padding:.45rem;font-size:13px}}.profile-card[_ngcontent-%COMP%]{background:var(--card-bg);border-radius:12px;overflow:hidden;border:var(--card-border);box-sizing:border-box}.profile-card[_ngcontent-%COMP%]   .profile-img[_ngcontent-%COMP%]{width:120px;height:120px;border-radius:50%;object-fit:cover;display:block;margin:0 auto}.profile-info[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:8px 0;font-size:14px;border-bottom:1px solid #f0f0f0}.profile-info[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:last-child{border-bottom:none}.profile-info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:first-child{color:var(--text-muted)}.meal-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:2px 0 0;color:#555;font-size:13px}.stat-card[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{height:28px}.total-kcal[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:first-child{margin-right:6px}@media (max-width: 767.98px){.diet-plan-container[_ngcontent-%COMP%]{padding:1rem}.plancls[_ngcontent-%COMP%]{margin-top:-10px;font-size:18px}.calendar-container[_ngcontent-%COMP%]{padding:.4rem}.calendar-day[_ngcontent-%COMP%]{min-width:64px;padding:.4rem;font-size:13px}.meals[_ngcontent-%COMP%]   .meal-card[_ngcontent-%COMP%]{padding:8px;gap:10px}.meals[_ngcontent-%COMP%]   .meal-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:72px;height:72px}.profile-card[_ngcontent-%COMP%]   .profile-img[_ngcontent-%COMP%]{width:100px;height:100px}.stat-card[_ngcontent-%COMP%]{padding:6px}.total-kcal[_ngcontent-%COMP%]{font-size:13px}}@media (min-width: 768px) and (max-width: 991.98px){[_ngcontent-%COMP%]:root{--max-width-desktop: 980px}.calendar-day[_ngcontent-%COMP%]{min-width:68px}.meals[_ngcontent-%COMP%]   .meal-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:80px;height:80px}.profile-card[_ngcontent-%COMP%]   .profile-img[_ngcontent-%COMP%]{width:110px;height:110px}}@media (min-width: 992px) and (max-width: 1199.98px){[_ngcontent-%COMP%]:root{--max-width-desktop: 1100px}.calendar-day[_ngcontent-%COMP%]{min-width:72px}}@media (min-width: 1200px) and (max-width: 1919.98px){[_ngcontent-%COMP%]:root{--max-width-desktop: 1350px}.plancls[_ngcontent-%COMP%]{max-width:900px}.meals[_ngcontent-%COMP%]   .meal-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:96px;height:96px}.profile-card[_ngcontent-%COMP%]   .profile-img[_ngcontent-%COMP%]{width:120px;height:120px}}@media (min-width: 1920px) and (max-width: 3839.98px){[_ngcontent-%COMP%]:root{--max-width-desktop: 1600px}.plancls[_ngcontent-%COMP%]{font-size:22px;max-width:1100px}.calendar-day[_ngcontent-%COMP%]{min-width:86px;padding:.7rem;font-size:15px}.meals[_ngcontent-%COMP%]   .meal-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:120px;height:120px}.profile-card[_ngcontent-%COMP%]   .profile-img[_ngcontent-%COMP%]{width:140px;height:140px}}@media (min-width: 3840px){[_ngcontent-%COMP%]:root{--max-width-desktop: 2200px}.plancls[_ngcontent-%COMP%]{font-size:24px}.calendar-day[_ngcontent-%COMP%]{min-width:110px;padding:.9rem;font-size:18px}.meals[_ngcontent-%COMP%]   .meal-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:160px;height:160px}.profile-card[_ngcontent-%COMP%]   .profile-img[_ngcontent-%COMP%]{width:180px;height:180px}}.calendar-day[_ngcontent-%COMP%]:focus, .calendar-day[_ngcontent-%COMP%]:focus-visible{outline:3px solid rgba(219,146,128,.25);outline-offset:2px}td[_ngcontent-%COMP%]{background:#fff!important}.profile-info[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:last-child, .meals[_ngcontent-%COMP%]   .meal-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{max-width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;display:inline-block;vertical-align:middle}"]})};export{j as DietDashboard};
