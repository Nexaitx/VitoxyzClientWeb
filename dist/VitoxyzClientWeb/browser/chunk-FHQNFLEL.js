import{a as G}from"./chunk-A63XMVLO.js";import{b as X}from"./chunk-WOJRJ4NL.js";import{a as Y}from"./chunk-QG4OT5A4.js";import{a as V,b as k}from"./chunk-OTHMNLYJ.js";import{a as j}from"./chunk-CLG2LXF4.js";import{J as $,N as H,V as W,W as D,X as R,ca as q}from"./chunk-MFYBXPGH.js";import{a as Q}from"./chunk-DHDG4QUY.js";import{h as N,i as U,p as A,w as L}from"./chunk-QI76QBAE.js";import{$a as C,Gc as B,Lb as l,Mb as t,Nb as i,Ob as v,Sb as w,Tb as S,Vb as h,_a as y,_b as x,ac as s,cb as r,ga as M,kc as z,lc as b,ma as g,mc as E,na as u,ob as F,oc as a,pc as m,qc as f,rc as I,tb as _,tc as O,uc as T,vc as P}from"./chunk-VVX2ZSCF.js";function K(n,c){if(n&1){let e=h();t(0,"img",28),x("click",function(){let d=g(e).$implicit,p=s(3);return u(p.selectedImage=d)}),i()}if(n&2){let e=c.$implicit;l("src",e,C)}}function Z(n,c){if(n&1&&(t(0,"div",24)(1,"div",25),_(2,K,1,1,"img",26),i(),t(3,"div"),v(4,"img",27),i()()),n&2){let e=s(2);r(2),l("ngForOf",e.medicine.images),r(2),l("src",e.selectedImage,C)}}function ee(n,c){if(n&1&&(t(0,"div",37),v(1,"img",38),i()),n&2){let e=c.$implicit;r(),l("src",e,C)}}function te(n,c){if(n&1){let e=h();t(0,"span",39),x("click",function(){let d=g(e).index,p=s(3);return u(p.goToSlide(d))}),i()}if(n&2){let e=c.index,o=s(3);E("active",e===o.currentIndex)}}function ie(n,c){if(n&1){let e=h();t(0,"div",29)(1,"div",30)(2,"div",31),_(3,ee,2,1,"div",32),i(),t(4,"button",33),x("click",function(){g(e);let d=s(2);return u(d.prevSlide())}),a(5,"\u2039"),i(),t(6,"button",34),x("click",function(){g(e);let d=s(2);return u(d.nextSlide())}),a(7,"\u203A"),i()(),t(8,"div",35),_(9,te,1,2,"span",36),i()()}if(n&2){let e=s(2);r(2),b("transform","translateX(-"+e.currentIndex*100+"%)"),r(),l("ngForOf",e.medicine.images),r(6),l("ngForOf",e.medicine.images)}}function ne(n,c){if(n&1&&(t(0,"li"),a(1),i()),n&2){let e=c.$implicit;r(),m(e)}}function re(n,c){if(n&1&&(t(0,"span",40),a(1),i()),n&2){let e=s(2);r(),f("",e.medicine.discount,"% off")}}function oe(n,c){if(n&1&&(t(0,"option",41),a(1),i()),n&2){let e=c.$implicit;l("value",e),r(),m(e)}}function ce(n,c){if(n&1){let e=h();w(0),t(1,"div",2)(2,"div",3),_(3,Z,5,2,"div",4)(4,ie,10,4,"div",5),t(5,"div",6)(6,"h3"),a(7),i(),t(8,"p",7),a(9),i(),t(10,"div",8)(11,"span",9),a(12),i(),t(13,"small"),a(14),i()(),t(15,"h5"),a(16,"Product highlights"),i(),t(17,"ul"),_(18,ne,2,1,"li",10),i(),t(19,"div",11)(20,"h4",12),a(21),t(22,"small",13),a(23),i(),_(24,re,2,1,"span",14),i()(),t(25,"div",15)(26,"label"),a(27,"Qty:"),i(),t(28,"select",16),P("ngModelChange",function(d){g(e);let p=s();return T(p.selectedQty,d)||(p.selectedQty=d),u(d)}),_(29,oe,2,2,"option",17),i()(),t(30,"button",18),x("click",function(){g(e);let d=s();return u(d.addToCart())}),a(31,"Add to cart"),i(),t(32,"div",19)(33,"strong"),a(34),i()()()(),t(35,"div",20)(36,"p",21),a(37),i(),t(38,"p",22),a(39),i(),t(40,"p",22),a(41,"How to use:"),i(),t(42,"p",21),a(43),i(),t(44,"p",22),a(45,"Safety Advice:"),i(),v(46,"p",23),t(47,"p",22),a(48,"Common Side Effects:"),i(),t(49,"p",21),a(50),i(),t(51,"p",22),a(52,"Storage:"),i(),t(53,"p",21),a(54),i()()(),S()}if(n&2){let e=s();r(3),l("ngIf",!e.isMobile),r(),l("ngIf",e.isMobile),r(3),m(e.medicine.name),r(2),m(e.medicine.manufacturer),r(3),f("",e.medicine.rating,"\u2605"),r(2),I("",e.medicine.reviewsCount," Ratings & ",e.medicine.reviewTextCount," Reviews"),r(4),l("ngForOf",e.medicine.highlights),r(3),f(" \u20B9",e.medicine.price," "),r(2),f("\u20B9",e.medicine.mrp),r(),l("ngIf",e.medicine.discount),r(4),O("ngModel",e.selectedQty),r(),l("ngForOf",e.medicine.packSizes),r(5),f("Get by ",e.medicine.deliveryTime),r(3),m(e.medicine.introduction),r(2),m(e.medicine.description),r(4),m(e.medicine.howToUse),r(3),l("innerHTML",e.medicine.safetyAdvise,y),r(4),m(e.medicine.commonSideEffect),r(4),m(e.medicine.storage)}}function ae(n,c){if(n&1){let e=h();t(0,"img",28),x("click",function(){let d=g(e).$implicit,p=s(3);return u(p.selectedImage=d)}),i()}if(n&2){let e=c.$implicit;l("src",e,C)}}function de(n,c){if(n&1&&(t(0,"div",24)(1,"div",25),_(2,ae,1,1,"img",26),i(),t(3,"div"),v(4,"img",27),i()()),n&2){let e=s(2);r(2),l("ngForOf",e.product.images),r(2),l("src",e.selectedImage,C)}}function le(n,c){if(n&1&&(t(0,"div",37),v(1,"img",38),i()),n&2){let e=c.$implicit;r(),l("src",e,C)}}function se(n,c){if(n&1){let e=h();t(0,"span",39),x("click",function(){let d=g(e).index,p=s(3);return u(p.goToSlide(d))}),i()}if(n&2){let e=c.index,o=s(3);E("active",e===o.currentIndex)}}function me(n,c){if(n&1){let e=h();t(0,"div",29)(1,"div",30)(2,"div",31),_(3,le,2,1,"div",32),i(),t(4,"button",33),x("click",function(){g(e);let d=s(2);return u(d.prevSlide())}),a(5,"\u2039"),i(),t(6,"button",34),x("click",function(){g(e);let d=s(2);return u(d.nextSlide())}),a(7,"\u203A"),i()(),t(8,"div",35),_(9,se,1,2,"span",36),i()()}if(n&2){let e=s(2);r(2),b("transform","translateX(-"+e.currentIndex*100+"%)"),r(),l("ngForOf",e.product.images),r(6),l("ngForOf",e.product.images)}}function pe(n,c){if(n&1&&(t(0,"li"),a(1),i()),n&2){let e=c.$implicit;r(),m(e)}}function _e(n,c){if(n&1&&(t(0,"span",40),a(1),i()),n&2){let e=s(2);r(),f("",e.product.discount,"% off")}}function ge(n,c){if(n&1&&(t(0,"option",41),a(1),i()),n&2){let e=c.$implicit;l("value",e),r(),m(e)}}function ue(n,c){if(n&1){let e=h();w(0),t(1,"div",2)(2,"div",3),_(3,de,5,2,"div",4)(4,me,10,4,"div",5),t(5,"div",6)(6,"h3"),a(7),i(),t(8,"p",7),a(9),i(),t(10,"div",8)(11,"span",9),a(12),i(),t(13,"small"),a(14),i()(),t(15,"h5"),a(16,"Product highlights"),i(),t(17,"ul"),_(18,pe,2,1,"li",10),i(),t(19,"div",11)(20,"h4",12),a(21),t(22,"small",13),a(23),i(),_(24,_e,2,1,"span",14),i()(),t(25,"div",15)(26,"label"),a(27,"Qty:"),i(),t(28,"select",16),P("ngModelChange",function(d){g(e);let p=s();return T(p.selectedQty,d)||(p.selectedQty=d),u(d)}),_(29,ge,2,2,"option",17),i()(),t(30,"button",42),x("click",function(){g(e);let d=s();return u(d.addToCartOtc())}),a(31,"Add to cart"),i(),t(32,"div",19)(33,"strong"),a(34),i()()()(),t(35,"div",20)(36,"p",21),a(37),i(),t(38,"p",22),a(39),i(),t(40,"p",22),a(41,"How to use:"),i(),t(42,"p",21),a(43),i(),t(44,"p",22),a(45,"Safety Advice:"),i(),v(46,"p",23),t(47,"p",22),a(48,"Common Side Effects:"),i(),t(49,"p",21),a(50),i(),t(51,"p",22),a(52,"Storage:"),i(),t(53,"p",21),a(54),i()()(),S()}if(n&2){let e=s();r(3),l("ngIf",!e.isMobile),r(),l("ngIf",e.isMobile),r(3),m(e.product.name),r(2),m(e.product.manufacturer),r(3),f("",e.product.rating,"\u2605"),r(2),I("",e.product.reviewsCount," Ratings & ",e.product.reviewTextCount," Reviews"),r(4),l("ngForOf",e.product.highlights),r(3),f(" \u20B9",e.product.price," "),r(2),f("\u20B9",e.product.mrp),r(),l("ngIf",e.product.discount),r(4),O("ngModel",e.selectedQty),r(),l("ngForOf",e.product.packSizes),r(5),f("Get by ",e.product.deliveryTime),r(3),m(e.product.introduction),r(2),m(e.product.description),r(4),m(e.product.howToUse),r(3),l("innerHTML",e.product.safetyAdvise,y),r(4),m(e.product.commonSideEffect),r(4),m(e.product.storage)}}function xe(n,c){n&1&&(t(0,"p"),a(1,"Loading medicine details\u2026"),i())}function fe(n,c){n&1&&(t(0,"p"),a(1,"Could not load medicine details."),i())}function ve(n,c){if(n&1&&_(0,xe,2,0,"p",43)(1,fe,2,0,"p",43),n&2){let e=s();l("ngIf",!e.isLoaded),r(),l("ngIf",e.isLoaded&&e.hasError)}}var J=class n{http=M(L);cartService=M(X);route=M(Q);medicine;product;selectedImage;selectedQty;medicineType=null;isLoaded=!1;hasError=!1;currentIndex=0;isMobile=!1;ngOnInit(){this.checkScreenWidth();let c=this.route.snapshot.paramMap.get("id");this.medicineType=this.route.snapshot.queryParamMap.get("type"),c?this.medicineType==="otc"?this.getOTCMedicineById(c):this.getMedicineById(c):this.hasError=!0}checkScreenWidth(){this.isMobile=window.innerWidth<=768,window.addEventListener("resize",()=>{this.isMobile=window.innerWidth<=768})}nextSlide(){if(!this.medicine&&!this.product)return;let c=this.medicine?this.medicine.images.length:this.product.images.length;this.currentIndex=(this.currentIndex+1)%c}prevSlide(){if(!this.medicine&&!this.product)return;let c=this.medicine?this.medicine.images.length:this.product.images.length;this.currentIndex=(this.currentIndex-1+c)%c}goToSlide(c){this.currentIndex=c,console.log("current index:",this.currentIndex),this.medicineType==="health"&&this.medicine?.images?.length?(this.selectedImage=this.medicine.images[c],console.log("selected image:",this.selectedImage)):this.medicineType==="otc"&&this.product?.images?.length&&(this.selectedImage=this.product.images[c],console.log("selected image:",this.selectedImage))}getMedicineById(c){this.http.get(`${V}${k.MEDICINE_BY_ID(c)}`).subscribe({next:e=>{if(e?.status&&e.data){let o=e.data,d=o.imageUrls?.[0]?.split("|").map(p=>p.trim())||[];this.medicine={id:o.productId,name:o.productName,manufacturer:o.marketer,rating:4.5,reviewsCount:0,reviewTextCount:0,highlights:[o.primaryUse,o.saltComposition,o.productForm,o.medicineType].filter(Boolean),price:o.mrp,mrp:o.mrp,discount:0,packSizes:[o.packagingDetail||"1 Pack"],images:d,deliveryTime:"2 days delivery",description:o.description,introduction:o.introduction,howToUse:o.howToUse,safetyAdvise:o.safetyAdvise,commonSideEffect:o.commonSideEffect,storage:o.storage},this.selectedImage=d[0]||"",this.selectedQty=this.medicine.packSizes[0],this.isLoaded=!0}else this.hasError=!0},error:()=>{this.hasError=!0}})}getOTCMedicineById(c){this.http.get(`${V}${k.OTC_MEDICINE_BY_ID(c)}`).subscribe({next:e=>{if(e?.status&&e.data){let o=e.data,d=o.imageUrls?.[0]?.split("|").map(p=>p.trim())||[];this.product={id:o.id,name:o.name,manufacturer:o.manufacturers,rating:4.2,reviewsCount:0,reviewTextCount:0,highlights:[o.productHighlights,o.productForm,o.type].filter(Boolean),price:o.mrp,mrp:o.mrp,discount:0,packSizes:[o.packageInfo||"1 Pack"],images:d,deliveryTime:"3 days delivery",description:o.information,introduction:o.information,howToUse:o.directionsForUse,safetyAdvise:o.safetyInformation,commonSideEffect:"",storage:""},this.selectedImage=d[0]||"",this.selectedQty=this.product.packSizes[0],this.isLoaded=!0}else this.hasError=!0},error:()=>{this.hasError=!0}})}addToCart(){if(!this.medicine)return;let c={medicineId:this.medicine.id,quantity:Number(this.selectedQty)||1,productType:"health"};this.cartService.addItem(c).subscribe({next:()=>alert(`${this.medicine.name} added to cart!`),error:()=>alert("Failed to add item to cart. Try again.")})}addToCartOtc(){if(!this.product)return;let c={medicineId:this.product.id,quantity:Number(this.selectedQty)||1,productType:"otc"};this.cartService.addItem(c).subscribe({next:()=>alert(`${this.product.name} added to cart!`),error:()=>alert("Failed to add item to cart. Try again.")})}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=F({type:n,selectors:[["app-view-medicine"]],decls:7,vars:4,consts:[["loadingOrError",""],[4,"ngIf","ngIfElse"],[1,"container","mt-4","product-detail"],[1,"row"],["class","col-md-6 d-flex",4,"ngIf"],["class","mobile-carousel",4,"ngIf"],[1,"col","mt-3"],[1,"manufacturer"],[1,"rating","mb-2"],[1,"badge","bg-warning","text-dark"],[4,"ngFor","ngForOf"],[1,"price-box","my-2","mt-3"],[1,"text-primary"],[1,"text-muted"],["class","text-success",4,"ngIf"],[1,"quantity","mb-3"],[1,"form-select","w-auto","d-inline-block","ms-2",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"btn","btn-primary","btn-lg","mb-3","mt-3",3,"click"],[1,"delivery","mt-3"],[1,"description","my-4"],[1,"mb-1"],[1,"headings","mb-1"],[1,"mb-1",3,"innerHTML"],[1,"col-md-6","d-flex"],[1,"d-flex","flex-column","me-3"],["class","thumb-img mb-2",3,"src","click",4,"ngFor","ngForOf"],[1,"main-img",3,"src"],[1,"thumb-img","mb-2",3,"click","src"],[1,"mobile-carousel"],[1,"carousel-wrapper"],[1,"carousel-track"],["class","carousel-item",4,"ngFor","ngForOf"],[1,"nav","prev",3,"click"],[1,"nav","next",3,"click"],[1,"dots"],[3,"active","click",4,"ngFor","ngForOf"],[1,"carousel-item"],[1,"main-img-mobile",3,"src"],[3,"click"],[1,"text-success"],[3,"value"],[1,"btn","btnCls","btn-lg","mt-3",3,"click"],[4,"ngIf"]],template:function(e,o){if(e&1&&(v(0,"app-header"),_(1,ce,55,20,"ng-container",1)(2,ue,55,20,"ng-container",1)(3,ve,2,2,"ng-template",null,0,B),v(5,"app-footer")(6,"app-mobile-footer-nav")),e&2){let d=z(4);r(),l("ngIf",o.medicineType==="health"&&o.isLoaded&&!o.hasError)("ngIfElse",d),r(),l("ngIf",o.medicineType==="otc"&&o.isLoaded&&!o.hasError)("ngIfElse",d)}},dependencies:[A,N,U,q,D,R,W,$,H,j,G,Y],styles:[".headings[_ngcontent-%COMP%]{font-weight:500!important}li[_ngcontent-%COMP%], span[_ngcontent-%COMP%], .description[_ngcontent-%COMP%]{font-weight:400;font-size:12px}.product-detail[_ngcontent-%COMP%]   .thumb-img[_ngcontent-%COMP%]{width:60px;height:60px;margin-bottom:8px;border:1px solid #ddd;cursor:pointer}.product-detail[_ngcontent-%COMP%]   .main-img[_ngcontent-%COMP%]{width:100%;height:400px;object-fit:contain;border:1px solid #ddd;border-radius:4px}.product-detail[_ngcontent-%COMP%]   .rating[_ngcontent-%COMP%]{margin:8px 0}.product-detail[_ngcontent-%COMP%]   .rating[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{font-size:14px;margin-right:8px}.product-detail[_ngcontent-%COMP%]   .price-box[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-weight:600}.product-detail[_ngcontent-%COMP%]   .price-box[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{text-decoration:line-through}.product-detail[_ngcontent-%COMP%]   .quantity[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{margin-left:6px}.product-detail[_ngcontent-%COMP%]   .delivery[_ngcontent-%COMP%]{font-size:14px;color:#007bff}.product-detail[_ngcontent-%COMP%]   .btnCls[_ngcontent-%COMP%], .product-detail[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{border:1px solid #0BBBC1;background-color:#0bbbc1;color:#fff}.product-detail[_ngcontent-%COMP%]   .btnCls[_ngcontent-%COMP%]:hover, .product-detail[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:hover{background-color:#30c5ca;border-color:#23c2c7}@media (max-width: 768px){.col-md-6.d-flex[_ngcontent-%COMP%]{display:none}.mobile-carousel[_ngcontent-%COMP%]{width:100%}.mobile-carousel[_ngcontent-%COMP%]   .carousel-wrapper[_ngcontent-%COMP%]{overflow:hidden;position:relative}.mobile-carousel[_ngcontent-%COMP%]   .carousel-track[_ngcontent-%COMP%]{display:flex;transition:transform .3s ease-in-out}.mobile-carousel[_ngcontent-%COMP%]   .carousel-item[_ngcontent-%COMP%]{min-width:100%;display:flex;justify-content:center}.mobile-carousel[_ngcontent-%COMP%]   .main-img-mobile[_ngcontent-%COMP%]{width:100%;max-width:300px;height:auto;object-fit:contain;border:1px solid #ddd;border-radius:4px}.mobile-carousel[_ngcontent-%COMP%]   .dots[_ngcontent-%COMP%]{text-align:center;margin-top:8px}.mobile-carousel[_ngcontent-%COMP%]   .dots[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-block;width:8px;height:8px;border-radius:50%;background:#ccc;margin:0 4px;cursor:pointer}.mobile-carousel[_ngcontent-%COMP%]   .dots[_ngcontent-%COMP%]   span.active[_ngcontent-%COMP%]{background:#0bbbc1}.mobile-carousel[_ngcontent-%COMP%]   .nav[_ngcontent-%COMP%]{position:absolute;top:50%;transform:translateY(-50%);background:#ffffffb3;border:none;font-size:24px;padding:4px 8px;cursor:pointer}.mobile-carousel[_ngcontent-%COMP%]   .nav.prev[_ngcontent-%COMP%]{left:0}.mobile-carousel[_ngcontent-%COMP%]   .nav.next[_ngcontent-%COMP%]{right:0}}"]})};export{J as a};
