import{a as me}from"./chunk-2JACWAI2.js";import{a as re,b as ae}from"./chunk-36DQLWB3.js";import{a as le,b as se}from"./chunk-SR47S64Y.js";import{h as Y}from"./chunk-CYZ2KIHM.js";import"./chunk-OILII4TH.js";import"./chunk-A5OEVRVS.js";import{b as Z,c as $,d as ee,g as te,h as ie,k as oe,l as ne}from"./chunk-B7QQOXHP.js";import"./chunk-ZYRUWKS6.js";import{b as x,c as B}from"./chunk-TVU2BKOJ.js";import"./chunk-2NAO3EIO.js";import{k as O,m as N,n as W}from"./chunk-IZKFKTYO.js";import{c as E,e as I,g as T,h as q}from"./chunk-OM6CVLGN.js";import"./chunk-3FIC4GM2.js";import{B as K,C as Q,D as X,b as R,d as M,g as V,h as D,l as G,m as H,o as j,r as A,x as U,y as z,z as J}from"./chunk-7H6Y33SG.js";import{$ as u,Fb as _,Fc as k,Hc as P,Sa as r,Ub as n,Vb as C,Wb as S,Xa as w,Xb as g,Yb as c,Zb as f,bc as h,cb as F,gb as b,qb as L,wb as l,xb as i,yb as o,zb as y}from"./chunk-RMNDDDX3.js";var v=()=>({standalone:!0});function pe(s,m){s&1&&(i(0,"mat-error"),n(1," Phone number is required. "),o())}function ue(s,m){s&1&&(i(0,"mat-error"),n(1," Password is required. "),o())}var de=class s{constructor(m){this.fb=m}http=u(E);router=u(x);snackBar=u(le);loginForm;hide=!0;isLoading=!1;authMethod="password";usePassword=!0;useOtp=!1;rememberMe=!0;ngOnInit(){this.loginForm=this.fb.group({username:["",M.required],password:["",[M.required,M.minLength(6)]]})}login(){if(this.loginForm.invalid){this.loginForm.markAllAsTouched(),this.snackBar.open("Please fill in all required fields correctly.","Close",{duration:3e3,panelClass:["error-snackbar"]}),console.log("Form is invalid");return}this.isLoading=!0;let{username:m,password:d}=this.loginForm.value,t=`${me.apiBaseUrl}api/user/loginWithPasswordUser`,a={username:m,password:d};this.http.post(t,a).subscribe({next:e=>{console.log("Login successful",e),this.snackBar.open("Login successful!","Close",{duration:3e3}),this.router.navigate(["/dashboard"]),this.isLoading=!1},error:e=>{console.error("Login failed",e);let p="Login failed. Please try again.";e.error&&typeof e.error=="object"&&e.error.message?p=`Login failed: ${e.error.message}`:typeof e.error=="string"&&e.error.length>0?p=`Login failed: ${e.error}`:e.status===401?p="Invalid credentials. Please check your email and password.":e.status===0&&(p="Could not connect to the server. Please check your internet connection."),this.snackBar.open(p,"Close",{duration:5e3,panelClass:["error-snackbar"]}),this.isLoading=!1}})}static \u0275fac=function(d){return new(d||s)(w(K))};static \u0275cmp=F({type:s,selectors:[["app-login"]],decls:43,vars:18,consts:[[1,"login-screen"],[1,"left-panel"],[1,"overlay-content"],[1,"right-panel"],[1,"form-container"],[1,"brand-title"],[1,"login-form",3,"ngSubmit","formGroup"],[1,"field-label"],["appearance","outline",1,"full-width"],["matPrefix",""],["matInput","","type","tel","placeholder","Enter Phone Number","formControlName","username","required","","pattern","[0-9]*","maxlength","10","inputmode","numeric"],[4,"ngIf"],["matInput","","placeholder","Enter your password","formControlName","password","required","",3,"type"],["mat-icon-button","","matSuffix","",3,"click"],[1,"form-row"],["name","rememberMe","checked","",3,"ngModelChange","ngModel","ngModelOptions"],["routerLink","/forgot-password",1,"forgot-link"],[1,"form-row","checkbox-right"],["name","usePassword","checked","",3,"ngModelChange","ngModel","ngModelOptions"],["name","useOtp",3,"ngModelChange","ngModel","ngModelOptions"],["mat-raised-button","","color","primary","type","submit",3,"disabled"]],template:function(d,t){if(d&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2"),n(4,"Care that connects"),o(),i(5,"p"),n(6,"Instantly connect with nearby nurses and"),o(),i(7,"p"),n(8,"support staff."),o()()(),i(9,"div",3)(10,"div",4)(11,"h1",5),n(12,"Vitoxyz"),o(),i(13,"form",6),_("ngSubmit",function(){return t.login()}),i(14,"label",7),n(15,"Phone Number"),o(),i(16,"mat-form-field",8)(17,"mat-icon",9),n(18,"call"),o(),y(19,"input",10),b(20,pe,2,0,"mat-error",11),o(),i(21,"label",7),n(22,"Password"),o(),i(23,"mat-form-field",8)(24,"mat-icon",9),n(25,"lock"),o(),y(26,"input",12),i(27,"button",13),_("click",function(){return t.hide=!t.hide}),i(28,"mat-icon"),n(29),o()(),b(30,ue,2,0,"mat-error",11),o(),i(31,"div",14)(32,"mat-checkbox",15),f("ngModelChange",function(e){return c(t.rememberMe,e)||(t.rememberMe=e),e}),n(33,"Remember For 30 Days"),o(),i(34,"a",16),n(35,"Forgot Password"),o()(),i(36,"div",17)(37,"mat-checkbox",18),f("ngModelChange",function(e){return c(t.usePassword,e)||(t.usePassword=e),e}),n(38," Password "),o(),i(39,"mat-checkbox",19),f("ngModelChange",function(e){return c(t.useOtp,e)||(t.useOtp=e),e}),n(40," Otp "),o()(),i(41,"button",20),n(42),o()()()()()),d&2){let a,e;r(13),l("formGroup",t.loginForm),r(7),l("ngIf",((a=t.loginForm.get("username"))==null?null:a.invalid)&&((a=t.loginForm.get("username"))==null?null:a.touched)),r(6),l("type",t.hide?"password":"text"),r(),L("aria-label","Hide password")("aria-pressed",t.hide),r(2),C(t.hide?"visibility_off":"visibility"),r(),l("ngIf",((e=t.loginForm.get("password"))==null?null:e.invalid)&&((e=t.loginForm.get("password"))==null?null:e.touched)),r(2),g("ngModel",t.rememberMe),l("ngModelOptions",h(15,v)),r(5),g("ngModel",t.usePassword),l("ngModelOptions",h(16,v)),r(2),g("ngModel",t.useOtp),l("ngModelOptions",h(17,v)),r(2),l("disabled",t.loginForm.invalid||t.isLoading),r(),S(" ",t.isLoading?"Logging in...":"Login"," ")}},dependencies:[P,k,X,H,R,V,D,U,z,J,j,A,Q,G,Y,ne,oe,te,Z,$,ee,W,N,O,q,T,ie,ae,re,B,I,se],encapsulation:2})};export{de as Login};
