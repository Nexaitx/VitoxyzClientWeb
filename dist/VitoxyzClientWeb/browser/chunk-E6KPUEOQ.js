import{a as j,b as G}from"./chunk-JLS76RYN.js";import{a as W}from"./chunk-QJAI4TEK.js";import{e as Q,h as H,p as $,q,r as D,y as R}from"./chunk-NW2L5A5V.js";import{a as T,b as P}from"./chunk-7RHT64GJ.js";import{a as L}from"./chunk-F7NH5DTK.js";import{h as N,i as z,n as A,u as B}from"./chunk-MOXSZ3XB.js";import{Gb as m,Hb as t,Ib as i,Jb as f,Nb as S,Ob as M,Qb as v,Tb as y,Vb as p,Wa as E,Xa as h,Za as r,cb as V,dc as U,ea as C,hc as a,ic as l,jb as k,jc as g,ka as _,kc as I,la as x,lc as w,mc as b,nc as O,ob as u,wc as F}from"./chunk-QPX54FPS.js";function J(o,c){if(o&1){let e=v();t(0,"img",26),y("click",function(){let d=_(e).$implicit,s=p(2);return x(s.selectedImage=d)}),i()}if(o&2){let e=c.$implicit;m("src",e,h)}}function K(o,c){if(o&1&&(t(0,"li"),a(1),i()),o&2){let e=c.$implicit;r(),l(e)}}function X(o,c){if(o&1&&(t(0,"span",27),a(1),i()),o&2){let e=p(2);r(),g("",e.medicine.discount,"% off")}}function Z(o,c){if(o&1&&(t(0,"option",28),a(1),i()),o&2){let e=c.$implicit;m("value",e),r(),l(e)}}function ee(o,c){if(o&1){let e=v();S(0),t(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5),u(5,J,1,1,"img",6),i(),t(6,"div"),f(7,"img",7),i()(),t(8,"div",8)(9,"h3"),a(10),i(),t(11,"p",9),a(12),i(),t(13,"div",10)(14,"span",11),a(15),i(),t(16,"small"),a(17),i()(),t(18,"h5"),a(19,"Product highlights"),i(),t(20,"ul"),u(21,K,2,1,"li",12),i(),t(22,"div",13)(23,"h4",14),a(24),t(25,"small",15),a(26),i(),u(27,X,2,1,"span",16),i()(),t(28,"div",17)(29,"label"),a(30,"Qty:"),i(),t(31,"select",18),O("ngModelChange",function(d){_(e);let s=p();return b(s.selectedQty,d)||(s.selectedQty=d),x(d)}),u(32,Z,2,2,"option",19),i()(),t(33,"button",20),y("click",function(){_(e);let d=p();return x(d.addToCart())}),a(34,"Add to cart"),i(),t(35,"div",21)(36,"strong"),a(37),i()()()(),t(38,"div",22)(39,"p",23),a(40),i(),t(41,"p",24),a(42),i(),t(43,"p",24),a(44,"How to use:"),i(),t(45,"p",23),a(46),i(),t(47,"p",24),a(48,"Safety Advice:"),i(),f(49,"p",25),t(50,"p",24),a(51,"Common Side Effects:"),i(),t(52,"p",23),a(53),i(),t(54,"p",24),a(55,"Storage:"),i(),t(56,"p",23),a(57),i()()(),M()}if(o&2){let e=p();r(5),m("ngForOf",e.medicine.images),r(2),m("src",e.selectedImage,h),r(3),l(e.medicine.name),r(2),l(e.medicine.manufacturer),r(3),g("",e.medicine.rating,"\u2605"),r(2),I("",e.medicine.reviewsCount," Ratings & ",e.medicine.reviewTextCount," Reviews"),r(4),m("ngForOf",e.medicine.highlights),r(3),g(" \u20B9",e.medicine.price," "),r(2),g("\u20B9",e.medicine.mrp),r(),m("ngIf",e.medicine.discount),r(4),w("ngModel",e.selectedQty),r(),m("ngForOf",e.medicine.packSizes),r(5),g("Get by ",e.medicine.deliveryTime),r(3),l(e.medicine.introduction),r(2),l(e.medicine.description),r(4),l(e.medicine.howToUse),r(3),m("innerHTML",e.medicine.safetyAdvise,E),r(4),l(e.medicine.commonSideEffect),r(4),l(e.medicine.storage)}}function te(o,c){if(o&1){let e=v();t(0,"img",26),y("click",function(){let d=_(e).$implicit,s=p(2);return x(s.selectedImage=d)}),i()}if(o&2){let e=c.$implicit;m("src",e,h)}}function ie(o,c){if(o&1&&(t(0,"li"),a(1),i()),o&2){let e=c.$implicit;r(),l(e)}}function ne(o,c){if(o&1&&(t(0,"option",28),a(1),i()),o&2){let e=c.$implicit;m("value",e),r(),l(e)}}function re(o,c){if(o&1){let e=v();S(0),t(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5),u(5,te,1,1,"img",6),i(),t(6,"div"),f(7,"img",7),i()(),t(8,"div",29)(9,"h3"),a(10),i(),t(11,"p",9),a(12),i(),t(13,"div",30)(14,"span",11),a(15),i(),t(16,"small"),a(17),i()(),t(18,"h5",31),a(19,"Product highlights"),i(),t(20,"ul"),u(21,ie,2,1,"li",12),i(),t(22,"div",32)(23,"h4",14),a(24),t(25,"small",15),a(26),i(),t(27,"span",27),a(28),i()()(),t(29,"div",33)(30,"label"),a(31,"Qty:"),i(),t(32,"select",34),O("ngModelChange",function(d){_(e);let s=p();return b(s.selectedQty,d)||(s.selectedQty=d),x(d)}),u(33,ne,2,2,"option",19),i()(),t(34,"button",35),y("click",function(){_(e);let d=p();return x(d.addToCarOtc())}),a(35,"Add to cart"),i(),t(36,"div",21)(37,"strong"),a(38),i()()()(),t(39,"div",22)(40,"p",23),a(41),i(),t(42,"p",24),a(43),i(),t(44,"p",24),a(45,"How to use:"),i(),t(46,"p",23),a(47),i(),t(48,"p",24),a(49,"Safety Advice:"),i(),f(50,"p",25),t(51,"p",24),a(52,"Common Side Effects:"),i(),t(53,"p",23),a(54),i(),t(55,"p",24),a(56,"Storage:"),i(),t(57,"p",23),a(58),i()()(),M()}if(o&2){let e=p();r(5),m("ngForOf",e.product.images),r(2),m("src",e.selectedImage,h),r(3),l(e.product.name),r(2),l(e.product.manufacturer),r(3),g("",e.product.rating,"\u2605"),r(2),I("",e.product.reviewsCount," Ratings & ",e.product.reviewTextCount," Reviews"),r(4),m("ngForOf",e.product.highlights),r(3),g("\u20B9",e.product.price," "),r(2),g("\u20B9",e.product.mrp),r(2),g("",e.product.discount,"% off"),r(4),w("ngModel",e.selectedQty),r(),m("ngForOf",e.product.packSizes),r(5),g("Get by ",e.product.deliveryTime),r(3),l(e.product.introduction),r(2),l(e.product.description),r(4),l(e.product.howToUse),r(3),m("innerHTML",e.product.safetyAdvise,E),r(4),l(e.product.commonSideEffect),r(4),l(e.product.storage)}}function ae(o,c){o&1&&(t(0,"p"),a(1,"Loading medicine details\u2026"),i())}function oe(o,c){o&1&&(t(0,"p"),a(1,"Could not load medicine details."),i())}function ce(o,c){if(o&1&&u(0,ae,2,0,"p",36)(1,oe,2,0,"p",36),o&2){let e=p();m("ngIf",!e.isLoaded),r(),m("ngIf",e.isLoaded&&e.hasError)}}var Y=class o{constructor(c){this.route=c}http=C(B);cartService=C(G);isLoaded=!1;hasError=!1;medicine;product;selectedImage;selectedQty;medicineType=null;ngOnInit(){let c=this.route.snapshot.paramMap.get("id");this.medicineType=this.route.snapshot.queryParamMap.get("type"),c?(console.log("this.medicineType",this.medicineType),this.medicineType==="otc"?this.getOTCMedicineById(c):this.getMedicineById(c)):this.hasError=!0}getMedicineById(c){console.log("id234",c),this.http.get(`${T}${P.MEDICINE_BY_ID(c)}`).subscribe({next:e=>{if(e&&e.status&&e.data){let n=e.data,d=[];n.imageUrls&&n.imageUrls.length>0&&n.imageUrls[0]&&(d=n.imageUrls[0].split("|").map(s=>s.trim())),this.medicine={id:n.productId,name:n.productName,manufacturer:n.marketer,rating:4.5,reviewsCount:0,reviewTextCount:0,highlights:[n.primaryUse,n.saltComposition,n.productForm,n.medicineType].filter(Boolean),price:n.mrp,mrp:n.mrp,discount:0,packSizes:[n.packagingDetail||"1 Pack"],images:d,deliveryTime:"2 days delivery",description:n.description,introduction:n.introduction,howToUse:n.howToUse,safetyAdvise:n.safetyAdvise,commonSideEffect:n.commonSideEffect,storage:n.storage},this.selectedImage=d[0]||"",this.selectedQty=this.medicine.packSizes[0],this.isLoaded=!0}else this.hasError=!0},error:e=>{console.error("Error fetching medicine:",e),this.hasError=!0}})}getOTCMedicineById(c){console.log("id",c),this.http.get(`${T}${P.OTC_MEDICINE_BY_ID(c)}`).subscribe({next:e=>{if(e&&e.status&&e.data){console.log("datasdf",e);let n=e.data;console.log("data",n);let d=[];n.imageUrls&&n.imageUrls.length>0&&n.imageUrls[0]&&(d=n.imageUrls[0].split("|").map(s=>s.trim())),this.product={id:n.id,name:n.name,manufacturer:n.manufacturers,rating:4.2,reviewsCount:0,reviewTextCount:0,highlights:[n.productHighlights,n.productForm,n.type].filter(Boolean),price:n.mrp,mrp:n.mrp,discount:0,packSizes:[n.packageInfo||"1 Pack"],images:d,deliveryTime:"3 days delivery",description:n.information,introduction:n.information,howToUse:n.directionsForUse,safetyAdvise:n.safetyInformation,commonSideEffect:"",storage:""},this.selectedImage=d[0]||"",this.selectedQty=this.product.packSizes[0],this.isLoaded=!0}else this.hasError=!0},error:e=>{console.error("Error fetching OTC medicine:",e),this.hasError=!0}})}addToCart(){if(!this.medicine)return;let c={id:this.medicine.id,name:this.medicine.name,price:Number(this.medicine.price??this.medicine.mrp??0),mrp:Number(this.medicine.mrp??this.medicine.price??0),qty:this.selectedQty,image:this.medicine.images&&this.medicine.images[0]||"assets/img/default.png",count:1};this.cartService.addItem(c),alert(`${c.name} added to cart!`)}addToCarOtc(){if(!this.product)return;let c={id:this.product.id,name:this.product.name,price:Number(this.product.price??this.product.mrp??0),mrp:Number(this.product.mrp??this.product.price??0),qty:this.selectedQty,image:this.product.images&&this.product.images[0]||"assets/img/default.png",count:1};this.cartService.addItem(c),alert(`${c.name} added to cart!`)}static \u0275fac=function(e){return new(e||o)(V(L))};static \u0275cmp=k({type:o,selectors:[["app-view-medicine"]],decls:6,vars:4,consts:[["loadingOrError",""],[4,"ngIf","ngIfElse"],[1,"container","mt-4","product-detail"],[1,"row"],[1,"col-md-6","d-flex"],[1,"d-flex","flex-column","me-3"],["class","thumb-img mb-2","style","width:60px; height:60px; cursor:pointer; border:1px solid #ddd;",3,"src","click",4,"ngFor","ngForOf"],[1,"main-img",2,"width","400px","height","400px","object-fit","contain","border","1px solid #ddd",3,"src"],[1,"col","mt-3"],[1,"manufacturer"],[1,"rating","mb-2"],[1,"badge","bg-warning","text-dark"],[4,"ngFor","ngForOf"],[1,"price-box","my-2","mt-3"],[1,"text-primary"],[1,"text-muted"],["class","text-success",4,"ngIf"],[1,"quantity","mb-3"],[1,"form-select","w-auto","d-inline-block","ms-2",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"btn","btn-primary","btn-lg","mb-3","mt-3",3,"click"],[1,"delivery","mt-3"],[1,"description","my-4"],[1,"mb-1"],[1,"headings","mb-1"],[1,"mb-1",3,"innerHTML"],[1,"thumb-img","mb-2",2,"width","60px","height","60px","cursor","pointer","border","1px solid #ddd",3,"click","src"],[1,"text-success"],[3,"value"],[1,"col-md-6"],[1,"rating"],[1,"mt-3"],[1,"price-box"],[1,"quantity"],[3,"ngModelChange","ngModel"],[1,"btn","btn-primary","btn-lg","mt-3",3,"click"],[4,"ngIf"]],template:function(e,n){if(e&1&&(f(0,"app-header"),u(1,ee,58,20,"ng-container",1)(2,re,59,20,"ng-container",1)(3,ce,2,2,"ng-template",null,0,F),f(5,"app-footer")),e&2){let d=U(4);r(),m("ngIf",n.medicineType==="health"&&n.isLoaded&&!n.hasError)("ngIfElse",d),r(),m("ngIf",n.medicineType==="otc"&&n.isLoaded&&!n.hasError)("ngIfElse",d)}},dependencies:[A,N,z,R,q,D,$,Q,H,W,j],styles:[".headings[_ngcontent-%COMP%]{font-weight:500!important}li[_ngcontent-%COMP%], span[_ngcontent-%COMP%], .description[_ngcontent-%COMP%]{font-weight:400;font-size:12px}.boxes[_ngcontent-%COMP%]{border-radius:20px}.progress[_ngcontent-%COMP%]{height:10px}.product-detail[_ngcontent-%COMP%]   .thumbs[_ngcontent-%COMP%]   .thumb-img[_ngcontent-%COMP%]{width:50px;margin-bottom:8px;border:1px solid #ddd;cursor:pointer}.product-detail[_ngcontent-%COMP%]   .main-img[_ngcontent-%COMP%]{width:100%;border:1px solid #ddd;border-radius:4px}.product-detail[_ngcontent-%COMP%]   .rating[_ngcontent-%COMP%]{margin:8px 0}.product-detail[_ngcontent-%COMP%]   .rating[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{font-size:14px;margin-right:8px}.product-detail[_ngcontent-%COMP%]   .price-box[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-weight:600}.product-detail[_ngcontent-%COMP%]   .price-box[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{text-decoration:line-through}.product-detail[_ngcontent-%COMP%]   .quantity[_ngcontent-%COMP%]{margin:12px 0}.product-detail[_ngcontent-%COMP%]   .quantity[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{margin-left:6px}.product-detail[_ngcontent-%COMP%]   .delivery[_ngcontent-%COMP%]{font-size:14px;color:#007bff}"]})};export{Y as ViewMedicine};
