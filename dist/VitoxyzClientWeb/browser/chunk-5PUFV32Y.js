import{a as H}from"./chunk-H7JJ2GVT.js";import{a as j}from"./chunk-K4DNWDKO.js";import{a as V,b as G}from"./chunk-RAX3NO2F.js";import"./chunk-NRD3KBLP.js";import{a as w,b as T,c as A,d as k,e as B,g as U}from"./chunk-ZJALN7ZM.js";import"./chunk-TCBDXEG3.js";import{c as M,d as L}from"./chunk-TIMTJE23.js";import{a as F}from"./chunk-QG4OT5A4.js";import"./chunk-3N32ICGW.js";import"./chunk-OTHMNLYJ.js";import"./chunk-SP7GYIMR.js";import{a as R}from"./chunk-CLG2LXF4.js";import"./chunk-TMNAOABQ.js";import"./chunk-MFYBXPGH.js";import{a as N,c as P}from"./chunk-DHDG4QUY.js";import{h,i as y,p as O}from"./chunk-QI76QBAE.js";import{$a as D,Lb as l,Mb as r,Nb as t,Ob as u,Vb as x,_b as I,ac as m,cb as a,ga as c,ma as f,na as v,nc as S,ob as b,oc as i,pc as g,qc as d,rc as _,sc as C,tb as p}from"./chunk-VVX2ZSCF.js";function z(o,n){o&1&&(r(0,"div",3),u(1,"mat-spinner"),r(2,"p",4),i(3,"Loading order details..."),t()())}function Y(o,n){if(o&1&&(r(0,"div",23)(1,"small",19),i(2),t()()),o&2){let e=m().$implicit;a(2),d("Form: ",e.productForm)}}function $(o,n){if(o&1&&(r(0,"div",14)(1,"div",15),u(2,"img",16),t(),r(3,"div",17)(4,"h6",18),i(5),t(),r(6,"small",19),i(7),t(),p(8,Y,3,1,"div",20),t(),r(9,"div",21)(10,"div",22),i(11),t(),r(12,"small",19),i(13),t()()()),o&2){let e=n.$implicit;a(2),l("src",e.imageUrl||"assets/no-image.png",D)("alt",e.productName),a(3),g(e.productName),a(2),_(" ",e.packaging," \u2022 Qty: ",e.quantity," "),a(),l("ngIf",e.productForm),a(3),d("\u20B9",e.totalPrice),a(2),d("\u20B9",e.unitPrice," each")}}function Q(o,n){if(o&1&&(r(0,"p"),i(1),t()),o&2){let e=m(2);a(),g(e.order.shippingAddress.addressLine2)}}function J(o,n){if(o&1){let e=x();r(0,"div",5)(1,"div",6)(2,"div",7)(3,"h2",8),i(4,"Order Details"),t(),r(5,"button",9),I("click",function(){f(e);let E=m();return v(E.goBack())}),i(6," Back to Orders "),t()(),r(7,"mat-card",10)(8,"mat-card-header")(9,"mat-card-title"),i(10),t(),r(11,"mat-card-subtitle"),i(12),t()(),r(13,"mat-card-content")(14,"div",5)(15,"div",11)(16,"p")(17,"strong"),i(18,"Status:"),t(),r(19,"span"),i(20),t()(),r(21,"p")(22,"strong"),i(23,"Payment Status:"),t(),r(24,"span"),i(25),t()(),r(26,"p")(27,"strong"),i(28,"Payment Method:"),t(),i(29),t()(),r(30,"div",11)(31,"p")(32,"strong"),i(33,"Total Amount:"),t(),i(34),t(),r(35,"p")(36,"strong"),i(37,"Items:"),t(),i(38),t()()()()(),r(39,"mat-card",10)(40,"mat-card-header")(41,"mat-card-title"),i(42,"Order Items"),t()(),r(43,"mat-card-content"),p(44,$,14,8,"div",12),t()(),r(45,"mat-card")(46,"mat-card-header")(47,"mat-card-title"),i(48,"Shipping Address"),t()(),r(49,"mat-card-content")(50,"p")(51,"strong"),i(52),t()(),r(53,"p"),i(54),t(),p(55,Q,2,1,"p",13),r(56,"p"),i(57),t(),r(58,"p"),i(59),t()()()()()}if(o&2){let e=m();a(10),d("Order #",e.order.orderNumber),a(2),d(" Placed on ",e.formatDate(e.order.orderDate)," "),a(7),S(e.getStatusClass(e.order.status)),a(),d(" ",e.getStatusText(e.order.status)," "),a(4),S(e.getPaymentStatusClass(e.order.paymentStatus)),a(),d(" ",e.getPaymentStatusText(e.order.paymentStatus)," "),a(4),d(" ",e.order.paymentMethod),a(5),d(" \u20B9",e.order.finalAmount),a(4),d(" ",e.getTotalItems(e.order)),a(6),l("ngForOf",e.order.orderItems),a(8),g(e.order.shippingAddress.fullName),a(2),g(e.order.shippingAddress.addressLine1),a(),l("ngIf",e.order.shippingAddress.addressLine2),a(2),C("",e.order.shippingAddress.city,", ",e.order.shippingAddress.state," - ",e.order.shippingAddress.pincode),a(2),d("Phone: ",e.order.shippingAddress.phoneNumber)}}function K(o,n){if(o&1){let e=x();r(0,"div",3)(1,"h4"),i(2,"Order Not Found"),t(),r(3,"p",19),i(4,"The order you're looking for doesn't exist."),t(),r(5,"button",9),I("click",function(){f(e);let E=m();return v(E.goBack())}),i(6," Back to Orders "),t()()}}var q=class o{route=c(N);router=c(P);orderService=c(H);snackBar=c(j);order=null;isLoading=!1;ngOnInit(){this.loadOrderDetails()}loadOrderDetails(){let n=this.route.snapshot.paramMap.get("orderId");if(!n){this.showError("Invalid order ID");return}this.isLoading=!0,this.orderService.getOrderById(Number(n)).subscribe({next:e=>{this.isLoading=!1,e.status&&e.data?(this.order=e.data,console.log("\u2705 Order details loaded:",this.order)):this.showError("Failed to load order details")},error:e=>{this.isLoading=!1,console.error("\u274C Error loading order details:",e),this.showError("Failed to load order details. Please try again.")}})}goBack(){this.router.navigate(["/my-orders"])}getStatusClass(n){switch(n){case"DELIVERED":return"badge bg-success";case"CANCELLED":case"RETURNED":case"REFUNDED":return"badge bg-danger";case"PENDING":return"badge bg-warning";case"CONFIRMED":case"PROCESSING":return"badge bg-info";case"SHIPPED":case"OUT_FOR_DELIVERY":return"badge bg-primary";default:return"badge bg-secondary"}}getStatusText(n){return{PENDING:"Pending",CONFIRMED:"Confirmed",PROCESSING:"Processing",SHIPPED:"Shipped",OUT_FOR_DELIVERY:"Out for Delivery",DELIVERED:"Delivered",CANCELLED:"Cancelled",RETURNED:"Returned",REFUNDED:"Refunded"}[n]||n}getPaymentStatusClass(n){switch(n){case"PAID":return"badge bg-success";case"PENDING":return"badge bg-warning";case"FAILED":case"CANCELLED":return"badge bg-danger";case"REFUNDED":return"badge bg-info";default:return"badge bg-secondary"}}getPaymentStatusText(n){return{PENDING:"Payment Pending",PAID:"Paid",FAILED:"Payment Failed",REFUNDED:"Refunded",CANCELLED:"Cancelled"}[n]||n}formatDate(n){return new Date(n).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"})}getTotalItems(n){return n.orderItems.reduce((e,s)=>e+s.quantity,0)}showError(n){this.snackBar.open(n,"Close",{duration:5e3,panelClass:["error-snackbar"]})}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=b({type:o,selectors:[["app-order-details"]],decls:6,vars:3,consts:[[1,"container","my-4"],["class","text-center my-5",4,"ngIf"],["class","row",4,"ngIf"],[1,"text-center","my-5"],[1,"mt-2"],[1,"row"],[1,"col-12"],[1,"d-flex","justify-content-between","align-items-center","mb-4"],[1,"mb-0"],["mat-raised-button","","color","primary",3,"click"],[1,"mb-4"],[1,"col-md-6"],["class","order-item row align-items-center mb-3 pb-3 border-bottom",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"order-item","row","align-items-center","mb-3","pb-3","border-bottom"],[1,"col-2"],[1,"img-fluid","rounded",2,"max-height","80px","object-fit","cover",3,"src","alt"],[1,"col-6"],[1,"mb-1"],[1,"text-muted"],["class","mt-1",4,"ngIf"],[1,"col-4","text-end"],[1,"fw-bold"],[1,"mt-1"]],template:function(e,s){e&1&&(r(0,"div",0),p(1,z,4,0,"div",1)(2,J,60,19,"div",2)(3,K,7,0,"div",1),t(),u(4,"app-footer")(5,"app-mobile-footer-nav")),e&2&&(a(),l("ngIf",s.isLoading),a(),l("ngIf",!s.isLoading&&s.order),a(),l("ngIf",!s.isLoading&&!s.order))},dependencies:[O,h,y,G,V,L,M,U,w,A,B,k,T,R,F],styles:[".badge[_ngcontent-%COMP%]{padding:.25em .6em;font-size:.75em}"]})};export{q as OrderDetailsComponent};
