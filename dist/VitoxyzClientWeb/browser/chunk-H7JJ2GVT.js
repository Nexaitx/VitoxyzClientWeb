import{a as l}from"./chunk-OTHMNLYJ.js";import{v as c,w as d}from"./chunk-QI76QBAE.js";import{Z as n,ba as a,ga as i,l as o}from"./chunk-VVX2ZSCF.js";var g=class s{http=i(d);API_BASE=`${l}/orders`;_currentOrder$=new o(null);currentOrder$=this._currentOrder$.asObservable();getAuthHeaders(){let e=localStorage.getItem("authToken");if(console.log("\u{1F510} Order Service - Token from localStorage:",e?"Exists":"Missing"),!e)throw console.error("\u274C Order Service - No authentication token found"),new Error("User not authenticated");return new c({Authorization:`Bearer ${e}`,"Content-Type":"application/json"})}createOrder(e){try{let t=this.getAuthHeaders();return console.log("\u{1F4E6} Creating order with data:",e),this.http.post(`${this.API_BASE}/create`,e,{headers:t}).pipe(n(r=>{console.log("\u2705 Order creation response:",r),r.status&&r.data&&this._currentOrder$.next(r.data)}))}catch(t){throw console.error("\u274C Error getting auth headers for order creation:",t),t}}getOrderById(e){let t=this.getAuthHeaders();return console.log("\u{1F4E5} Fetching order by ID:",e),this.http.get(`${this.API_BASE}/${e}`,{headers:t}).pipe(n(r=>{console.log("\u2705 Get order by ID response:",r)}))}getUserOrders(){let e=this.getAuthHeaders();return console.log("\u{1F4E5} Fetching user orders..."),this.http.get(`${this.API_BASE}/my-orders`,{headers:e}).pipe(n(t=>{console.log("\u2705 User orders response:",t)}))}cancelOrder(e){let t=this.getAuthHeaders();return console.log("\u274C Cancelling order:",e),this.http.put(`${this.API_BASE}/${e}/cancel`,{},{headers:t}).pipe(n(r=>{console.log("\u2705 Cancel order response:",r)}))}getOrderStatistics(){let e=this.getAuthHeaders();return console.log("\u{1F4CA} Fetching order statistics..."),this.http.get(`${this.API_BASE}/statistics`,{headers:e}).pipe(n(t=>{console.log("\u2705 Order statistics response:",t)}))}isAuthenticated(){return!!localStorage.getItem("authToken")}getCurrentToken(){return localStorage.getItem("authToken")}static \u0275fac=function(t){return new(t||s)};static \u0275prov=a({token:s,factory:s.\u0275fac,providedIn:"root"})};export{g as a};
