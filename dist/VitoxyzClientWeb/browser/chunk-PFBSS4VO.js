import{a as s}from"./chunk-TNRG4YRG.js";import{y as $}from"./chunk-HSQUREWB.js";import{U as g,ca as u,ga as m}from"./chunk-36LOJXOE.js";var h=class a{constructor(e){this.http=e}FILTER_ENDPOINT="/otc-products/form";productCache=new Map;joinUrl(...e){return e.map((t,o)=>o===0?t.replace(/\/+$/,""):t.replace(/^\/+|\/+$/g,"")).filter(Boolean).join("/")}getProductsByCategory(e,t,o){let r=`${`${s}${this.FILTER_ENDPOINT}`}?productForm=${encodeURIComponent(e)}&page=${t}&size=${o}`;return console.log("CategoryProducts API Calling:",r),this.http.get(r)}getProductsByEndpoint(e,t){return t?this.http.get(`${e}?category=${encodeURIComponent(t)}`):this.http.get(e)}getFilteredProducts(e,t,o,n){let r=`${e}?productForm=${t}&page=${o}&size=${n}`;if(this.productCache.has(r))return console.log(`Cache HIT for key: ${r}`),this.productCache.get(r);let i=`${e}?productForm=${encodeURIComponent(t||"")}&page=${o}&size=${n}`;console.log(`Cache MISS. API Calling: ${i}`);let c=this.http.get(i).pipe(g(1));return this.productCache.set(r,c),c}getProductsForCategoryPage(e,t,o,n,r=[]){let i=e.replace(/^\/+/,"");if(/\/?form(\/|$)/i.test(i)){let d=this.joinUrl(s,i),y=encodeURIComponent(t||""),b=r&&r.length?`&brands=${encodeURIComponent(r.join(","))}`:"",p=`${d}/${y}?page=${o}&size=${n}${b}`;return console.log("Category Page API Calling (path-style):",p),this.http.get(p)}let l=`${this.joinUrl(s,i||this.FILTER_ENDPOINT)}?productForm=${encodeURIComponent(t||"")}&page=${o}&size=${n}`;return console.log("Category Page API Calling (query-style):",l),this.http.get(l)}static \u0275fac=function(t){return new(t||a)(m($))};static \u0275prov=u({token:a,factory:a.\u0275fac,providedIn:"root"})};export{h as a};
