import{a as H,b as Y,c as J,d as Q,e as W}from"./chunk-7LPRMC6D.js";import"./chunk-FSOMGI65.js";import"./chunk-LLKRHPEX.js";import{a as O}from"./chunk-MLPFXZ2N.js";import"./chunk-7SYDJMJT.js";import{j,k as U}from"./chunk-MSGHQIRK.js";import{b as F}from"./chunk-KYUOHYTT.js";import"./chunk-YKN3GVZL.js";import{a as V}from"./chunk-QJAI4TEK.js";import{b as z,c as d,e as I,f as D,i as N,l as R,o as T,p as A,q as L,r as B,x as G,y as K,z as $}from"./chunk-NW2L5A5V.js";import{d as q}from"./chunk-DBP7NTLF.js";import{b as w,c as k}from"./chunk-BL67N6HP.js";import{f as E}from"./chunk-L3UHPIUN.js";import"./chunk-XUNV2VSL.js";import{c as C,g as S}from"./chunk-F7NH5DTK.js";import{h as M,n as _}from"./chunk-MOXSZ3XB.js";import{Gb as p,Hb as t,Ib as e,Jb as m,Tb as g,Za as l,cb as x,e as b,ea as h,hc as n,ic as s,jb as P,jc as u,ob as v}from"./chunk-QPX54FPS.js";function ee(c,o){if(c&1&&(t(0,"option",30),n(1),e()),c&2){let r=o.$implicit;p("value",r),l(),s(r)}}var X=class c{constructor(o){this.fb=o;this.form=this.fb.group({name:["",[d.required,d.minLength(3)]],email:["",[d.required,d.email]],country:["",d.required]})}router=h(C);razorpayKeyId="rzp_test_RARA6BGk8D2Y2o";isPaymentLoading=!1;form;countries=["India","United States","United Kingdom","Canada","Australia"];plan="Premium Health";price=499;tax=5;duration="1 Month";get total(){return this.price+this.tax}goToDietDashboard(){this.router.navigate(["/diet-charts"])}pay(){return b(this,null,function*(){if(this.form.markAllAsTouched(),!this.form.invalid){if(!this.razorpayKeyId){alert("Razorpay Key ID is missing. Please set it in the component.");return}try{this.isPaymentLoading=!0,yield this.loadRazorpaySdk();let o=this.getPayableAmount(),{name:r,email:i,country:a}=this.form.value,Z={key:this.razorpayKeyId,amount:Math.round(o*100),currency:"INR",name:"Your Company Name",description:`${this.plan} - ${this.duration}`,prefill:{name:r||"",email:i||"",contact:""},notes:{plan:this.plan,duration:this.duration,price:String(this.price),tax:String(this.tax),country:a||""},theme:{color:"#0d6efd"},modal:{ondismiss:()=>console.log("Razorpay Checkout closed.")},handler:f=>this.onPaymentSuccess(f)},y=new Razorpay(Z);y.on("payment.failed",f=>this.onPaymentFailed(f)),y.open()}catch(o){console.error("Payment init error:",o),alert("Unable to start payment. Please try again.")}finally{this.isPaymentLoading=!1}}})}onPaymentSuccess(o){console.log("Payment success:",o),alert(`\u2705 Payment successful! Payment ID: ${o?.razorpay_payment_id||"N/A"}`),this.goToDietDashboard()}onPaymentFailed(o){console.error("Payment failed:",o);let r=o?.error?.description||"Payment failed. Please try again.";alert(r)}loadRazorpaySdk(){return new Promise((o,r)=>{if(typeof Razorpay<"u")return o();let i=document.getElementById("razorpay-checkout-js");if(i){i.addEventListener("load",()=>o()),i.addEventListener("error",()=>r(new Error("Failed to load Razorpay SDK.")));return}let a=document.createElement("script");a.id="razorpay-checkout-js",a.src="https://checkout.razorpay.com/v1/checkout.js",a.async=!0,a.onload=()=>o(),a.onerror=()=>r(new Error("Failed to load Razorpay SDK.")),document.body.appendChild(a)})}getPayableAmount(){return this.total}static \u0275fac=function(r){return new(r||c)(x(G))};static \u0275cmp=P({type:c,selectors:[["app-payment-screen"]],decls:66,vars:8,consts:[[1,"page-wrap",2,"margin-top","-30px"],[1,"container","py-5"],["novalidate","",3,"formGroup"],[1,"row","g-4","justify-content-between",2,"margin-top","-86px"],[1,"col-12"],[1,"title","mb-4"],[1,"col-lg-7"],[1,"section-heading","mb-3"],[1,"form-group","mb-3","position-relative"],[1,"form-label"],[1,"bi","bi-person","input-icon"],["type","text","placeholder","Enter your Name","formControlName","name",1,"form-control","input-with-icon"],[1,"form-group","flex-fill","mb-3","position-relative"],[1,"bi","bi-envelope","input-icon"],["type","email","placeholder","Enter your Email","formControlName","email",1,"form-control","input-with-icon"],[1,"custom-select-wrapper"],[1,"bi","bi-geo-alt","input-icon"],["formControlName","country",1,"form-control","custom-select","input-with-icon"],["value","","disabled","","selected",""],[3,"value",4,"ngFor","ngForOf"],[1,"col-lg-5"],[1,"card","p-4","shadow-sm","rounded-4","border-0"],[1,"summary-box","rounded-4","p-3"],[1,"d-flex","justify-content-between","py-1"],[1,"muted"],[1,"fw-semibold"],[1,"my-2"],[1,"fw-bold"],["mat-raised-button","","color","primary",1,"pay-btn","w-90","mt-3","makepaymt","rounded-pill",3,"click","disabled"],[1,"btn","btn-primary","rounded-pill","px-3","text-light",3,"click"],[3,"value"]],template:function(r,i){r&1&&(t(0,"div",0)(1,"div",1)(2,"form",2)(3,"div",3)(4,"div",4)(5,"h5",5),n(6,"Enter your payment details."),e()(),t(7,"div",6)(8,"h6",7),n(9,"Payment details"),e(),t(10,"div",8)(11,"label",9),n(12,"Name"),e(),m(13,"i",10)(14,"input",11),e(),t(15,"div",12)(16,"label",9),n(17,"Email"),e(),m(18,"i",13)(19,"input",14),e(),t(20,"div",12)(21,"label",9),n(22,"Country"),e(),t(23,"div",15),m(24,"i",16),t(25,"select",17)(26,"option",18),n(27,"Select Country"),e(),v(28,ee,2,2,"option",19),e()()()(),t(29,"div",20)(30,"div",21)(31,"h6",7),n(32,"Order Summary"),e(),t(33,"div",22)(34,"div",23)(35,"span",24),n(36,"Plan"),e(),t(37,"span",25),n(38),e()(),t(39,"div",23)(40,"span",24),n(41,"Plan Price"),e(),t(42,"span",25),n(43),e()(),t(44,"div",23)(45,"span",24),n(46,"Duration"),e(),t(47,"span",25),n(48),e()(),t(49,"div",23)(50,"span",24),n(51,"Income Tax"),e(),t(52,"span",25),n(53),e()(),m(54,"mat-divider",26),t(55,"div",23)(56,"span",25),n(57,"Total Due"),e(),t(58,"span",27),n(59),e()()(),t(60,"button",28),g("click",function(){return i.pay()}),n(61," Make a Payment "),e()()()()()()(),t(62,"button",29),g("click",function(){return i.goToDietDashboard()}),n(63,"Proceed to Payment"),e(),t(64,"div"),m(65,"app-footer"),e()),r&2&&(l(2),p("formGroup",i.form),l(26),p("ngForOf",i.countries),l(10),s(i.plan),l(5),u("$",i.price,"/month"),l(5),s(i.duration),l(5),u("$",i.tax.toFixed(2)),l(6),u("$",i.total.toFixed(2)),l(),p("disabled",i.form.invalid))},dependencies:[_,M,S,E,O,k,w,H,F,Q,Y,q,j,W,K,N,L,B,z,A,I,D,$,R,T,U,J,V],styles:['@charset "UTF-8";.heading-text[_ngcontent-%COMP%]{color:#21534e;font-size:22px;font-weight:700}.form-control.input-with-icon[_ngcontent-%COMP%]{border-radius:50px!important;height:48px;padding-left:40px;background-color:#fff;border:1px solid rgba(11,187,193,.1019607843);color:#0bbbc1}.form-control.input-without-icon[_ngcontent-%COMP%]{background-color:#fff;border:1px solid rgba(11,187,193,.1019607843);border-radius:12px;min-height:120px;padding:12px}.custom-select-wrapper[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center}.custom-select-wrapper[_ngcontent-%COMP%]   .input-icon[_ngcontent-%COMP%]{position:absolute;left:14px;top:10px;font-size:18px;color:#0bbbc1;pointer-events:none}.custom-select[_ngcontent-%COMP%]{appearance:none;width:100%;padding:10px 40px;border:1px solid #e0e6ed;border-radius:25px;background-color:#fafbfd;font-size:16px;font-weight:500;color:#1a1a1a;outline:none;cursor:pointer}.makepaymt[_ngcontent-%COMP%]{color:#fff!important}.custom-select[_ngcontent-%COMP%]   option[value=""][_ngcontent-%COMP%]{color:#9ca3af}.custom-select-wrapper[_ngcontent-%COMP%]:after{content:"\\25bc";position:absolute;right:14px;font-size:12px;color:#333;pointer-events:none}.input-icon[_ngcontent-%COMP%]{position:absolute;top:50%;left:12px;color:#0bbbc1!important;font-size:18px;pointer-events:none}.row-input-icon[_ngcontent-%COMP%]{left:24px;background-color:red}.form-label[_ngcontent-%COMP%]{font-weight:500;margin-bottom:6px;color:#495057}.page-wrap[_ngcontent-%COMP%]{min-height:100vh;background:linear-gradient(180deg,#fff,#f6fbff)}.title[_ngcontent-%COMP%]{color:#303642;font-weight:600}.section-heading[_ngcontent-%COMP%]{color:#101828;font-weight:500}.card[_ngcontent-%COMP%]{background:#fff;border-radius:20px!important}.summary-box[_ngcontent-%COMP%]{background:#f0fbf9;border:1px solid #E9F6F3}.muted[_ngcontent-%COMP%]{color:var(--muted)}.mat-field.mat-mdc-form-field[_ngcontent-%COMP%]{margin-bottom:16px}.mat-mdc-form-field[_ngcontent-%COMP%]   .mdc-text-field--outlined[_ngcontent-%COMP%], .mat-mdc-form-field[_ngcontent-%COMP%]   .mdc-text-field--no-label[_ngcontent-%COMP%]{border-radius:14px!important;background:#f0fbf9}.mat-mdc-form-field[_ngcontent-%COMP%]   .mdc-text-field__input[_ngcontent-%COMP%]{padding-left:6px!important}.mat-mdc-form-field[_ngcontent-%COMP%]   .mat-mdc-form-field-icon-prefix[_ngcontent-%COMP%]{margin-right:6px;color:#14c1b5}.mat-mdc-select-min-line[_ngcontent-%COMP%]{padding-left:0!important}.pay-btn.mdc-button--raised[_ngcontent-%COMP%]{height:52px;font-weight:500;letter-spacing:.2px;background-color:#0bbbc1!important}.pay-btn[_ngcontent-%COMP%]:hover{background-color:#10a99e!important}@media (max-width: 991.98px){.title[_ngcontent-%COMP%]{margin-bottom:.75rem}}']})};export{X as PaymentScreen};
