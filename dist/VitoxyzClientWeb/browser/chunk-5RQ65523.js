import{a as ge}from"./chunk-73JY7XED.js";import{a as pe,b as ue}from"./chunk-BHNKIEWT.js";import{a as ce}from"./chunk-TJOGKJUU.js";import{b as me}from"./chunk-3QJOD6ZT.js";import"./chunk-NRD3KBLP.js";import"./chunk-FUULWHGX.js";import"./chunk-A6XAC4QI.js";import{b as ae}from"./chunk-MTLQYADQ.js";import{a as le}from"./chunk-AGTFDDLE.js";import{f as oe}from"./chunk-2FIYSNYS.js";import"./chunk-RXPDFXEY.js";import{a as de}from"./chunk-5TBLFU7I.js";import"./chunk-GA6KQOR5.js";import{E as Q,F as Y,J as K,K as G,M as J,N as Z,O as X,V as ee,W as te,X as ie,_ as ne,ca as re}from"./chunk-OHQSNZA5.js";import{a as se}from"./chunk-TNRG4YRG.js";import{c as j}from"./chunk-UF26DDQM.js";import{h as R,i as q,q as $,w as H,y as U}from"./chunk-HSQUREWB.js";import{Ab as b,Ac as z,Kb as I,Lb as E,Pb as u,Qb as n,Rb as r,Sb as x,Zb as C,_ as S,a as V,bb as F,ca as D,cc as g,e as L,eb as d,ec as c,ha as v,l as M,na as m,oa as p,qc as T,sc as o,tc as w,uc as f,vb as W,vc as B,wc as N,xc as h,yc as _,zc as y}from"./chunk-36LOJXOE.js";var O=class l{http=v(U);API_BASE=`${se}/address`;_addresses$=new M([]);addresses$=this._addresses$.asObservable();_selectedAddress$=new M(null);selectedAddress$=this._selectedAddress$.asObservable();_editingAddress$=new M(null);editingAddress$=this._editingAddress$.asObservable();getAuthHeaders(){let t=localStorage.getItem("authToken");if(!t)throw new Error("User not authenticated");return new H({Authorization:`Bearer ${t}`,"Content-Type":"application/json"})}getUserAddresses(){try{let t=this.getAuthHeaders();return this.http.get(`${this.API_BASE}/my`,{headers:t}).pipe(S(e=>{e.status&&e.data&&this._addresses$.next(e.data)}))}catch(t){throw t}}getAddressById(t){let e=this.getAuthHeaders();return this.http.get(`${this.API_BASE}/${t}`,{headers:e})}addAddress(t){let e=this.getAuthHeaders();return this.http.post(`${this.API_BASE}/add`,t,{headers:e}).pipe(S(s=>{s.status&&this.getUserAddresses().subscribe()}))}updateAddress(t,e){let s=this.getAuthHeaders();return this.http.put(`${this.API_BASE}/update/${t}`,e,{headers:s}).pipe(S(i=>{i.status&&(this.getUserAddresses().subscribe(),this._editingAddress$.next(null))}))}deleteAddress(t){let e=this.getAuthHeaders();return this.http.delete(`${this.API_BASE}/delete/${t}`,{headers:e}).pipe(S(s=>{s.status&&(this.getUserAddresses().subscribe(),this._selectedAddress$.value?.id===t&&this._selectedAddress$.next(null))}))}setDefaultAddress(t){let e=this.getAuthHeaders();return this.http.put(`${this.API_BASE}/default/${t}`,{},{headers:e}).pipe(S(s=>{s.status&&this.getUserAddresses().subscribe()}))}getDefaultAddress(){let t=this.getAuthHeaders();return this.http.get(`${this.API_BASE}/default`,{headers:t})}setEditingAddress(t){this._editingAddress$.next(t)}cancelEditing(){this._editingAddress$.next(null)}isAuthenticated(){return!!localStorage.getItem("authToken")}selectAddress(t){this._selectedAddress$.next(t)}getSelectedAddress(){return this._selectedAddress$.value}clearSelectedAddress(){this._selectedAddress$.next(null)}static \u0275fac=function(e){return new(e||l)};static \u0275prov=D({token:l,factory:l.\u0275fac,providedIn:"root"})};function fe(l,t){l&1&&(n(0,"div",8)(1,"div",9)(2,"span",10),o(3,"Loading..."),r()(),n(4,"p",11),o(5,"Loading cart..."),r()())}function xe(l,t){if(l&1){let e=C();n(0,"div",8)(1,"p"),o(2,"Your cart is empty."),r(),n(3,"button",12),g("click",function(){m(e);let i=c();return p(i.continueShopping())}),o(4," Continue Shopping "),r()()}}function be(l,t){if(l&1&&(n(0,"span",25),o(1),r()),l&2){let e=c().$implicit;d(),f("\u20B9",e.mrp)}}function Ce(l,t){if(l&1&&(n(0,"span",26),o(1),r()),l&2){let e=c().$implicit,s=c();d(),f(" ",s.getDiscount(e),"% off ")}}function Ae(l,t){if(l&1){let e=C();n(0,"div",13)(1,"div"),x(2,"img",14),r(),n(3,"div",15)(4,"h6"),o(5),r(),n(6,"small"),o(7),r(),n(8,"div",16),g("click",function(){let i=m(e).$implicit,a=c();return p(a.removeItem(i.id))}),x(9,"i",17),r()(),n(10,"div",18)(11,"div",19),o(12),b(13,be,2,1,"span",20)(14,Ce,2,1,"span",21),r(),n(15,"button",22)(16,"button",23),g("click",function(){let i=m(e).$implicit,a=c();return p(a.decreaseQty(i))}),o(17,"\u2212"),r(),x(18,"input",24),n(19,"button",23),g("click",function(){let i=m(e).$implicit,a=c();return p(a.increaseQty(i))}),o(20,"+"),r()()()()}if(l&2){let e=t.$implicit;d(2),u("alt",z(e.name))("src",e.image,F),d(3),w(e.name),d(2),w(e.qty||""),d(5),f(" \u20B9",e.mrp," "),d(),u("ngIf",e.mrp&&e.mrp>e.price),d(),u("ngIf",e.mrp&&e.mrp>e.price),d(4),u("value",e.count)}}function we(l,t){if(l&1&&(n(0,"div",38)(1,"small",39),o(2,"Delivery to:"),r(),n(3,"div",40),o(4),r(),n(5,"div",41),o(6),r(),n(7,"div",42),o(8),r()()),l&2){let e=c(2);d(4),w(e.selectedAddress.fullName),d(2),N("",e.selectedAddress.addressLine1,", ",e.selectedAddress.city,", ",e.selectedAddress.pincode," "),d(2),w(e.selectedAddress.phoneNumber)}}function ve(l,t){l&1&&(n(0,"span"),o(1,"\u{1F4B3} Online Payment"),r())}function Se(l,t){l&1&&(n(0,"span"),o(1,"\u{1F4B0} Cash on Delivery"),r())}function Pe(l,t){if(l&1&&(n(0,"div",43)(1,"small",44),o(2,"Payment Method:"),r(),n(3,"div",45),b(4,ve,2,0,"span",46)(5,Se,2,0,"span",46),r()()),l&2){let e=c(2);d(4),u("ngIf",e.selectedPaymentMethod==="ONLINE"),d(),u("ngIf",e.selectedPaymentMethod==="CASH_ON_DELIVERY")}}function Me(l,t){l&1&&x(0,"span",47)}function Ie(l,t){if(l&1){let e=C();n(0,"div",27)(1,"h6",28),o(2,"Bill Summary"),r(),n(3,"table",29)(4,"tbody")(5,"tr")(6,"td"),o(7,"Item Total"),r(),n(8,"td",18),o(9),r()(),n(10,"tr")(11,"td"),o(12,"Total Discount"),r(),n(13,"td",30),o(14),r()(),n(15,"tr")(16,"td"),o(17,"Shipping Fee"),r(),n(18,"td",18),o(19),r()(),n(20,"tr",31)(21,"td"),o(22,"To be Paid"),r(),n(23,"td",18),o(24),r()()()(),b(25,we,9,5,"div",32)(26,Pe,6,2,"div",33),n(27,"div",34)(28,"button",35),g("click",function(){m(e);let i=c();return p(i.onProceedToPayment())}),b(29,Me,1,0,"span",36),o(30),r(),n(31,"button",37),g("click",function(){m(e);let i=c();return p(i.continueShopping())}),o(32," Continue Shopping "),r()()()}if(l&2){let e=c();d(9),f("\u20B9",e.getItemTotal()),d(5),f("\u2212 \u20B9",e.getTotalDiscount()),d(5),f("\u20B9",e.shippingFee),d(5),f("\u20B9",e.getFinalAmount()),d(),u("ngIf",e.selectedAddress),d(),u("ngIf",e.selectedPaymentMethod),d(2),u("disabled",e.isLoading||e.isPaymentLoading),d(),u("ngIf",e.isPaymentLoading),d(),f(" ",e.isPaymentLoading?"Processing...":"Continue to Pay"," "),d(),u("disabled",e.isLoading)}}function Ee(l,t){if(l&1){let e=C();n(0,"app-authorization",48),g("loginSuccess",function(){m(e);let i=c();return p(i.onAuthSuccess())})("close",function(){m(e);let i=c();return p(i.onAuthClose())}),r()}if(l&2){let e=c();u("showAuthModal",e.showAuthPopup)("authMode","login")}}function Oe(l,t){l&1&&(n(0,"div",60)(1,"p"),o(2,"No addresses found. Please add a delivery address."),r()())}function ke(l,t){l&1&&(n(0,"span",75),o(1,"Default"),r())}function Le(l,t){if(l&1&&(n(0,"span"),o(1),x(2,"br"),r()),l&2){let e=c().$implicit;d(),w(e.addressLine2)}}function Te(l,t){if(l&1&&(n(0,"span"),o(1),x(2,"br"),r()),l&2){let e=c().$implicit;d(),w(e.landmark)}}function Ne(l,t){if(l&1){let e=C();n(0,"div",61)(1,"div",62)(2,"div",63)(3,"div",64)(4,"input",65),g("click",function(){let i=m(e).$implicit,a=c(3);return p(a.onSelectAddress(i))}),r(),n(5,"label",66),o(6),b(7,ke,2,0,"span",67),r()(),n(8,"div",68),o(9),x(10,"br"),b(11,Le,3,1,"span",46)(12,Te,3,1,"span",46),o(13),x(14,"br"),o(15),r(),n(16,"div",69),o(17),r()(),n(18,"div",70)(19,"button",71),g("click",function(){let i=m(e).$implicit,a=c(3);return p(a.onEditAddress(i))}),x(20,"i",72),r(),n(21,"button",73),g("click",function(){let i=m(e).$implicit,a=c(3);return p(a.onDeleteAddress(i))}),x(22,"i",74),r()()()()}if(l&2){let e=t.$implicit,s=c(3);T("border-primary",(s.selectedAddress==null?null:s.selectedAddress.id)===e.id),d(4),u("checked",(s.selectedAddress==null?null:s.selectedAddress.id)===e.id),d(2),f(" ",e.fullName," "),d(),u("ngIf",e.isDefault),d(2),f(" ",e.addressLine1),d(2),u("ngIf",e.addressLine2),d(),u("ngIf",e.landmark),d(),N(" ",e.city,", ",e.state," - ",e.pincode),d(2),f(" Phone: ",e.phoneNumber," "),d(2),w(e.addressType),d(4),u("disabled",e.isDefault)}}function Ve(l,t){if(l&1){let e=C();n(0,"div"),b(1,Oe,3,0,"div",57)(2,Ne,23,14,"div",58),n(3,"button",59),g("click",function(){m(e);let i=c(2);return p(i.onAddNewAddress())}),o(4," + Add New Address "),r()()}if(l&2){let e=c(2);d(),u("ngIf",e.addresses.length===0),d(),u("ngForOf",e.addresses)}}function De(l,t){if(l&1){let e=C();n(0,"div")(1,"h6"),o(2,"Add New Address"),r(),n(3,"form")(4,"div",76)(5,"div",77)(6,"div",78)(7,"label",79),o(8,"Full Name *"),r(),n(9,"input",80),y("ngModelChange",function(i){m(e);let a=c(2);return _(a.newAddress.fullName,i)||(a.newAddress.fullName=i),p(i)}),r()()(),n(10,"div",77)(11,"div",78)(12,"label",79),o(13,"Phone Number *"),r(),n(14,"input",81),y("ngModelChange",function(i){m(e);let a=c(2);return _(a.newAddress.phoneNumber,i)||(a.newAddress.phoneNumber=i),p(i)}),r()()()(),n(15,"div",78)(16,"label",79),o(17,"Address Line 1 *"),r(),n(18,"input",82),y("ngModelChange",function(i){m(e);let a=c(2);return _(a.newAddress.addressLine1,i)||(a.newAddress.addressLine1=i),p(i)}),r()(),n(19,"div",78)(20,"label",79),o(21,"Address Line 2"),r(),n(22,"input",83),y("ngModelChange",function(i){m(e);let a=c(2);return _(a.newAddress.addressLine2,i)||(a.newAddress.addressLine2=i),p(i)}),r()(),n(23,"div",78)(24,"label",79),o(25,"Landmark"),r(),n(26,"input",84),y("ngModelChange",function(i){m(e);let a=c(2);return _(a.newAddress.landmark,i)||(a.newAddress.landmark=i),p(i)}),r()(),n(27,"div",76)(28,"div",85)(29,"div",78)(30,"label",79),o(31,"City *"),r(),n(32,"input",86),y("ngModelChange",function(i){m(e);let a=c(2);return _(a.newAddress.city,i)||(a.newAddress.city=i),p(i)}),r()()(),n(33,"div",85)(34,"div",78)(35,"label",79),o(36,"State *"),r(),n(37,"input",87),y("ngModelChange",function(i){m(e);let a=c(2);return _(a.newAddress.state,i)||(a.newAddress.state=i),p(i)}),r()()(),n(38,"div",85)(39,"div",78)(40,"label",79),o(41,"Pincode *"),r(),n(42,"input",88),y("ngModelChange",function(i){m(e);let a=c(2);return _(a.newAddress.pincode,i)||(a.newAddress.pincode=i),p(i)}),r()()()(),n(43,"div",78)(44,"label",79),o(45,"Address Type"),r(),n(46,"select",89),y("ngModelChange",function(i){m(e);let a=c(2);return _(a.newAddress.addressType,i)||(a.newAddress.addressType=i),p(i)}),n(47,"option",90),o(48,"Home"),r(),n(49,"option",91),o(50,"Office"),r(),n(51,"option",92),o(52,"Other"),r()()(),n(53,"div",93)(54,"input",94),y("ngModelChange",function(i){m(e);let a=c(2);return _(a.newAddress.isDefault,i)||(a.newAddress.isDefault=i),p(i)}),r(),n(55,"label",95),o(56," Set as default address "),r()(),n(57,"div",96)(58,"button",97),g("click",function(){m(e);let i=c(2);return p(i.onSaveNewAddress())}),o(59," Save Address "),r(),n(60,"button",98),g("click",function(){m(e);let i=c(2);return p(i.onCancelNewAddress())}),o(61," Cancel "),r()()()()}if(l&2){let e=c(2);d(9),h("ngModel",e.newAddress.fullName),d(5),h("ngModel",e.newAddress.phoneNumber),d(4),h("ngModel",e.newAddress.addressLine1),d(4),h("ngModel",e.newAddress.addressLine2),d(4),h("ngModel",e.newAddress.landmark),d(6),h("ngModel",e.newAddress.city),d(5),h("ngModel",e.newAddress.state),d(5),h("ngModel",e.newAddress.pincode),d(4),h("ngModel",e.newAddress.addressType),d(8),h("ngModel",e.newAddress.isDefault)}}function Fe(l,t){if(l&1){let e=C();n(0,"div")(1,"h6"),o(2,"Edit Address"),r(),n(3,"form")(4,"div",76)(5,"div",77)(6,"div",78)(7,"label",79),o(8,"Full Name *"),r(),n(9,"input",80),y("ngModelChange",function(i){m(e);let a=c(2);return _(a.editingAddress.fullName,i)||(a.editingAddress.fullName=i),p(i)}),r()()(),n(10,"div",77)(11,"div",78)(12,"label",79),o(13,"Phone Number *"),r(),n(14,"input",81),y("ngModelChange",function(i){m(e);let a=c(2);return _(a.editingAddress.phoneNumber,i)||(a.editingAddress.phoneNumber=i),p(i)}),r()()()(),n(15,"div",78)(16,"label",79),o(17,"Address Line 1 *"),r(),n(18,"input",82),y("ngModelChange",function(i){m(e);let a=c(2);return _(a.editingAddress.addressLine1,i)||(a.editingAddress.addressLine1=i),p(i)}),r()(),n(19,"div",78)(20,"label",79),o(21,"Address Line 2"),r(),n(22,"input",83),y("ngModelChange",function(i){m(e);let a=c(2);return _(a.editingAddress.addressLine2,i)||(a.editingAddress.addressLine2=i),p(i)}),r()(),n(23,"div",78)(24,"label",79),o(25,"Landmark"),r(),n(26,"input",84),y("ngModelChange",function(i){m(e);let a=c(2);return _(a.editingAddress.landmark,i)||(a.editingAddress.landmark=i),p(i)}),r()(),n(27,"div",76)(28,"div",85)(29,"div",78)(30,"label",79),o(31,"City *"),r(),n(32,"input",86),y("ngModelChange",function(i){m(e);let a=c(2);return _(a.editingAddress.city,i)||(a.editingAddress.city=i),p(i)}),r()()(),n(33,"div",85)(34,"div",78)(35,"label",79),o(36,"State *"),r(),n(37,"input",87),y("ngModelChange",function(i){m(e);let a=c(2);return _(a.editingAddress.state,i)||(a.editingAddress.state=i),p(i)}),r()()(),n(38,"div",85)(39,"div",78)(40,"label",79),o(41,"Pincode *"),r(),n(42,"input",88),y("ngModelChange",function(i){m(e);let a=c(2);return _(a.editingAddress.pincode,i)||(a.editingAddress.pincode=i),p(i)}),r()()()(),n(43,"div",78)(44,"label",79),o(45,"Address Type"),r(),n(46,"select",89),y("ngModelChange",function(i){m(e);let a=c(2);return _(a.editingAddress.addressType,i)||(a.editingAddress.addressType=i),p(i)}),n(47,"option",90),o(48,"Home"),r(),n(49,"option",91),o(50,"Office"),r(),n(51,"option",92),o(52,"Other"),r()()(),n(53,"div",93)(54,"input",99),y("ngModelChange",function(i){m(e);let a=c(2);return _(a.editingAddress.isDefault,i)||(a.editingAddress.isDefault=i),p(i)}),r(),n(55,"label",100),o(56," Set as default address "),r()(),n(57,"div",96)(58,"button",97),g("click",function(){m(e);let i=c(2);return p(i.onUpdateAddress())}),o(59," Update Address "),r(),n(60,"button",98),g("click",function(){m(e);let i=c(2);return p(i.onCancelEdit())}),o(61," Cancel "),r()()()()}if(l&2){let e=c(2);d(9),h("ngModel",e.editingAddress.fullName),d(5),h("ngModel",e.editingAddress.phoneNumber),d(4),h("ngModel",e.editingAddress.addressLine1),d(4),h("ngModel",e.editingAddress.addressLine2),d(4),h("ngModel",e.editingAddress.landmark),d(6),h("ngModel",e.editingAddress.city),d(5),h("ngModel",e.editingAddress.state),d(5),h("ngModel",e.editingAddress.pincode),d(4),h("ngModel",e.editingAddress.addressType),d(8),h("ngModel",e.editingAddress.isDefault)}}function We(l,t){if(l&1){let e=C();n(0,"div",101)(1,"button",102),g("click",function(){m(e);let i=c(2);return p(i.onCloseAddressModal())}),o(2," Cancel "),r(),n(3,"button",103),g("click",function(){m(e);let i=c(2);return p(i.onProceedWithAddress())}),o(4," Deliver to this Address "),r()()}if(l&2){let e=c(2);d(3),u("disabled",!e.selectedAddress)}}function Be(l,t){if(l&1){let e=C();n(0,"div",7)(1,"div",49)(2,"div",50)(3,"div",51)(4,"h5",52),o(5),r(),n(6,"button",53),g("click",function(){m(e);let i=c();return p(i.onCloseAddressModal())}),x(7,"i",54),r()(),n(8,"div",55),b(9,Ve,5,2,"div",46)(10,De,62,10,"div",46)(11,Fe,62,10,"div",46),r(),b(12,We,5,1,"div",56),r()()()}if(l&2){let e=c();d(5),f(" ",e.isEditingAddress?"Edit Address":"Select Delivery Address"," "),d(4),u("ngIf",!e.showNewAddressForm&&!e.isEditingAddress),d(),u("ngIf",e.showNewAddressForm&&!e.isEditingAddress),d(),u("ngIf",e.isEditingAddress),d(),u("ngIf",!e.showNewAddressForm&&!e.isEditingAddress)}}function ze(l,t){if(l&1){let e=C();n(0,"div",112),g("click",function(){let i=m(e).$implicit,a=c(2);return p(a.onSelectPaymentMethod(i.value))}),n(1,"div",64)(2,"input",113),g("click",function(){let i=m(e).$implicit,a=c(2);return p(a.onSelectPaymentMethod(i.value))}),r(),n(3,"label",66),o(4),r()(),n(5,"div",69),o(6),r()()}if(l&2){let e=t.$implicit,s=c(2);T("border-primary",s.selectedPaymentMethod===e.value),d(2),u("checked",s.selectedPaymentMethod===e.value),d(2),B(" ",e.icon," ",e.label," "),d(2),w(e.description)}}function Re(l,t){if(l&1){let e=C();n(0,"div",7)(1,"div",104)(2,"div",50)(3,"div",51)(4,"h5",52),o(5,"Select Payment Method"),r(),n(6,"button",53),g("click",function(){m(e);let i=c();return p(i.onCancelPaymentMethod())}),x(7,"i",105),r()(),n(8,"div",55)(9,"div",106),b(10,ze,7,6,"div",107),r(),n(11,"div",108)(12,"h6",40),o(13,"Order Summary"),r(),n(14,"div",34)(15,"span"),o(16,"Items Total:"),r(),n(17,"span"),o(18),r()(),n(19,"div",34)(20,"span"),o(21,"Shipping:"),r(),n(22,"span"),o(23),r()(),n(24,"div",109)(25,"span"),o(26,"Total Amount:"),r(),n(27,"span"),o(28),r()()()(),n(29,"div",101)(30,"button",110),g("click",function(){m(e);let i=c();return p(i.onCancelPaymentMethod())}),o(31," Cancel "),r(),n(32,"button",111),g("click",function(){m(e);let i=c();return p(i.onConfirmPaymentMethod())}),o(33," Confirm & Place Order "),r()()()()()}if(l&2){let e=c();d(10),u("ngForOf",e.paymentMethods),d(8),f("\u20B9",e.getItemTotal()),d(5),f("\u20B9",e.shippingFee),d(5),f("\u20B9",e.getFinalAmount()),d(4),u("disabled",!e.selectedPaymentMethod)}}var he=class l{cart=[];shippingFee=70;showAuthPopup=!1;showAddressModal=!1;showNewAddressForm=!1;showPaymentMethodModal=!1;isPaymentLoading=!1;isLoading=!1;debugInfo="";itemLoadingStates={};isEditingAddress=!1;editingAddress=this.getEmptyAddress();addresses=[];selectedAddress=null;newAddress=this.getEmptyAddress();selectedPaymentMethod="ONLINE";paymentMethods=[{value:"ONLINE",label:"Online Payment",description:"Pay securely with Razorpay",icon:"\u{1F4B3}"},{value:"CASH_ON_DELIVERY",label:"Cash on Delivery",description:"Pay when you receive the order",icon:"\u{1F4B0}"}];successMessage="";razorpayKeyId="rzp_test_RARA6BGk8D2Y2o";router=v(j);cartService=v(ae);addressService=v(O);orderService=v(ge);snackBar=v(pe);cartSubscription;loadingSubscription;itemLoadingSubscription;notificationSubscription;addressesSubscription;ngOnInit(){console.log("item",this.cart),console.log("\u{1F6D2} Cart component initialized"),this.updateDebugInfo("Component initialized"),this.cartSubscription=this.cartService.cart$.subscribe(t=>{console.log("\u{1F504} Cart updated in component:",t),this.cart=t,this.updateDebugInfo(`Cart updated: ${t.length} items`)}),this.loadingSubscription=this.cartService.loading$.subscribe(t=>{this.isLoading=t,console.log("\u{1F504} Global loading state:",t)}),this.itemLoadingSubscription=this.cartService.itemLoadingStates$.subscribe(t=>{this.itemLoadingStates=t,console.log("\u{1F504} Item loading states:",t)}),this.notificationSubscription=this.cartService.successNotification$.subscribe(t=>{t&&(this.successMessage=t,this.showSuccessAlert(t),setTimeout(()=>{this.successMessage=""},3e3))}),this.addressesSubscription=this.addressService.addresses$.subscribe(t=>{this.addresses=t,console.log("\u{1F3E0} Addresses updated:",t)}),this.addressService.selectedAddress$.subscribe(t=>{this.selectedAddress=t,console.log("\u{1F4CD} Selected address:",t)}),this.refreshCart(),this.loadUserAddresses()}ngOnDestroy(){this.cartSubscription&&this.cartSubscription.unsubscribe(),this.loadingSubscription&&this.loadingSubscription.unsubscribe(),this.itemLoadingSubscription&&this.itemLoadingSubscription.unsubscribe(),this.notificationSubscription&&this.notificationSubscription.unsubscribe(),this.addressesSubscription&&this.addressesSubscription.unsubscribe()}getEmptyAddress(){return{fullName:"",phoneNumber:"",addressLine1:"",addressLine2:"",landmark:"",city:"",state:"",pincode:"",addressType:"HOME"}}loadUserAddresses(){this.cartService.isLoggedIn()&&this.addressService.getUserAddresses().subscribe({next:t=>{console.log("\u2705 Addresses loaded:",t)},error:t=>{console.error("\u274C Failed to load addresses:",t)}})}updateDebugInfo(t){this.debugInfo=`${new Date().toLocaleTimeString()}: ${t}`,console.log("\u{1F527} "+t)}showSuccessAlert(t){this.snackBar.open(t,"Close",{duration:3e3,panelClass:["success-snackbar"]})}showErrorAlert(t){this.snackBar.open(t,"Close",{duration:5e3,panelClass:["error-snackbar"]})}refreshCart(){console.log("\u{1F504} Refreshing cart..."),this.updateDebugInfo("Refreshing cart..."),this.cartService.fetchCart().subscribe({next:()=>{console.log("\u2705 Cart refresh completed"),this.updateDebugInfo("Cart refresh completed")},error:t=>{console.error("\u274C Failed to fetch cart:",t),this.updateDebugInfo("Failed to fetch cart"),this.showErrorAlert("Failed to load cart. Please try again.")}})}checkLocalStorage(){let t=localStorage.getItem("localCart");return console.log("\u{1F4BE} Local storage cart:",t),this.updateDebugInfo(`Local storage: ${t?JSON.parse(t).length+" items":"empty"}`),t?JSON.parse(t):[]}manualSync(){console.log("\u{1F504} Manual sync triggered (SMART MERGE mode)"),this.updateDebugInfo("Manual sync started (SMART MERGE mode)");let t=this.checkLocalStorage();if(t.length===0){this.updateDebugInfo("No local items to sync"),this.showErrorAlert("No local cart items to sync.");return}if(!confirm(`This will SMART MERGE your local cart with backend cart:

\u2022 Same products: Higher quantity will be kept
\u2022 New products: Will be added
\u2022 Existing backend products: Will remain as-is

Continue?`)){this.updateDebugInfo("Sync cancelled by user");return}let e={items:t.map(s=>({medicineId:s.id,quantity:s.count,productType:s.productType||"otc"}))};this.cartService.syncLocalCartSmartMerge(e).subscribe({next:s=>{if(console.log("\u2705 Smart merge result:",s),this.updateDebugInfo("Smart merge completed"),s?.status){let i=s.data,a=`Cart merged successfully!
\u2022 ${i.mergedCount} items already in cart
\u2022 ${i.addedCount} new items added
\u2022 ${i.updatedCount} items updated with higher quantities`;this.showSuccessAlert(a),localStorage.removeItem("localCart"),console.log("\u{1F5D1}\uFE0F Local cart cleared after successful sync")}else this.showErrorAlert("Merge completed with warnings.");this.refreshCart()},error:s=>{console.error("\u274C Smart merge error:",s),this.updateDebugInfo("Smart merge error"),this.showErrorAlert("Failed to merge cart. Please try again.")}})}onAuthSuccess(){console.log("\u2705 Login successful! Starting SMART MERGE sync..."),this.updateDebugInfo("Login successful, starting smart merge");let t=this.checkLocalStorage();if(console.log("\u{1F6D2} Local cart before sync:",t),t.length===0){console.log("\u2139\uFE0F No local cart items to sync"),this.updateDebugInfo("No local items to sync"),this.showAuthPopup=!1,this.refreshCart(),this.loadUserAddresses();return}this.isLoading=!0,this.updateDebugInfo("Smart merging cart with backend...");let e={items:t.map(s=>({medicineId:s.id,quantity:s.count,productType:s.productType||"otc"}))};this.cartService.syncLocalCartSmartMerge(e).subscribe({next:s=>{if(console.log("\u2705 Smart merge completed:",s),this.updateDebugInfo("Smart merge completed"),this.showAuthPopup=!1,this.isLoading=!1,s?.status){let i=s.data,a=`Cart merged! ${i.addedCount} new items added, ${i.updatedCount} quantities updated`;this.showSuccessAlert(a),localStorage.removeItem("localCart")}this.loadUserAddresses(),setTimeout(()=>{this.refreshCart()},1500)},error:s=>{console.error("\u274C Smart merge failed:",s),this.updateDebugInfo("Smart merge failed"),this.showAuthPopup=!1,this.isLoading=!1,this.showErrorAlert("Cart merge failed. Using local cart."),this.loadUserAddresses()}})}removeItem(t){let e=this.cart.find(s=>s.id===t);e&&(console.log("\u{1F5D1}\uFE0F Removing item from cart:",{id:t,name:e.name,cartLength:this.cart.length}),this.updateDebugInfo(`Removing item: ${e.name} (${t})`),this.cartService.removeItem(t).subscribe({next:()=>{console.log("\u2705 Item removed successfully"),this.updateDebugInfo(`Removed: ${e.name}`),this.showSuccessAlert("Item removed from cart")},error:s=>{console.error("\u274C Failed to remove item:",s),this.updateDebugInfo(`Failed to remove: ${e.name}`),console.log("\u{1F527} Current cart state:",this.cart),console.log("\u{1F527} Local storage cart:",this.checkLocalStorage()),this.showErrorAlert("Failed to remove item from server, but removed locally.")}}))}increaseQty(t){this.isItemLoading(t.id)||(console.log("\u2795 Increasing quantity for:",t.id),this.cartService.incrementQty(t.id).subscribe({next:()=>{console.log("\u2705 Quantity increased"),this.updateDebugInfo("Quantity increased")},error:e=>{console.error("\u274C Failed to increase quantity:",e),this.updateDebugInfo("Failed to increase quantity"),this.showErrorAlert("Failed to increase quantity. Please try again.")}}))}decreaseQty(t){this.isItemLoading(t.id)||(console.log("\u2796 Decreasing quantity for:",t.id),t.count>1?this.cartService.decrementQty(t.id).subscribe({next:()=>{console.log("\u2705 Quantity decreased"),this.updateDebugInfo("Quantity decreased")},error:e=>{console.error("\u274C Failed to decrease quantity:",e),this.updateDebugInfo("Failed to decrease quantity"),this.showErrorAlert("Failed to decrease quantity. Please try again.")}}):this.removeItem(t.id))}isItemLoading(t){return this.itemLoadingStates[t]||!1}onProceedToPayment(){console.log("\u{1F4B0} Proceed to payment clicked"),this.updateDebugInfo("Proceed to payment clicked");let t=this.checkLocalStorage();if(console.log("\u{1F6D2} Current cart items:",this.cart.length,"Local items:",t.length),this.cart.length===0&&t.length===0){this.showErrorAlert("Your cart is empty. Please add items before proceeding to payment.");return}if(!this.cartService.isLoggedIn()){console.log("\u{1F510} Showing auth popup"),this.updateDebugInfo("Showing auth popup"),this.showAuthPopup=!0;return}this.showAddressModal=!0,console.log("\u{1F3E0} Showing address modal")}onSelectAddress(t){this.addressService.selectAddress(t),console.log("\u{1F4CD} Address selected:",t)}onAddNewAddress(){this.showNewAddressForm=!0,this.newAddress=this.getEmptyAddress()}onSaveNewAddress(){if(!this.isValidAddress(this.newAddress)){this.showErrorAlert("Please fill all required fields");return}this.addressService.addAddress(this.newAddress).subscribe({next:t=>{console.log("\u2705 New address saved:",t),this.showSuccessAlert("Address added successfully!"),this.showNewAddressForm=!1,this.newAddress=this.getEmptyAddress()},error:t=>{console.error("\u274C Failed to save address:",t),this.showErrorAlert("Failed to save address. Please try again.")}})}isValidAddress(t){return!!(t.fullName&&t.phoneNumber&&t.addressLine1&&t.city&&t.state&&t.pincode)}onCancelNewAddress(){this.showNewAddressForm=!1,this.newAddress=this.getEmptyAddress()}onProceedWithAddress(){if(!this.selectedAddress){this.showErrorAlert("Please select a delivery address");return}console.log("\u2705 Proceeding with address:",this.selectedAddress),this.showAddressModal=!1,this.showPaymentMethodModal=!0,console.log("\u{1F4B3} Showing payment method modal")}onSelectPaymentMethod(t){this.selectedPaymentMethod=t,console.log("\u{1F4B3} Payment method selected:",t)}onConfirmPaymentMethod(){if(!this.selectedPaymentMethod){this.showErrorAlert("Please select a payment method");return}console.log("\u2705 Confirming payment method:",this.selectedPaymentMethod),this.selectedPaymentMethod==="ONLINE"?this.startOnlinePaymentBeforeCreatingOrder():this.createOrderAndProcessPayment()}onCancelPaymentMethod(){this.showPaymentMethodModal=!1,console.log("\u274C Payment method selection cancelled")}startOnlinePaymentBeforeCreatingOrder(){return L(this,null,function*(){if(!this.selectedAddress){this.showErrorAlert("Please select a delivery address");return}if(!this.razorpayKeyId){this.showErrorAlert("Razorpay Key ID is missing.");return}let t=this.getPayableAmount();if(!(t>0)){this.showErrorAlert("Invalid amount. Please check your order.");return}try{console.log("\u{1F4B3} Starting Razorpay payment for amount:",t),this.isPaymentLoading=!0,yield this.loadRazorpaySdk();let e=localStorage.getItem("userProfile"),s=e?JSON.parse(e):{},i=s?.name||"",a=s?.email||"",k={key:this.razorpayKeyId,amount:Math.round(t*100),currency:"INR",name:"Vitoxyz",description:"Order payment",prefill:{name:i,email:a,contact:this.selectedAddress?.phoneNumber||""},theme:{color:"#0d6efd"},handler:A=>{console.log("\u2705 Payment success:",A),this.isPaymentLoading=!1,this.createOrderAfterSuccessfulPayment(A,t)},modal:{ondismiss:()=>{console.log("\u274C Payment modal dismissed"),this.isPaymentLoading=!1,this.showErrorAlert("Payment was cancelled.")}}},P=new Razorpay(k);P.on("payment.failed",A=>{console.error("\u274C Payment failed:",A),this.isPaymentLoading=!1;let _e=A?.error?.description||"Payment failed. Please try again.";this.showErrorAlert(_e)}),P.open()}catch(e){console.error("Payment init error:",e),this.isPaymentLoading=!1,this.showErrorAlert("Unable to start payment. Please try again.")}})}createOrderAfterSuccessfulPayment(t,e){if(!t?.razorpay_payment_id){this.showErrorAlert("Invalid payment response. Please contact support.");return}if(!this.selectedAddress){this.showErrorAlert("No address selected");return}let s={paymentMethod:this.selectedPaymentMethod,shippingAddress:{fullName:this.selectedAddress.fullName,phoneNumber:this.selectedAddress.phoneNumber,addressLine1:this.selectedAddress.addressLine1,addressLine2:this.selectedAddress.addressLine2||"",landmark:this.selectedAddress.landmark||"",city:this.selectedAddress.city,state:this.selectedAddress.state,pincode:this.selectedAddress.pincode,addressType:this.selectedAddress.addressType},paymentDetails:{provider:"RAZORPAY",paymentId:t.razorpay_payment_id,orderId:t.razorpay_order_id||null,signature:t.razorpay_signature||null,amount:e}};console.log("\u{1F4E6} Creating order after payment:",s),this.isLoading=!0,this.orderService.createOrder(s).subscribe({next:i=>{this.isLoading=!1,console.log("\u2705 Order created after payment:",i),i.status&&i.data?(this.showSuccessAlert(`Payment successful! Order #${i.data.orderNumber} placed.`),this.cartService.clearCart().subscribe({next:()=>{console.log("\u{1F6D2} Cart cleared"),setTimeout(()=>this.router.navigate(["/orders"]),1500)},error:a=>{console.error("\u274C Cart clear failed:",a),this.router.navigate(["/orders"])}})):this.showErrorAlert("Payment succeeded but order creation failed. Please contact support.")},error:i=>{this.isLoading=!1,console.error("\u274C API error after payment:",i),this.showErrorAlert("Payment succeeded but order creation failed. Please contact support.")}})}createOrderAndProcessPayment(){if(!this.selectedAddress){this.showErrorAlert("No address selected");return}if(!this.orderService.isAuthenticated()){this.showErrorAlert("Please login to create order");return}console.log("\u{1F504} Creating order..."),this.isLoading=!0;let t={paymentMethod:this.selectedPaymentMethod,shippingAddress:{fullName:this.selectedAddress.fullName,phoneNumber:this.selectedAddress.phoneNumber,addressLine1:this.selectedAddress.addressLine1,addressLine2:this.selectedAddress.addressLine2||"",landmark:this.selectedAddress.landmark||"",city:this.selectedAddress.city,state:this.selectedAddress.state,pincode:this.selectedAddress.pincode,addressType:this.selectedAddress.addressType},specialInstructions:""};console.log("\u{1F4E6} Order data being sent:",t),this.orderService.createOrder(t).subscribe({next:e=>{console.log("\u2705 Order creation API response:",e),this.isLoading=!1,e.status&&e.data?(this.showSuccessAlert("Order created successfully!"),this.selectedPaymentMethod==="ONLINE"?setTimeout(()=>{this.processOnlinePayment(e.data)},1e3):this.handleCashOnDeliverySuccess(e.data)):(console.error("\u274C Order creation failed in API response:",e),this.showErrorAlert("Failed to create order. Please try again."))},error:e=>{console.error("\u274C Order creation API error:",e),this.isLoading=!1,e.status===401?(this.showErrorAlert("Session expired. Please login again."),localStorage.removeItem("authToken")):e.status===400?this.showErrorAlert("Invalid order data. Please check your cart."):this.showErrorAlert("Failed to create order. Please try again.")}})}processOnlinePayment(t){return L(this,null,function*(){try{if(!this.razorpayKeyId){this.showErrorAlert("Razorpay Key ID is missing.");return}let e=t.finalAmount||this.getPayableAmount();if(!(e>0)){this.showErrorAlert("Invalid amount. Please check your order.");return}console.log("\u{1F4B3} Starting online payment process for order:",t.orderNumber,"amount:",e),this.isPaymentLoading=!0,yield this.loadRazorpaySdk();let s=localStorage.getItem("userProfile"),i="",a="";if(s){let A=JSON.parse(s);i=A.name||"",a=A.email||""}let k={key:this.razorpayKeyId,amount:Math.round(e*100),currency:"INR",name:"Vitoxyz",description:`Order #${t.orderNumber}`,prefill:{name:i,email:a,contact:this.selectedAddress?.phoneNumber||""},theme:{color:"#0d6efd"},handler:A=>{this.onOnlinePaymentSuccess(A,e,t)},modal:{ondismiss:()=>{console.log("\u274C Payment modal dismissed"),this.isPaymentLoading=!1,this.showErrorAlert("Payment was cancelled. Your order is still created with Cash on Delivery.")}}},P=new Razorpay(k);P.on("payment.failed",A=>this.onOnlinePaymentFailed(A,t)),P.open()}catch(e){console.error("Payment init error:",e),this.showErrorAlert("Unable to start payment. Please try again."),this.isPaymentLoading=!1}})}handleCashOnDeliverySuccess(t){console.log("\u2705 Cash on Delivery order placed successfully:",t),this.showSuccessAlert(`Order #${t.orderNumber} placed successfully! You will pay \u20B9${t.finalAmount} on delivery.`),this.cartService.clearCart().subscribe({next:()=>{console.log("\u{1F6D2} Cart cleared after COD order"),setTimeout(()=>{this.router.navigate(["/orders"])},2e3)},error:e=>{console.error("\u274C Failed to clear cart after COD order:",e),this.router.navigate(["/orders"])}})}onOnlinePaymentSuccess(t,e,s){console.log("\u2705 Online payment success:",t),console.log("\u2705 Order details:",s),this.isPaymentLoading=!1,this.showSuccessAlert(`Payment successful! Order #${s.orderNumber} has been placed.`),this.cartService.clearCart().subscribe({next:()=>{console.log("\u{1F6D2} Cart cleared after successful payment"),setTimeout(()=>{this.router.navigate(["/orders"])},2e3)},error:i=>{console.error("\u274C Failed to clear cart after payment:",i),this.router.navigate(["/orders"])}})}onOnlinePaymentFailed(t,e){console.error("\u274C Online payment failed:",t),console.error("\u274C Order:",e),this.isPaymentLoading=!1;let s=t?.error?.description||"Payment failed. Please try again.";this.showErrorAlert(`${s} Your order is still created with Cash on Delivery.`)}loadRazorpaySdk(){return new Promise((t,e)=>{if(typeof Razorpay<"u"){t();return}let s=document.createElement("script");s.id="razorpay-checkout-js",s.src="https://checkout.razorpay.com/v1/checkout.js",s.async=!0,s.onload=()=>t(),s.onerror=()=>e(new Error("Failed to load Razorpay SDK.")),document.body.appendChild(s)})}onAuthClose(){console.log("\u274C Auth popup closed"),this.updateDebugInfo("Auth popup closed"),this.showAuthPopup=!1}getDiscount(t){return t.mrp&&t.mrp>t.price?Math.round((t.mrp-t.price)/t.mrp*100):0}getItemTotal(){return console.log("Cart data:",this.cart),!this.cart||!Array.isArray(this.cart)?0:this.cart.reduce((t,e)=>{let s=Number(e.mrp)||0,i=Number(e.count)||0;return t+s*i},0)}getTotalDiscount(){return this.cart.reduce((t,e)=>t+(e.mrp?e.mrp-e.price:0)*e.count,0)}getFinalAmount(){return this.getItemTotal()+this.shippingFee}getPayableAmount(){return this.getFinalAmount()}getTotalSavings(){return this.getTotalDiscount()}isCartEmpty(){return this.cart.length===0}getTotalItemsCount(){return this.cart.reduce((t,e)=>t+e.count,0)}continueShopping(){this.router.navigate(["/medicines"])}clearCart(){if(this.cart.length===0){this.showErrorAlert("Cart is already empty.");return}confirm("Are you sure you want to clear your entire cart?")&&this.cartService.clearCart().subscribe({next:()=>{this.showSuccessAlert("Cart cleared successfully!"),this.refreshCart()},error:t=>{console.error("\u274C Failed to clear cart:",t),this.showErrorAlert("Failed to clear cart. Please try again.")}})}onEditAddress(t){this.isEditingAddress=!0,this.editingAddress=V({},t),console.log("\u270F\uFE0F Editing address:",t)}onUpdateAddress(){if(!this.isValidAddress(this.editingAddress)){this.showErrorAlert("Please fill all required fields");return}if(!this.editingAddress.id){this.showErrorAlert("Invalid address ID");return}let t={fullName:this.editingAddress.fullName,phoneNumber:this.editingAddress.phoneNumber,addressLine1:this.editingAddress.addressLine1,addressLine2:this.editingAddress.addressLine2||"",landmark:this.editingAddress.landmark||"",city:this.editingAddress.city,state:this.editingAddress.state,pincode:this.editingAddress.pincode,addressType:this.editingAddress.addressType,isDefault:this.editingAddress.isDefault||!1};this.addressService.updateAddress(this.editingAddress.id,t).subscribe({next:e=>{console.log("\u2705 Address updated:",e),this.showSuccessAlert("Address updated successfully!"),this.isEditingAddress=!1,this.editingAddress=this.getEmptyAddress()},error:e=>{console.error("\u274C Failed to update address:",e),this.showErrorAlert("Failed to update address. Please try again.")}})}onDeleteAddress(t){if(t.isDefault){this.showErrorAlert("Cannot delete default address. Set another address as default first.");return}if(confirm(`Are you sure you want to delete this address?
${t.fullName}, ${t.city}`)){if(!t.id){this.showErrorAlert("Invalid address ID");return}this.addressService.deleteAddress(t.id).subscribe({next:e=>{console.log("\u2705 Address deleted:",e),this.showSuccessAlert("Address deleted successfully!"),this.selectedAddress?.id===t.id&&(this.selectedAddress=null)},error:e=>{console.error("\u274C Failed to delete address:",e),this.showErrorAlert("Failed to delete address. Please try again.")}})}}onCancelEdit(){this.isEditingAddress=!1,this.editingAddress=this.getEmptyAddress()}onCloseAddressModal(){this.showAddressModal=!1,this.showNewAddressForm=!1,this.isEditingAddress=!1,this.newAddress=this.getEmptyAddress(),this.editingAddress=this.getEmptyAddress()}static \u0275fac=function(e){return new(e||l)};static \u0275cmp=W({type:l,selectors:[["app-cart-items"]],decls:17,vars:8,consts:[[1,"container","CONSCls"],[1,"cart-scroll-container"],["class","text-center my-4",4,"ngIf"],[1,"my-4"],["class","cart-item",4,"ngFor","ngForOf"],["class","bill-summary ",4,"ngIf"],[3,"showAuthModal","authMode"],[1,"modal","fade","show","d-block",2,"background","rgba(0,0,0,0.5)"],[1,"text-center","my-4"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"mt-2"],[1,"btn","btn-primary","text-white","rounded-pill","mt-2",3,"click"],[1,"cart-item"],[1,"cart-item-image",3,"src","alt"],[1,"details"],[1,"remove",3,"click"],[1,"fi","fi-rs-trash","text-muted"],[1,"text-end"],[1,"price"],["class","strike",4,"ngIf"],["class","text-success",4,"ngIf"],[1,"btn","btn-sm","rounded-pill","btn","w-50"],[1,"text-white","btn","btn-sm","bg-none",3,"click"],["type","text","readonly","",1,"w-25","text-white","text-center",3,"value"],[1,"strike"],[1,"text-success"],[1,"bill-summary"],[1,"fw-bold","mb-3"],[1,"table","table-borderless"],[1,"text-end","text-success"],[1,"border-top"],["class","selected-address mb-3 p-2 border rounded ",4,"ngIf"],["class","selected-payment mb-3 p-2 border rounded ",4,"ngIf"],[1,"d-flex","justify-content-between"],[1,"btn","btn-outline","btn-sm","text-white","rounded-pill","payContBts",3,"click","disabled"],["class","spinner-border spinner-border-sm me-2",4,"ngIf"],[1,"btn","btn-outline","btn-sm","text-white","rounded-pill","payContBts","mt-2",3,"click","disabled"],[1,"selected-address","mb-3","p-2","border","rounded"],[1,"text-"],[1,"fw-bold"],[1,"small"],[1,"small","text-muted"],[1,"selected-payment","mb-3","p-2","border","rounded"],[1,"text-muted"],[1,""],[4,"ngIf"],[1,"spinner-border","spinner-border-sm","me-2"],[3,"loginSuccess","close","showAuthModal","authMode"],[1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button",1,"colseCls",3,"click"],[1,"bi","bi-x-lg"],[1,"modal-body"],["class","modal-footer",4,"ngIf"],["class","text-center py-4",4,"ngIf"],["class","address-card border rounded p-3 mb-3",3,"border-primary",4,"ngFor","ngForOf"],[1,"btn","btn-outline-primary","rounded-pill","text-light","w-100","mt-3",3,"click"],[1,"text-center","py-4"],[1,"address-card","border","rounded","p-3","mb-3"],[1,"d-flex","justify-content-between","align-items-start"],[1,"flex-grow-1"],[1,"form-check"],["type","radio",1,"radioCls","border-primary",3,"click","checked"],[1,"form-check-label","fw-bold"],["class","badge bg-secondary ms-2",4,"ngIf"],[1,"small","mt-1"],[1,"small","text-muted","mt-1"],[1,"btn-group","btn-group-sm","ms-3"],["title","Edit Address",1,"btn","btn-outline-primary",3,"click"],[1,"bi","bi-pencil","text-light"],["title","Delete Address",1,"btn","btn-outline-danger",3,"click","disabled"],[1,"bi","bi-trash"],[1,"badge","bg-secondary","ms-2"],[1,"row"],[1,"col-md-6"],[1,"mb-3"],[1,"form-label"],["type","text","name","fullName","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","tel","name","phoneNumber","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","text","name","addressLine1","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","text","name","addressLine2",1,"form-control",3,"ngModelChange","ngModel"],["type","text","name","landmark",1,"form-control",3,"ngModelChange","ngModel"],[1,"col-md-4"],["type","text","name","city","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","text","name","state","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","text","name","pincode","required","",1,"form-control",3,"ngModelChange","ngModel"],["name","addressType",1,"form-select",3,"ngModelChange","ngModel"],["value","HOME"],["value","OFFICE"],["value","OTHER"],[1,"form-check","mb-3"],["type","checkbox","name","isDefault","id","setAsDefault",1,"form-check-input",3,"ngModelChange","ngModel"],["for","setAsDefault",1,"form-check-label"],[1,"d-flex","gap-2"],["type","button",1,"btn","btn-primary","rounded-pill","text-light","flex-fill",3,"click"],["type","button",1,"btn","rounded-pill","text-light",3,"click"],["type","checkbox","name","isDefault","id","editSetAsDefault",1,"form-check-input",3,"ngModelChange","ngModel"],["for","editSetAsDefault",1,"form-check-label"],[1,"modal-footer"],["type","button",1,"btn","btn-primary","rounded-pill","text-white",3,"click"],["type","button",1,"btn","btn-primary","rounded-pill","text-white",3,"click","disabled"],[1,"modal-dialog","modal-md"],[1,"bi","bi-x-lg","text-light"],[1,"payment-methods"],["class","payment-method-card border rounded p-3 mb-3 cursor-pointer",3,"border-primary","click",4,"ngFor","ngForOf"],[1,"order-summary","border-top","pt-3","mt-3"],[1,"d-flex","justify-content-between","fw-bold","border-top","pt-2","mt-2"],["type","button",1,"btn","btn-primary","text-light","rounded-pill",3,"click"],["type","button",1,"btn","btn-primary","text-light","rounded-pill",3,"click","disabled"],[1,"payment-method-card","border","rounded","p-3","mb-3","cursor-pointer",3,"click"],["type","radio",1,"form-check-input",3,"click","checked"]],template:function(e,s){e&1&&(x(0,"app-header"),n(1,"div",0)(2,"div",1),b(3,fe,6,0,"div",2),n(4,"div",3)(5,"h5"),o(6),r(),n(7,"small"),o(8,"Items not requiring prescription"),r()(),b(9,xe,5,0,"div",2)(10,Ae,21,9,"div",4),r(),b(11,Ie,33,10,"div",5),r(),I(12,Ee,1,2,"app-authorization",6),I(13,Be,13,5,"div",7),I(14,Re,34,5,"div",7),x(15,"app-footer")(16,"app-mobile-footer-nav")),e&2&&(d(3),u("ngIf",s.isLoading),d(3),f("",s.cart.length," Item(s) in Cart"),d(3),u("ngIf",s.cart.length===0&&!s.isLoading),d(),u("ngForOf",s.cart),d(),u("ngIf",s.cart.length>0),d(),E(s.showAuthPopup?12:-1),d(),E(s.showAddressModal?13:-1),d(),E(s.showPaymentMethodModal?14:-1))},dependencies:[de,$,R,q,ce,oe,me,ue,re,X,te,ie,Y,Q,ee,K,G,ne,Z,J,le],styles:['@charset "UTF-8";.action-add[_ngcontent-%COMP%]{position:absolute;right:0}.action-add[_ngcontent-%COMP%]:hover{border-radius:20px!important;color:#fff!important}.action[_ngcontent-%COMP%]{position:absolute;left:0}.action[_ngcontent-%COMP%]:hover{border-radius:20px!important;color:#fff!important}input[_ngcontent-%COMP%]{border-radius:20px!important;outline:none!important;border:none!important;background-color:transparent!important}input[_ngcontent-%COMP%]:focus-visible{background-color:transparent!important;outline:none!important;box-shadow:none!important;border:none!important}.radioCls[_ngcontent-%COMP%]{border-radius:10px;margin-left:-22px;margin-right:6px}.radioCls[_ngcontent-%COMP%]:focus-visible{background-color:transparent!important;outline:#db9280!important;box-shadow:none!important;border:none!important}.colseCls[_ngcontent-%COMP%]{margin:auto 1px auto auto;border:0px;border-color:#db9280;border-radius:3px;color:#fff}td[_ngcontent-%COMP%]{font-size:12px}.border-top[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:16px!important}@media (max-width: 576px){.quantity[_ngcontent-%COMP%]{display:flex!important;justify-content:space-between}.quantity[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{margin-left:10px;min-width:100px!important}.cart-item[_ngcontent-%COMP%]   .text-end[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-end}.cart-item[_ngcontent-%COMP%]   .btn.w-50[_ngcontent-%COMP%]{width:100%!important;display:flex;align-items:center;justify-content:center;padding:4px 0;margin-top:5px}.cart-item[_ngcontent-%COMP%]   .btn.w-50[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:4px 8px!important;font-size:16px!important;min-width:28px}.cart-item[_ngcontent-%COMP%]   .btn.w-50[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:35px!important;margin:0 4px!important;font-size:14px}}@media (max-width: 320px){.quantity[_ngcontent-%COMP%]{display:flex!important;justify-content:space-between}.quantity[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{margin-left:10px;min-width:100px!important}.cart-item[_ngcontent-%COMP%]   .text-end[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-end}.cart-item[_ngcontent-%COMP%]   .btn.w-50[_ngcontent-%COMP%]{width:100%!important;display:flex;align-items:center;justify-content:center;padding:4px 0;margin-top:5px}.cart-item[_ngcontent-%COMP%]   .btn.w-50[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:4px 8px!important;font-size:16px!important;min-width:28px}.cart-item[_ngcontent-%COMP%]   .btn.w-50[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:35px!important;margin:0 4px!important;font-size:14px}.contBtnCls[_ngcontent-%COMP%]{column-gap:23px}.payContBts[_ngcontent-%COMP%]{font-size:small}}.cart-item[_ngcontent-%COMP%]{display:flex;align-items:center;padding:15px 0;border-bottom:1px solid #eee}.cart-item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:70px;height:auto;border-radius:8px}.cart-item[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]{flex:1;margin-left:15px}.cart-item[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{font-size:14px;font-weight:500;margin:0 0 5px}.cart-item[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:#6c757d;font-size:12px}.cart-item[_ngcontent-%COMP%]   .remove[_ngcontent-%COMP%]{font-size:13px;color:#dc3545;cursor:pointer;margin-top:4px}.cart-item[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]{font-size:14px;margin-bottom:8px}.cart-item[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]   .strike[_ngcontent-%COMP%]{text-decoration:line-through;margin-left:6px;font-size:13px}.cart-item[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]   .text-success[_ngcontent-%COMP%]{margin-left:6px;font-size:13px;font-weight:500}.qty-box[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-end}.qty-box[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:1px solid #db9280;background:transparent;color:#000;padding:2px 8px;font-size:16px;border-radius:8px;cursor:pointer}.qty-box[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#db9280;color:#fff}.qty-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:40px;height:32px;text-align:center;margin:0 5px;border:1px solid #ddd;border-radius:4px}.spinner[_ngcontent-%COMP%]{width:10px;border:2px solid #ff6b6b;border-top-color:transparent;border-radius:50%;animation:_ngcontent-%COMP%_spin .8s linear infinite}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.cart-scroll-container[_ngcontent-%COMP%]::-webkit-scrollbar-track{background-color:transparent}.CONSCls[_ngcontent-%COMP%]{display:flex;align-items:flex-start;justify-content:space-between;gap:24px;width:100%;box-sizing:border-box}.CONSCls[_ngcontent-%COMP%]   .cart-scroll-container[_ngcontent-%COMP%]{flex:1;max-height:calc(100vh - 90px);overflow-y:auto;padding-right:8px}.cart-scroll-container[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.cart-scroll-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#feb37c;border-radius:3px}.CONSCls[_ngcontent-%COMP%]   .bill-summary[_ngcontent-%COMP%]{width:450px;flex:0 0 450px;position:sticky;top:20px;background:#fbf8eb;box-shadow:0 2px 8px #0000000a;border-radius:6px;padding:16px}@media (max-width: 992px){.CONSCls[_ngcontent-%COMP%]{display:block}.CONSCls[_ngcontent-%COMP%]   .cart-scroll-container[_ngcontent-%COMP%]{max-height:none;overflow:visible;padding-right:0}.CONSCls[_ngcontent-%COMP%]   .bill-summary[_ngcontent-%COMP%]{width:100%;position:static;margin-top:16px}}@media (max-width: 1200px){.bill-summary[_ngcontent-%COMP%]{width:380px;flex:0 0 380px}}@media (max-width: 992px){.CONSCls[_ngcontent-%COMP%]{flex-direction:column}.bill-summary[_ngcontent-%COMP%]{width:100%;position:static;margin-top:16px}.cart-scroll-container[_ngcontent-%COMP%]{max-height:none;overflow:visible}}@media (max-width: 768px){.cart-item[_ngcontent-%COMP%]{flex-direction:row;align-items:flex-start}.cart-item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:65px}.qty-box[_ngcontent-%COMP%]{justify-content:flex-start}}']})};export{he as CartItems};
