<div *ngIf="showToast" class="custom-toast" [class]="'custom-toast--' + toastType">
  <div class="toast-content">
    <span class="toast-icon">
      {{ toastType === 'success' ? '✓' : '✕' }}
    </span>
    <span class="toast-message">{{ toastMessage }}</span>
    <button class="toast-close" (click)="showToast = false">
      ×
    </button>
  </div>
</div>

<div class="product-carousel-section">
  <div class="section-header">
    <h2>{{ title }}</h2>
    <span class="seebtncls" (click)="seeAllProducts()">
      See All
    </span>
  </div>

  <div class="carousel-container">
    <button class="side-nav-button left-button" (click)="scrollCarousel('left')">
      &#10094;
    </button>
    <button class="side-nav-button right-button" (click)="scrollCarousel('right')">
      &#10095;
    </button>

    <div #productCarouselWrapper class="carousel-wrapper">
      <ng-container *ngIf="products$ | async as products">
        <mat-card
          *ngFor="let product of products"
          class="product-card mat-elevation-z4"
          (click)="goToProduct(product)"
          style="cursor: pointer;"
        >
          <img
            mat-card-image
            [src]="getFirstImageUrl(product.imageUrl)"
            [alt]="product.name"
            class="product-image"
          />

          <mat-card-content>
            <div class="rating-badge">4.4 &#9733;</div>

            <h3 class="product-name">{{ product.name }}</h3>
            
            <!-- Show actual product form from backend, hide if not available -->
            <p class="product-form" *ngIf="product.packaging">{{ product.packaging }}</p>
            
            <!-- Show actual prices and discount from backend -->
            <div class="price-details-group">
                <div class="price-info">
                    <!-- Actual price from backend -->
                    <p class="current-price" *ngIf="product.mrp">
                      {{ product.mrp | currency:'INR':'symbol':'1.0-0' }}
                    </p>
                    
                    <!-- Show message if price not available -->
                    <p class="current-price no-price" *ngIf="!product.mrp">
                      Price not available
                    </p>
                 
                </div>
            </div>
            
            <button 
              class="add-button" 
              (click)="addToCart(product, $event)"
            >
              Add
            </button>
          </mat-card-content>
        </mat-card>
      </ng-container>
    </div>
  </div>
</div>
