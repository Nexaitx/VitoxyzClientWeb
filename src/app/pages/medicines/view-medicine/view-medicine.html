<app-header></app-header>
<!-- <div class="container" *ngIf="isLoaded && !hasError; else loadingOrError">

  <p class="text-muted my-2">
    Home | <span class="text-primary link" (click)="goToMedicines()">Medicine</span> | View Medicine
  </p>

  <div class="row my-5">
    <div class="col-3 col-sm-2 col-md-2 col-lg-1">
      <div class="border rounded p-2 my-2" style="width: 100%;">
        <img src="../../../../assets/dettol.png" alt="small-preview" class="img-fluid">
      </div>
    </div>

    <div class="col-9 col-sm-4 col-md-4 col-lg-4">
      <img src="../../../../assets/dettol.png" class="img-fluid w-100" alt="main-preview">
    </div>

    <div class="col-12 col-sm-6 col-md-6 col-lg-3 mt-4 mt-lg-0">
      <h6>{{ medicine['Product Name'] }}</h6>
      <div>
        <span *ngIf="medicine['Rating']" class="bg-warning rounded text-white rating px-2 py-1">
          {{ medicine['Rating'] }} <i class="bi bi-star-fill"></i>
        </span>
        {{ medicine['medicine_type'] }}
      </div>
      <br>

      <div class="d-flex flex-wrap gap-3">
        <div class="border boxes border-secondary bg-success p-2 rounded flex-grow-1">
          <p class="headings mb-2">Genuine</p>
          <span>Authenticity Assurance</span>
        </div>
        <div class="border boxes border-secondary bg-success p-2 rounded flex-grow-1">
          <p class="headings mb-2">{{ medicine['Rating'] || '-' }}</p>
          <span>{{ medicine['Some_Rating_Count_Label'] || '0' }} rating</span>
        </div>
      </div>

      <div class="mt-4">
        <p class="headings">Product highlights:</p>
        <ul>
          <li *ngIf="medicine['primary_use']">{{ medicine['primary_use'] }}</li>
          <li *ngIf="medicine['common_side_effect']">{{ medicine['common_side_effect'] }}</li>
          <li *ngIf="medicine['salt_composition']">{{ medicine['salt_composition'] }}</li>
        </ul>

        <p>Prescription Required: {{ medicine['prescription_required'] ? 'Yes' : 'No' }}</p>
      </div>
    </div>

    <div class="col-12 col-sm-12 col-md-12 col-lg-4 mt-4 mt-lg-0">
      <div class="card">
        <div class="card-body">
          <div class="border cartBoxes border-secondary my-2 p-3 rounded d-flex align-items-center">
            <input type="radio" name="priceOption" checked class="form-check-input me-2" [value]="medicine['mrp']">
            <span class="headings">{{ medicine['mrp'] }} <strong><span class="text-primary"> - -</span></strong></span>
          </div>
          <div class="text-center text-info mt-4">
            <span>{{ medicine['Packaging Detail'] || '' }} </span>
          </div>
          <button class="btn btn-primary rounded-pill btn-sm text-light w-100" (click)="addToCart()">Add to Cart</button>
        </div>
      </div>
    </div>
  </div>

  <div class="description my-4">
    <p class="mb-1">{{ medicine['introduction'] }}</p>
    <p class="headings mb-1">{{ medicine['description'] }}</p>

    <p class="headings mb-1">How to use:</p>
    <p class="mb-1">{{ medicine['how_to_use'] }}</p>

    <p class="headings mb-1">Safety Advice:</p>
    <p class="mb-1" [innerHTML]="medicine['safety_advise']"></p>

    <p class="headings mb-1">Common Side Effects:</p>
    <p class="mb-1">{{ medicine['common_side_effect'] }}</p>

    <p class="headings mb-1">Storage:</p>
    <p class="mb-1">{{ medicine['storage'] }}</p>
  </div>

</div> -->

    <ng-container *ngIf="medicineType === 'health' && isLoaded && !hasError; else loadingOrError">

  <div class="container mt-4 product-detail">
    <div class="row">

      <!-- Left Section: Thumbnails + Main Image -->
      <div class="col-md-6 d-flex">
        <!-- Thumbnails -->
        <div class="d-flex flex-column me-3">
          <img *ngFor="let img of medicine.images"
               [src]="img"
               class="thumb-img mb-2"
               (click)="selectedImage = img"
               style="width:60px; height:60px; cursor:pointer; border:1px solid #ddd;" />
        </div>

        <!-- Main Image -->
        <div>
          <img [src]="selectedImage"
               class="main-img"
               style="width:400px; height:400px; object-fit:contain; border:1px solid #ddd;" />
        </div>
      </div>

      <!-- Right Section: Details -->
      <div class="col mt-3">
        <h3>{{ medicine.name }}</h3>
        <p class="manufacturer">{{ medicine.manufacturer }}</p>

        <div class="rating mb-2 ">
          <span class="badge bg-warning text-dark">{{ medicine.rating }}★</span>
          <small>{{ medicine.reviewsCount }} Ratings & {{ medicine.reviewTextCount }} Reviews</small>
        </div>

        <h5>Product highlights</h5>
        <ul>
          <li *ngFor="let point of medicine.highlights">{{ point }}</li>
        </ul>

        <div class="price-box my-2 mt-3">
          <h4 class="text-primary">
            ₹{{ medicine.price }}
            <small class="text-muted">₹{{ medicine.mrp }}</small>
            <span class="text-success" *ngIf="medicine.discount">{{ medicine.discount }}% off</span>
          </h4>
        </div>

        <div class="quantity mb-3">
          <label>Qty:</label>
          <select [(ngModel)]="selectedQty" class="form-select w-auto d-inline-block ms-2">
            <option *ngFor="let qty of medicine.packSizes" [value]="qty">{{ qty }}</option>
          </select>
        </div>

        <button class="btn btn-primary btn-lg mb-3 mt-3" (click)="addToCart()">Add to cart</button>

        <div class="delivery mt-3">
          <strong>Get by {{ medicine.deliveryTime }}</strong>
        </div>
      </div>

    </div> <!-- End row -->

    <!-- Extra info below -->
    <div class="description my-4">
      <p class="mb-1">{{ medicine.introduction }}</p>
      <p class="headings mb-1">{{ medicine.description }}</p>

      <p class="headings mb-1">How to use:</p>
      <p class="mb-1">{{ medicine.howToUse }}</p>

      <p class="headings mb-1">Safety Advice:</p>
      <p class="mb-1" [innerHTML]="medicine.safetyAdvise"></p>

      <p class="headings mb-1">Common Side Effects:</p>
      <p class="mb-1">{{ medicine.commonSideEffect }}</p>

      <p class="headings mb-1">Storage:</p>
      <p class="mb-1">{{ medicine.storage }}</p>
    </div>

  </div> <!-- End container -->
</ng-container>



<ng-container *ngIf="medicineType === 'otc' && isLoaded && !hasError; else loadingOrError">

<div class="container mt-4 product-detail">
  <div class="row">
    <!-- Left Images -->
   

    <div class="col-md-6 d-flex">
        <!-- Thumbnails -->
        <div class="d-flex flex-column me-3">
          <img *ngFor="let img of product.images"
               [src]="img"
               class="thumb-img mb-2"
               (click)="selectedImage = img"
               style="width:60px; height:60px; cursor:pointer; border:1px solid #ddd;" />
        </div>

        <!-- Main Image -->
        <div>
          <img [src]="selectedImage"
               class="main-img"
               style="width:400px; height:400px; object-fit:contain; border:1px solid #ddd;" />
        </div>
      </div>
    <!-- Details -->
    <div class="col-md-6">
      <h3>{{ product.name }}</h3>
      <p class="manufacturer">{{ product.manufacturer }}</p>

      <div class="rating">
        <span class="badge  bg-warning text-dark">{{ product.rating }}★</span>
        <small>{{ product.reviewsCount }} Ratings & {{ product.reviewTextCount }} Reviews</small>
      </div>

      <h5 class="mt-3">Product highlights</h5>
      <ul>
        <li *ngFor="let point of product.highlights">{{ point }}</li>
      </ul>

      <div class="price-box">
        <h4 class="text-primary">₹{{ product.price }} <small class="text-muted">₹{{ product.mrp }}</small> <span class="text-success">{{ product.discount }}% off</span></h4>
      </div>

      <div class="quantity">
        <label>Qty:</label>
        <select [(ngModel)]="selectedQty">
          <option *ngFor="let qty of product.packSizes" [value]="qty">{{ qty }}</option>
        </select>
      </div>

      <button class="btn btn-primary btn-lg mt-3" (click)="addToCarOtc()">Add to cart</button>

      <div class="delivery mt-3">
        <strong>Get by {{ product.deliveryTime }}</strong>
      </div>
    </div>
  </div>
  <div class="description my-4">
      <p class="mb-1">{{ product.introduction }}</p>
      <p class="headings mb-1">{{ product.description }}</p>

      <p class="headings mb-1">How to use:</p>
      <p class="mb-1">{{ product.howToUse }}</p>

      <p class="headings mb-1">Safety Advice:</p>
      <p class="mb-1" [innerHTML]="product.safetyAdvise"></p>

      <p class="headings mb-1">Common Side Effects:</p>
      <p class="mb-1">{{ product.commonSideEffect }}</p>

      <p class="headings mb-1">Storage:</p>
      <p class="mb-1">{{ product.storage }}</p>
    </div>
</div>
</ng-container>


<ng-template #loadingOrError>
  <p *ngIf="!isLoaded">Loading medicine details…</p>
  <p *ngIf="isLoaded && hasError">Could not load medicine details.</p>
</ng-template>




<!-- Static data below -->
<!-- <div class="container">
    <p class="text-muted my-2">Home | <span class="text-primary link" (click)="goToMedicines()">Medicine</span> | View
        Medicine</p>
    <div class="row my-5">
        <div class="col-3 col-sm-2 col-md-2 col-lg-1">
            <div class="border rounded p-2 my-2" style="width: 100%;">
                <img src="../../../../assets/dettol.png" alt="small-preview" class="img-fluid">
            </div>
            <div class="border rounded p-2 my-2" style="width: 100%;">
                <img src="../../../../assets/dettol.png" alt="small-preview" class="img-fluid">
            </div>
            <div class="border rounded p-2 my-2" style="width: 100%;">
                <img src="../../../../assets/dettol.png" alt="small-preview" class="img-fluid">
            </div>
            <div class="border rounded p-2 my-2" style="width: 100%;">
                <img src="../../../../assets/dettol.png" alt="small-preview" class="img-fluid">
            </div>
        </div>

        <div class="col-9 col-sm-4 col-md-4 col-lg-4">
            <img src="../../../../assets/dettol.png" class="img-fluid w-100" alt="main-preview">
        </div>

        <div class="col-12 col-sm-6 col-md-6 col-lg-3 mt-4 mt-lg-0">
            <h6>Organic India Moringa Capsule | Supports Energy Levels, Stamina & Vitality</h6>
            <div>
                <span class="bg-warning rounded text-white rating px-2 py-1">4.4 <i class="bi bi-star-fill"></i></span>
                Stomach Care
            </div><br>

            <div class="d-flex flex-wrap gap-3">
                <div class="border boxes border-secondary bg-success p-2 rounded flex-grow-1">
                    <p class="headings mb-2">Genuine</p>
                    <span>Authenticity Assurance</span>
                </div>
                <div class="border boxes border-secondary bg-success p-2 rounded flex-grow-1">
                    <p class="headings mb-2">4.4</p>
                    <span>502 rating</span>
                </div>
            </div>

            <div class="mt-4">
                <p class="headings">Product highlights:</p>
                <ul>
                    <li>Rich in protein and fibre</li>
                    <li>Healthier alternative for breakfast</li>
                    <li>Manages appetite and hunger pangs</li>
                </ul>
            </div>
        </div>

        <div class="col-12 col-sm-12 col-md-12 col-lg-4 mt-4 mt-lg-0">
            <div class="card">
                <div class="card-body">
                    <div class="border cartBoxes border-secondary my-2 p-3 rounded d-flex align-items-center">
                        <input type="radio" name="priceOption" checked class="form-check-input me-2" value="399">
                        <span class="headings">399&nbsp; <strong><span class="text-primary">14% off with
                                    coupon</span></strong></span>
                    </div>
                    <div class="border cartBoxes border-secondary my-2 p-3 rounded d-flex align-items-center">
                        <input type="radio" name="priceOption" class="form-check-input me-2" value="399">
                        <span class="headings">399&nbsp; <strong><span class="text-primary">14% off with
                                    coupon</span></strong></span>
                    </div>
                    <div class="text-center text-info mt-4">
                        <span>60 Capsules</span>
                    </div>
                    <button class="btn btn-primary rounded-pill btn-sm text-light w-100" (click)="addToCart()">Add to
                        Cart</button>
                </div>
            </div>
        </div>
    </div>

    <div class="description my-4">
        <p class="mb-1">Information about Acne Care Combo of Cetaphil Oily Skin Cleanser 125ml and Klm Klin Face Wash
            100ml</p>
        <p class="headings mb-1">Information about Acne Care Combo of Cetaphil Oily Skin Cleanser 125ml and Klm Klin
            Face Wash
            100ml</p>
        <p class="mb-1"><span class="headings">Cetaphil Oily Skin Cleanser 125ml</span>is a non-comedogenic, pH balanced
            and non-drying cleanser.
            It is an oily skin cleanser that can help in cleansing oily and acne-prone skin. Its gentle foaming action
            can help in reducing oils, dirt and makeup on the skin without leaving the skin dry. It does not leave any
            irritating residue on the skin. It is a soap-free and hypoallergenic cleanser. The low-lather gel deep
            cleans and minimizes the appearance of pores without stripping the skin of natural moisture. It is paraben
            and mineral oil free.
        </p>
        <p class="mb-1">Klm Klin Face Wash 100ml is a daily cleanser suitable for oily and acnegenic skin. It may help
            remove excess
            oil from the skin and reduce the formation of acne and pimples. It gently cleanses the skin and unclogs
            clogged pores which may lead to acne formation. Regular use can help exfoliate the skin and remove dead skin
            cells accumulated in the pores. It gives a fresh and rejuvenated feeling.</p>

        <p class="headings mb-1">Key Ingredients:</p>
        <p class="headings mb-1">Cetaphil Oily Skin Cleanser 125ml</p>
        <p class="mb-1">Purified Water, PEG-200 Hydrogenated Glyceryl Palmate & PEG-7 Glyceryl Cocoate, Sodium Lauroyl
            Sarcosinate,
            Acrylates/Steareth-20 Methacrylate Copolymer, Glycerol, Sodium Laureth Sulfate, Butylene Glycol,
            Phenoxyethanol, Dexpanthenol, Methyl Parahydroxybenzoate, PEG-60 Hydrogenated Castor Oil, Fragrance,
            Disodium EDTA</p>
        <p class="headings mb-1">Klm Klin Face Wash 100ml</p>
        <p class="mb-1">Water, Sodium Lauroyl Sarcosinate, Cocamidopropyl Betaine, Glycerin, Acrylates/Steareth-20
            Methacrylate
            Copolymer, Sodium Chloride, Citric Acid, Phenoxyethanol, Dexpanthenol, Methyl Parahydroxybenzoate,
            PEG-60 Hydrogenated Castor Oil, Fragrance, Disodium EDTA</p>
        <p class="headings mb-1">Key Benefits:</p>
        <p class="headings mb-1">Cetaphil Oily Skin Cleanser 125ml</p>
        <ul>
            <li>Gently cleanses oily and acne-prone skin</li>
            <li>Non-comedogenic and pH balanced</li>
            <li>Removes dirt, oil, and makeup without drying</li>
        </ul>
        <p class="headings mb-1">Klm Klin Face Wash 100ml</p>
        <ul>
            <li>Helps reduce acne and pimples</li>
            <li>Unclogs pores and exfoliates skin</li>
            <li>Provides a fresh and rejuvenated feeling</li>
        </ul>
        <p class="headings mb-1">Directions For Use:</p>
        <p class="headings mb-1">Cetaphil Oily Skin Cleanser 125ml</p>
        <p class="mb-1">Apply to skin, gently massage and rinse.</p>
        <p class="headings mb-1">Klm Klin Face Wash 100ml</p>
        <ul>
            <li>Apply to wet skin, massage gently and rinse.</li>
            <li>Allow it to remain for 20 to 30 seconds</li>
        </ul>
        <p class="headings mb-1">Safety Information:</p>
        <p class="mb-1">For external use only. Avoid contact with eyes. If contact occurs, rinse thoroughly with water.
            Keep out of
            reach of children. If swallowed, seek medical help.</p>

    </div>


    <div class="rating">
        <h5>Ratings & Reviews (273)</h5>
        <p>Summary</p>
        <div class="d-flex w-100">
            <div class="w-25 me-4">
                <div class="d-flex align-items-center w-100">
                    <span>5</span>&nbsp; <div class="progress w-100" role="progressbar" aria-label="Warning example"
                        aria-valuenow="75" aria-valuemin="0" aria-valuemax="100">
                        <div class="progress-bar bg-warning" style="width: 75%"></div>
                    </div>
                </div>

                <div class="d-flex align-items-center w-100">
                    <span>4</span>&nbsp; <div class="progress  w-100 my-2" role="progressbar"
                        aria-label="Warning example" aria-valuenow="75" aria-valuemin="0" aria-valuemax="100">
                        <div class="progress-bar bg-warning" style="width: 45%"></div>
                    </div>
                </div>

                <div class="d-flex align-items-center w-100">
                    <span>3</span>&nbsp; <div class="progress  w-100 my-2" role="progressbar"
                        aria-label="Warning example" aria-valuenow="75" aria-valuemin="0" aria-valuemax="100">
                        <div class="progress-bar bg-warning" style="width: 35%"></div>
                    </div>
                </div>

                <div class="d-flex align-items-center w-100">
                    <span>2</span>&nbsp; <div class="progress w-100 my-2" role="progressbar"
                        aria-label="Warning example" aria-valuenow="75" aria-valuemin="0" aria-valuemax="100">
                        <div class="progress-bar bg-warning" style="width: 25%"></div>
                    </div>
                </div>
                <div class="d-flex align-items-center w-100">
                    <span>1</span>&nbsp; <div class="progress w-100 my-2" role="progressbar"
                        aria-label="Warning example" aria-valuenow="75" aria-valuemin="0" aria-valuemax="100">
                        <div class="progress-bar bg-warning" style="width: 5%"></div>
                    </div>
                </div>
            </div>

            <div>
                <h4 class="mn-0">4.5 <i class="bi bi-star-fill text-warning"></i></h4>
                <p class="text-info">273 reviews</p>

                <h4 class="mt-2 mb-0">88%</h4>
                <p class="text-info">Recommended</p>
            </div>
        </div>

    </div>
</div> -->

<app-footer></app-footer>