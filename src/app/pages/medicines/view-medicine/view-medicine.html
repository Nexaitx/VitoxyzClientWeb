<app-header></app-header>


    <ng-container *ngIf="medicineType === 'health' && isLoaded && !hasError; else loadingOrError">

  <div class="container mt-4 product-detail">
    <div class="row">

      <!-- Left Section: Thumbnails + Main Image -->
      <div class="col-md-6 d-flex">
        <!-- Thumbnails -->
        <div class="d-flex flex-column me-3">
          <img *ngFor="let img of medicine.images"
               [src]="img"
               class="thumb-img mb-2"
               (click)="selectedImage = img"
               style="width:60px; height:60px; cursor:pointer; border:1px solid #ddd;" />
        </div>

        <!-- Main Image -->
        <div>
          <img [src]="selectedImage"
               class="main-img"
               style="width:400px; height:400px; object-fit:contain; border:1px solid #ddd;" />
        </div>
      </div>

      <!-- Right Section: Details -->
      <div class="col mt-3">
        <h3>{{ medicine.name }}</h3>
        <p class="manufacturer">{{ medicine.manufacturer }}</p>

        <div class="rating mb-2 ">
          <span class="badge bg-warning text-dark">{{ medicine.rating }}★</span>
          <small>{{ medicine.reviewsCount }} Ratings & {{ medicine.reviewTextCount }} Reviews</small>
        </div>

        <h5>Product highlights</h5>
        <ul>
          <li *ngFor="let point of medicine.highlights">{{ point }}</li>
        </ul>

        <div class="price-box my-2 mt-3">
          <h4 class="text-primary">
            ₹{{ medicine.price }}
            <small class="text-muted">₹{{ medicine.mrp }}</small>
            <span class="text-success" *ngIf="medicine.discount">{{ medicine.discount }}% off</span>
          </h4>
        </div>

        <div class="quantity mb-3">
          <label>Qty:</label>
          <select [(ngModel)]="selectedQty" class="form-select w-auto d-inline-block ms-2">
            <option *ngFor="let qty of medicine.packSizes" [value]="qty">{{ qty }}</option>
          </select>
        </div>

        <button class="btn btn-primary btn-lg mb-3 mt-3" (click)="addToCart()">Add to cart</button>

        <div class="delivery mt-3">
          <strong>Get by {{ medicine.deliveryTime }}</strong>
        </div>
      </div>

    </div> <!-- End row -->

    <!-- Extra info below -->
    <div class="description my-4">
      <p class="mb-1">{{ medicine.introduction }}</p>
      <p class="headings mb-1">{{ medicine.description }}</p>

      <p class="headings mb-1">How to use:</p>
      <p class="mb-1">{{ medicine.howToUse }}</p>

      <p class="headings mb-1">Safety Advice:</p>
      <p class="mb-1" [innerHTML]="medicine.safetyAdvise"></p>

      <p class="headings mb-1">Common Side Effects:</p>
      <p class="mb-1">{{ medicine.commonSideEffect }}</p>

      <p class="headings mb-1">Storage:</p>
      <p class="mb-1">{{ medicine.storage }}</p>
    </div>

  </div> <!-- End container -->
</ng-container>



<ng-container *ngIf="medicineType === 'otc' && isLoaded && !hasError; else loadingOrError">

<div class="container mt-4 product-detail">
  <div class="row">
    <!-- Left Images -->
   

    <div class="col-md-6 d-flex">
        <!-- Thumbnails -->
        <div class="d-flex flex-column me-3">
          <img *ngFor="let img of product.images"
               [src]="img"
               class="thumb-img mb-2"
               (click)="selectedImage = img"
               style="width:60px; height:60px; cursor:pointer; border:1px solid #ddd;" />
        </div>

        <!-- Main Image -->
        <div>
          <img [src]="selectedImage"
               class="main-img"
               style="width:400px; height:400px; object-fit:contain; border:1px solid #ddd;" />
        </div>
      </div>
    <!-- Details -->
    <div class="col-md-6">
      <h3>{{ product.name }}</h3>
      <p class="manufacturer">{{ product.manufacturer }}</p>

      <div class="rating">
        <span class="badge  bg-warning text-dark">{{ product.rating }}★</span>
        <small>{{ product.reviewsCount }} Ratings & {{ product.reviewTextCount }} Reviews</small>
      </div>

      <h5 class="mt-3">Product highlights</h5>
      <ul>
        <li *ngFor="let point of product.highlights">{{ point }}</li>
      </ul>

      <div class="price-box">
        <h4 class="text-primary">₹{{ product.price }} <small class="text-muted">₹{{ product.mrp }}</small> <span class="text-success">{{ product.discount }}% off</span></h4>
      </div>

      <div class="quantity">
        <label>Qty:</label>
        <select [(ngModel)]="selectedQty">
          <option *ngFor="let qty of product.packSizes" [value]="qty">{{ qty }}</option>
        </select>
      </div>

      <button class="btn btn-primary btn-lg mt-3" (click)="addToCartOtc()">Add to cart</button>

      <div class="delivery mt-3">
        <strong>Get by {{ product.deliveryTime }}</strong>
      </div>
    </div>
  </div>
  <div class="description my-4">
      <p class="mb-1">{{ product.introduction }}</p>
      <p class="headings mb-1">{{ product.description }}</p>

      <p class="headings mb-1">How to use:</p>
      <p class="mb-1">{{ product.howToUse }}</p>

      <p class="headings mb-1">Safety Advice:</p>
      <p class="mb-1" [innerHTML]="product.safetyAdvise"></p>

      <p class="headings mb-1">Common Side Effects:</p>
      <p class="mb-1">{{ product.commonSideEffect }}</p>

      <p class="headings mb-1">Storage:</p>
      <p class="mb-1">{{ product.storage }}</p>
    </div>
</div>
</ng-container>


<ng-template #loadingOrError>
  <p *ngIf="!isLoaded">Loading medicine details…</p>
  <p *ngIf="isLoaded && hasError">Could not load medicine details.</p>
</ng-template>





<app-footer></app-footer>
