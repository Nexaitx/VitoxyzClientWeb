<div class="signup-container mat-elevation-z2 ">
<mat-tab-group animationDuration="0ms" [(selectedIndex)]="selectedTabIndex">
    <!-- Personal Signup -->
    <mat-tab label="Personal">
      <div class="scroll-wrapper">
        <form [formGroup]="signupForm" (ngSubmit)="onSignupSubmit()" class="auth-form p-4 tabContainer">
          <h2 class="mb-3">Create Account</h2>

          <div class="form-group mb-3">
            <label>Full Name</label>
            <input class="form-control" formControlName="userName" placeholder="Enter Full Name" />
            <div *ngIf="signupForm.get('userName')?.touched && signupForm.get('userName')?.invalid" class="text-danger">
              <small *ngIf="signupForm.get('userName')?.hasError('required')">Full Name is required</small>
              <small *ngIf="signupForm.get('userName')?.hasError('minlength')">Full Name must be at least 3
                characters</small>
            </div>
          </div>

          <div class="form-group mb-3">
            <label>Email Address <span class="text-danger">*</span></label>
            <input class="form-control" formControlName="email" placeholder="Enter your Email" />
            <div *ngIf="signupForm.get('email')?.touched && signupForm.get('email')?.invalid" class="text-danger">
              <small *ngIf="signupForm.get('email')?.hasError('required')">Email is required</small>
              <small *ngIf="signupForm.get('email')?.hasError('email')">Enter a valid email</small>
            </div>
          </div>

          <div class="form-group mb-3">
            <label>Phone Number <span class="text-danger">*</span></label>
            <input class="form-control" formControlName="phoneNumber" maxlength="10" placeholder="Enter Phone Number" />
            <div *ngIf="signupForm.get('phoneNumber')?.hasError('required') && signupForm.get('phoneNumber')?.touched"
              class="text-danger">
              Phone number is required.
            </div>

            <!-- Minlength -->
            <div *ngIf="signupForm.get('phoneNumber')?.hasError('minlength') && signupForm.get('phoneNumber')?.touched"
              class="text-danger">
              Phone number must be 10 digits.
            </div>

            <!-- Maxlength -->
            <div *ngIf="signupForm.get('phoneNumber')?.hasError('maxlength') && signupForm.get('phoneNumber')?.touched"
              class="text-danger">
              Phone number must be 10 digits.
            </div>

            <!-- Pattern -->
            <div *ngIf="signupForm.get('phoneNumber')?.hasError('pattern') && signupForm.get('phoneNumber')?.touched"
              class="text-danger">
              Phone number must contain digits only.
            </div>
          </div>

          <div class="form-group mb-3">
            <label>Password</label>
            <div class="input-group position-relative">
              <input class="form-control" [type]="showPassword ? 'text' : 'password'" formControlName="password"
                placeholder="Enter Password" />

              <button type="button" (click)="togglePasswordVisibility('password')"
                [attr.aria-label]="showPassword ? 'Hide password' : 'Show password'" [attr.aria-pressed]="showPassword"
                class="btn btn-link p-0   eye-btn">
                 <i class="bi" [ngClass]="showConfirmPassword ? 'bi-eye' : 'bi-eye-slash'"></i>
              </button>
            </div>
            <div *ngIf="signupForm.get('password')?.touched && signupForm.get('password')?.invalid" class="text-danger">
              <small *ngIf="signupForm.get('password')?.hasError('required')">Password is required</small>
              <small *ngIf="signupForm.get('password')?.hasError('minlength')">Minimum 6 characters required</small>
              <small *ngIf="signupForm.get('password')?.hasError('maxlength')">Maximum 14 characters allowed</small>
              <small *ngIf="signupForm.get('password')?.hasError('weakPassword')">
                Must include uppercase, lowercase, number & symbol
              </small>
            </div>
          </div>

          <div class="form-group mb-3">
            <label>Confirm Password</label>
            <div class="input-group position-relative">
              <input class="form-control" [type]="showConfirmPassword ? 'text' : 'password'"
                formControlName="confirmPassword" placeholder="Confirm Password" />

              <button type="button" (click)="togglePasswordVisibility('confirm')"
                [attr.aria-label]="showConfirmPassword ? 'Hide password' : 'Show password'"
                [attr.aria-pressed]="showConfirmPassword" class="btn btn-link p-0 eye-btn">
                <i class="bi" [ngClass]="showConfirmPassword ? 'bi-eye' : 'bi-eye-slash'"></i>
              </button>
            </div>
            <div *ngIf="signupForm.get('confirmPassword')?.touched && signupForm.get('confirmPassword')?.invalid"
              class="text-danger">
              <small *ngIf="signupForm.get('confirmPassword')?.hasError('required')">Confirm Password is
                required</small>
              <small *ngIf="signupForm.get('confirmPassword')?.hasError('passwordMismatch')">Passwords do not
                match</small>
            </div>
          </div>


          <div class="password-rules mb-3">
            <p>Your password requires the following :</p>
            <ul>
              <li>✔ At least one lowercase letter</li>
              <li>✔ At least one Capital letter</li>
              <li>✔ At least one number</li>
              <li>✔ At least one symbol (!#*–%.$)</li>
              <li>✔ At least 9 characters (14 recommended)</li>
            </ul>
          </div>

          <app-submission [buttonType]="'Create Account'" [disableButton]="isLoading"></app-submission>

          <div class="text-center mt-3">
            By creating an account, you agree to our
            <a class="links">Terms of Use</a> and <a class="links">Privacy Policy</a>.
          </div>
        </form>
      </div>
    </mat-tab>


    <mat-tab label="Organization">
      <div class="scroll-wrapper">
        <form [formGroup]="orgSignupForm" (ngSubmit)="onHandleSubmitOrg()" class="auth-form p-4 tabContainer">
          <h2 class="mb-3">Create Account</h2>

          <div class="form-group mb-3">
            <label>Organization Category</label>
            <input class="form-control" formControlName="organizationCategory" placeholder="Enter Category Name" />
            <div
              *ngIf="orgSignupForm.get('organizationCategory')?.touched && orgSignupForm.get('organizationCategory')?.invalid"
              class="text-danger">
              <small *ngIf="orgSignupForm.get('organizationCategory')?.hasError('required')">Category is
                required</small>
            </div>
          </div>

          <div class="form-group mb-3">
            <label>Organization Name</label>
            <input class="form-control" formControlName="organizationName" placeholder="Enter Organization Name" />
            <div
              *ngIf="orgSignupForm.get('organizationName')?.touched && orgSignupForm.get('organizationName')?.invalid"
              class="text-danger">
              <small *ngIf="orgSignupForm.get('organizationName')?.hasError('required')">Organization Name is
                required</small>
              <small *ngIf="orgSignupForm.get('organizationName')?.hasError('minlength')">Minimum 3 characters
                required</small>
            </div>
          </div>

          <div class="form-group mb-3">
            <label>Email Address <span class="text-danger">*</span></label>
            <input class="form-control" formControlName="email" placeholder="Enter Email" />
            <div *ngIf="orgSignupForm.get('email')?.touched && orgSignupForm.get('email')?.invalid" class="text-danger">
              <small *ngIf="orgSignupForm.get('email')?.hasError('required')">Email is required</small>
              <small *ngIf="orgSignupForm.get('email')?.hasError('email')">Enter a valid email</small>
            </div>
          </div>

          <div class="form-group mb-3">
            <label>Phone Number <span class="text-danger">*</span></label>
            <input class="form-control" formControlName="phoneNumber" placeholder="Enter Phone Number" />
            <div *ngIf="orgSignupForm.get('phoneNumber')?.touched && orgSignupForm.get('phoneNumber')?.invalid"
              class="text-danger">
              <small *ngIf="orgSignupForm.get('phoneNumber')?.hasError('required')">Phone number is required</small>
              <small *ngIf="orgSignupForm.get('phoneNumber')?.hasError('pattern')">Enter a valid 10-digit phone
                number</small>
            </div>
          </div>

          <div class="form-group mb-3">
            <label>Password</label>
            <div class="input-group position-relative">
              <input class="form-control" [type]="showPassword ? 'text' : 'password'" formControlName="password"
                placeholder="Enter Password" />

              <button type="button" (click)="togglePasswordVisibility('password')"
                [attr.aria-label]="showPassword ? 'Hide password' : 'Show password'" [attr.aria-pressed]="showPassword"
                class="btn btn-link p-0 eye-btn">
                <i class="bi" [ngClass]="showPassword ? 'bi-eye' : 'bi-eye-slash'"></i>
              </button>
            </div>
            <div *ngIf="orgSignupForm.get('password')?.touched && orgSignupForm.get('password')?.invalid"
              class="text-danger">
              <small *ngIf="orgSignupForm.get('password')?.hasError('required')">Password is required</small>
              <small *ngIf="orgSignupForm.get('password')?.hasError('minlength')">Minimum 6 characters required</small>
              <small *ngIf="orgSignupForm.get('password')?.hasError('maxlength')">Maximum 14 characters allowed</small>
              <small *ngIf="orgSignupForm.get('password')?.hasError('weakPassword')">
                Must include uppercase, lowercase, number & symbol
              </small>
            </div>
          </div>

          <div class="form-group mb-3">
            <label>Confirm Password</label>
            <div class="input-group position-relative">
              <input class="form-control" [type]="showConfirmPassword ? 'text' : 'password'"
                formControlName="confirmPassword" placeholder="Confirm Password" />

              <button type="button" (click)="togglePasswordVisibility('confirm')"
                [attr.aria-label]="showConfirmPassword ? 'Hide password' : 'Show password'"
                [attr.aria-pressed]="showConfirmPassword" class="btn btn-link p-0 eye-btn">
                <i class="bi" [ngClass]="showConfirmPassword ? 'bi-eye' : 'bi-eye-slash'"></i>
              </button>
            </div>
            <div *ngIf="orgSignupForm.get('confirmPassword')?.touched && orgSignupForm.get('confirmPassword')?.invalid"
              class="text-danger">
              <small *ngIf="orgSignupForm.get('confirmPassword')?.hasError('required')">Confirm Password is
                required</small>
              <small *ngIf="orgSignupForm.get('confirmPassword')?.hasError('passwordMismatch')">Passwords do not
                match</small>
            </div>
          </div>

          <div class="password-rules mb-3">
            <p>Your password requires the following :</p>
            <ul>
              <li>✔ At least one lowercase letter</li>
              <li>✔ At least one Capital letter</li>
              <li>✔ At least one number</li>
              <li>✔ At least one symbol (!#*–%.$)</li>
              <li>✔ At least 9 characters (14 recommended)</li>
            </ul>
          </div>

          <app-submission [buttonType]="'Create Account'" [disableButton]="isLoading"></app-submission>
        </form>
      </div>
    </mat-tab>
  </mat-tab-group>

</div>